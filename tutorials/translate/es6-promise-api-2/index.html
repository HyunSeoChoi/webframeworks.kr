<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
<style>
@import url(https://fonts.googleapis.com/earlyaccess/nanumgothic.css); /* 나눔고딕 : 'Nanum Gothic' */
</style>
<title>WebFrameworks.kr - ES6 Promises(2) - the API</title>
<link rel="stylesheet" href="/static/css/bootstrap.min.css">
<link rel="stylesheet" href="/static/css/main.css">
<link rel="stylesheet" href="/static/css/syntax.css">
<link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css">
<script src="/static/js/jquery.min.js"></script>
<script src="/static/js/bootstrap.min.js"></script>

    <link rel="stylesheet" href="/static/css/toc.css">
    <script type="text/javascript" src="/static/js/jquery.toc.js"></script>
</head>
<body>
<nav class="navbar navbar-default top_menu" role="navigation">
    <div class="container-fluid">
        <div class="navbar-header">
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#navbar-collapse-1">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="/">웹Frameworks</a>
        </div>

        <div class="collapse navbar-collapse" id="navbar-collapse-1">
            <ul class="nav navbar-nav navbar-left">
                <li><a href="/getstarted">Get Started</a></li>
            </ul>
            <ul class="nav navbar-nav navbar-left">
                <li><a href="/updates">Update</a></li>
            </ul>
            <ul class="nav navbar-nav navbar-left">
                <li><a href="/tutorials">Tutorials</a></li>
            </ul>
            <ul class="nav navbar-nav navbar-left">
                <li><a href="/quickstart">Quick Start</a></li>
            </ul>
            <ul class="nav navbar-nav navbar-left">
                <li><a href="/archives">Archives</a></li>
            </ul>
            <ul class="nav navbar-nav navbar-left">
                <li><a href="https://github.com/KoreaHTML5/webframeworks.kr/blob/master/CONTRIBUTE.md" target="_blank">참여하기</a></li>
            </ul>
            <ul class="nav navbar-nav navbar-left">
                <li><a href="http://goo.gl/forms/MB9ZxVvdrD" target="_blank">설문하기</a></li>
            </ul>
        </div>
    </div>
</nav>


<div class="content_bg"  style="background-color: #F1F71A;color: #;" >
<div class="col-md-10 col-md-offset-1 title_header jumbotron"  style="background:url() no-repeat center"  >
<h1 class="title_header_title">ES6 Promises(2) - the API</h1>
<p class="title_header_summary">자바스크립트 ES6 Promise API에 대한 2번째 이야기입니다.</p>
</div>
</div>

<div>

    <div class="col-sm-3 col-md-2 col-md-offset-2">
        <div class="panel panel-default">
            <div class="panel-heading">
                <h3 class="panel-title">작성자</h3>
            </div>
            <div class="panel-body">
                <div class="media">
                    <a class="pull-left" href="#">
                        <img class="media-object profile_img" src="https://avatars0.githubusercontent.com/u/8802261?v=3&s=400" alt="박관웅">
                    </a>
                    <div class="media-body">
                        <h4 class="media-heading">
                            박관웅

                        </h4>
                        pouu69<br>
                    </div>
                </div>
            </div>
        </div>

        <div id="toc_location"></div>

        <div class="panel panel-default">
    <div class="panel-heading">
        <h3 class="panel-title">Tags</h3>
    </div>
    <div class="panel-body">
        <a href='/tags/jquery/' style='color: rgba(0,0,0,0.058376)'>jquery</a>
<a href='/tags/javascript/' style='color: rgba(0,0,0,8.989848)'>javascript</a>
<a href='/tags/html/' style='color: rgba(0,0,0,0.058376)'>html</a>
<a href='/tags/grunt/' style='color: rgba(0,0,0,0.058376)'>grunt</a>
<a href='/tags/gulp/' style='color: rgba(0,0,0,0.058376)'>gulp</a>
<a href='/tags/build/' style='color: rgba(0,0,0,0.350254)'>build</a>
<a href='/tags/yeoman/' style='color: rgba(0,0,0,0.058376)'>yeoman</a>
<a href='/tags/foundation/' style='color: rgba(0,0,0,0.058376)'>foundation</a>
<a href='/tags/bower/' style='color: rgba(0,0,0,0.116751)'>bower</a>
<a href='/tags/twitter/' style='color: rgba(0,0,0,0.116751)'>twitter</a>
<a href='/tags/framework/' style='color: rgba(0,0,0,2.276650)'>framework</a>
<a href='/tags/angularjs/' style='color: rgba(0,0,0,0.992386)'>angularjs</a>
<a href='/tags/tutorials/' style='color: rgba(0,0,0,1.284264)'>tutorials</a>
<a href='/tags/backbone/' style='color: rgba(0,0,0,0.233503)'>backbone</a>
<a href='/tags/getstarted/' style='color: rgba(0,0,0,0.175127)'>getstarted</a>
<a href='/tags/underscore/' style='color: rgba(0,0,0,0.058376)'>underscore</a>
<a href='/tags/library/' style='color: rgba(0,0,0,0.408629)'>library</a>
<a href='/tags/Ext/' style='color: rgba(0,0,0,0.525381)'>Ext</a>
<a href='/tags/JS/' style='color: rgba(0,0,0,0.817259)'>JS</a>
<a href='/tags/tutorial/' style='color: rgba(0,0,0,0.758883)'>tutorial</a>
<a href='/tags/modernizr/' style='color: rgba(0,0,0,0.058376)'>modernizr</a>
<a href='/tags/bootstrap/' style='color: rgba(0,0,0,0.175127)'>bootstrap</a>
<a href='/tags/quickstart/' style='color: rgba(0,0,0,0.058376)'>quickstart</a>
<a href='/tags/angular-di/' style='color: rgba(0,0,0,0.058376)'>angular-di</a>
<a href='/tags/animation/' style='color: rgba(0,0,0,0.233503)'>animation</a>
<a href='/tags/router/' style='color: rgba(0,0,0,0.058376)'>router</a>
<a href='/tags/promise/' style='color: rgba(0,0,0,0.291878)'>promise</a>
<a href='/tags/responsive/' style='color: rgba(0,0,0,0.058376)'>responsive</a>
<a href='/tags/form/' style='color: rgba(0,0,0,0.116751)'>form</a>
<a href='/tags/validation/' style='color: rgba(0,0,0,0.116751)'>validation</a>
<a href='/tags/map/' style='color: rgba(0,0,0,0.058376)'>map</a>
<a href='/tags/direcitve/' style='color: rgba(0,0,0,0.058376)'>direcitve</a>
<a href='/tags/file/' style='color: rgba(0,0,0,0.116751)'>file</a>
<a href='/tags/test/' style='color: rgba(0,0,0,0.233503)'>test</a>
<a href='/tags/ui-bootstrap/' style='color: rgba(0,0,0,0.058376)'>ui-bootstrap</a>
<a href='/tags/twitter-bootstrap/' style='color: rgba(0,0,0,0.058376)'>twitter-bootstrap</a>
<a href='/tags/express/' style='color: rgba(0,0,0,0.116751)'>express</a>
<a href='/tags/express.js/' style='color: rgba(0,0,0,0.058376)'>express.js</a>
<a href='/tags/node.js/' style='color: rgba(0,0,0,0.233503)'>node.js</a>
<a href='/tags/backend/' style='color: rgba(0,0,0,0.175127)'>backend</a>
<a href='/tags/d3.js/' style='color: rgba(0,0,0,0.058376)'>d3.js</a>
<a href='/tags/visualization/' style='color: rgba(0,0,0,0.058376)'>visualization</a>
<a href='/tags/reactjs/' style='color: rgba(0,0,0,0.116751)'>reactjs</a>
<a href='/tags/expressjs/' style='color: rgba(0,0,0,0.408629)'>expressjs</a>
<a href='/tags/react/' style='color: rgba(0,0,0,1.284264)'>react</a>
<a href='/tags/session/' style='color: rgba(0,0,0,0.116751)'>session</a>
<a href='/tags/meteor/' style='color: rgba(0,0,0,0.817259)'>meteor</a>
<a href='/tags/SEO/' style='color: rgba(0,0,0,0.058376)'>SEO</a>
<a href='/tags/REST/' style='color: rgba(0,0,0,0.058376)'>REST</a>
<a href='/tags/API/' style='color: rgba(0,0,0,0.058376)'>API</a>
<a href='/tags/es2015/' style='color: rgba(0,0,0,0.116751)'>es2015</a>
<a href='/tags/es6/' style='color: rgba(0,0,0,0.642132)'>es6</a>
<a href='/tags/es7/' style='color: rgba(0,0,0,0.116751)'>es7</a>
<a href='/tags/DDP/' style='color: rgba(0,0,0,0.058376)'>DDP</a>
<a href='/tags/ngMessages/' style='color: rgba(0,0,0,0.116751)'>ngMessages</a>
<a href='/tags/jsx/' style='color: rgba(0,0,0,0.058376)'>jsx</a>
<a href='/tags/publish/' style='color: rgba(0,0,0,0.058376)'>publish</a>
<a href='/tags/subscribe/' style='color: rgba(0,0,0,0.058376)'>subscribe</a>
<a href='/tags/meteor.js/' style='color: rgba(0,0,0,0.058376)'>meteor.js</a>
<a href='/tags/reactive/' style='color: rgba(0,0,0,0.058376)'>reactive</a>
<a href='/tags/package/' style='color: rgba(0,0,0,0.058376)'>package</a>
<a href='/tags/static/' style='color: rgba(0,0,0,0.058376)'>static</a>
<a href='/tags/assets/' style='color: rgba(0,0,0,0.058376)'>assets</a>
<a href='/tags/public/' style='color: rgba(0,0,0,0.058376)'>public</a>
<a href='/tags/flux/' style='color: rgba(0,0,0,0.233503)'>flux</a>
<a href='/tags/redux/' style='color: rgba(0,0,0,0.408629)'>redux</a>
<a href='/tags/server/' style='color: rgba(0,0,0,0.058376)'>server</a>
<a href='/tags/distribution/' style='color: rgba(0,0,0,0.058376)'>distribution</a>
<a href='/tags/webpack/' style='color: rgba(0,0,0,0.175127)'>webpack</a>
<a href='/tags/development/' style='color: rgba(0,0,0,0.058376)'>development</a>
<a href='/tags/optimization/' style='color: rgba(0,0,0,0.058376)'>optimization</a>
<a href='/tags/immutable/' style='color: rgba(0,0,0,0.058376)'>immutable</a>
<a href='/tags/orm/' style='color: rgba(0,0,0,0.233503)'>orm</a>
<a href='/tags/database/' style='color: rgba(0,0,0,0.233503)'>database</a>
<a href='/tags/hapi.js/' style='color: rgba(0,0,0,0.058376)'>hapi.js</a>
<a href='/tags/hapi/' style='color: rgba(0,0,0,0.233503)'>hapi</a>
<a href='/tags/ionic/' style='color: rgba(0,0,0,0.116751)'>ionic</a>
<a href='/tags/hybrid-app/' style='color: rgba(0,0,0,0.058376)'>hybrid-app</a>
<a href='/tags/django/' style='color: rgba(0,0,0,0.058376)'>django</a>
<a href='/tags/fullstack/' style='color: rgba(0,0,0,0.058376)'>fullstack</a>
<a href='/tags/spa/' style='color: rgba(0,0,0,0.058376)'>spa</a>
<a href='/tags/ExpressJS/' style='color: rgba(0,0,0,0.291878)'>ExpressJS</a>
<a href='/tags/NodeJS/' style='color: rgba(0,0,0,0.291878)'>NodeJS</a>
<a href='/tags/Sequelize/' style='color: rgba(0,0,0,0.291878)'>Sequelize</a>
<a href='/tags/Mocha/' style='color: rgba(0,0,0,0.291878)'>Mocha</a>
<a href='/tags/Supertest/' style='color: rgba(0,0,0,0.291878)'>Supertest</a>
<a href='/tags/UnitTest/' style='color: rgba(0,0,0,0.291878)'>UnitTest</a>
<a href='/tags/this/' style='color: rgba(0,0,0,0.116751)'>this</a>
<a href='/tags/dom/' style='color: rgba(0,0,0,0.058376)'>dom</a>
<a href='/tags/es5/' style='color: rgba(0,0,0,0.116751)'>es5</a>
<a href='/tags/virtualdom/' style='color: rgba(0,0,0,0.116751)'>virtualdom</a>
<a href='/tags/modules/' style='color: rgba(0,0,0,0.058376)'>modules</a>
<a href='/tags/asynchronous/' style='color: rgba(0,0,0,0.058376)'>asynchronous</a>
<a href='/tags/semicolon/' style='color: rgba(0,0,0,0.058376)'>semicolon</a>
<a href='/tags/nodejs/' style='color: rgba(0,0,0,0.058376)'>nodejs</a>
<a href='/tags/ECMAScript2015/' style='color: rgba(0,0,0,0.116751)'>ECMAScript2015</a>
<a href='/tags/babel/' style='color: rgba(0,0,0,0.058376)'>babel</a>
<a href='/tags/angular,/' style='color: rgba(0,0,0,0.058376)'>angular,</a>
<a href='/tags/electron/' style='color: rgba(0,0,0,0.116751)'>electron</a>
<a href='/tags/docker/' style='color: rgba(0,0,0,0.291878)'>docker</a>
<a href='/tags/D3/' style='color: rgba(0,0,0,0.058376)'>D3</a>
<a href='/tags/node/' style='color: rgba(0,0,0,0.116751)'>node</a>
<a href='/tags/aws/' style='color: rgba(0,0,0,1.401015)'>aws</a>
<a href='/tags/dynamoDB/' style='color: rgba(0,0,0,0.058376)'>dynamoDB</a>
<a href='/tags/chrome/' style='color: rgba(0,0,0,0.058376)'>chrome</a>
<a href='/tags/native/' style='color: rgba(0,0,0,0.116751)'>native</a>
<a href='/tags/markdown/' style='color: rgba(0,0,0,0.058376)'>markdown</a>
<a href='/tags/vue/' style='color: rgba(0,0,0,2.159898)'>vue</a>
<a href='/tags/middleware/' style='color: rgba(0,0,0,0.058376)'>middleware</a>
<a href='/tags/IoT/' style='color: rgba(0,0,0,0.058376)'>IoT</a>
<a href='/tags/serverless/' style='color: rgba(0,0,0,0.058376)'>serverless</a>
<a href='/tags/python/' style='color: rgba(0,0,0,0.175127)'>python</a>
<a href='/tags/socket.io/' style='color: rgba(0,0,0,0.175127)'>socket.io</a>
<a href='/tags/typescript/' style='color: rgba(0,0,0,0.058376)'>typescript</a>
<a href='/tags/laravel/' style='color: rgba(0,0,0,0.175127)'>laravel</a>

    </div>
</div>
    </div>

    <div class="col-sm-9 col-md-6">
        <div class="media_content media_item shadow_panel" id="main_content">
            <blockquote>
<p>이 문서는 http://www.2ality.com/2014/10/es6-promises-api.html 를 번역한 내용입니다.</p>

<p>또한 <a href="http://webframeworks.kr/tutorials/translate/es6-promise-api-1">ES6 Promises(1) - the API</a> 다음 편 입니다.</p>
</blockquote>

<h1>6. 에러 처리</h1>

<p>앞서 언급했듯이, 에러 처리에서 반환하는 것은 <em>fulfillment</em> 값이 될 것입니다.(<em>rejection</em> 값이 아닌) 따라서 실패시 사용하는 기본값을 지정 할 수 있습니다.</p>
<div class="highlight"><pre><code class="language-javascript" data-lang="javascript"> <span class="nx">retrieveFileName</span><span class="p">()</span>
    <span class="p">.</span><span class="k">catch</span><span class="p">(</span><span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
        <span class="c1">// Something went wrong, use a default value</span>
        <span class="k">return</span> <span class="s1">&#39;Untitled.txt&#39;</span><span class="p">;</span>
    <span class="p">})</span>
    <span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="kd">function</span> <span class="p">(</span><span class="nx">fileName</span><span class="p">)</span> <span class="p">{</span>
        <span class="p">...</span>
    <span class="p">});</span>
</code></pre></div>
<h2>6-1 예외를 잡자(Catching exceptions)</h2>

<p><strong>executor</strong>의 예외(Exceptions)는 다음 에러 핸들러(<em>handler</em>) 에게 전달 됩니다.</p>
<div class="highlight"><pre><code class="language-javascript" data-lang="javascript">    <span class="k">new</span> <span class="nx">Promise</span><span class="p">(</span><span class="kd">function</span> <span class="p">(</span><span class="nx">resolve</span><span class="p">,</span> <span class="nx">reject</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">throw</span> <span class="k">new</span> <span class="nb">Error</span><span class="p">();</span>
    <span class="p">})</span>
    <span class="p">.</span><span class="k">catch</span><span class="p">(</span><span class="kd">function</span> <span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="p">{</span>
        <span class="c1">// Handle error here</span>
    <span class="p">});</span>
</code></pre></div>
<p><strong>then</strong>&#39;s 매개변수 중에서 발생하는 예외는 다음과 같습니다.</p>
<div class="highlight"><pre><code class="language-javascript" data-lang="javascript">    <span class="nx">asyncFunc</span><span class="p">()</span>
    <span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="kd">function</span> <span class="p">(</span><span class="nx">value</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">throw</span> <span class="k">new</span> <span class="nb">Error</span><span class="p">();</span>
    <span class="p">})</span>
    <span class="p">.</span><span class="k">catch</span><span class="p">(</span><span class="kd">function</span> <span class="p">(</span><span class="nx">reason</span><span class="p">)</span> <span class="p">{</span>
        <span class="c1">// Handle error here</span>
    <span class="p">});</span>
</code></pre></div>
<h2>6-2 에러&#39;s 체이닝(Chaining errors)</h2>

<p>아래 예제를 보면 에러 핸들러를 제공 하지 않는 <code>then()</code>메서드는 하나 이상의 호출이 있을 수 있습니다. 그런 다음 에러 핸들러가 있는 곳 까지 에러는 전달 됩니다.</p>
<div class="highlight"><pre><code class="language-javascript" data-lang="javascript">    <span class="nx">asyncFunc1</span><span class="p">()</span>
    <span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="nx">asyncFunc2</span><span class="p">)</span>
    <span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="nx">asyncFunc3</span><span class="p">)</span>
    <span class="p">.</span><span class="k">catch</span><span class="p">(</span><span class="kd">function</span> <span class="p">(</span><span class="nx">reason</span><span class="p">)</span> <span class="p">{</span>
        <span class="c1">// Something went wrong above</span>
    <span class="p">});</span>
</code></pre></div>
<h1>7.Composition</h1>

<blockquote>
<p>이번 섹션은 새로운 것을 만들기 위해 기존 <strong>promises</strong>를 구성(<em>composition</em>) 하는 법을 설명하고자 합니다. 우리는 이미 <strong>promises</strong>를 구성(<em>composition</em>)하는 방법에 대해 본 적이 있습니다(:<code>then()</code>을 통한 순차적인 체이닝)<br>
<code>Promise.all()</code>과 <code>Promise.race()</code>은 추가적인 <strong>promises</strong>를 구성(<em>composition</em>)방법을 제공합니다.</p>
</blockquote>

<h2>7-1 <code>Promise.all()</code> 을 통한 <code>map()</code></h2>

<p><strong>Promises</strong>가 한가지 좋은 것은 promise기반 함수는 결과를 반환 하기 때문에, 여전히 많은 동기적으로 작동하는 도구(:라이브러리 tools)가 잘 작동한다는 것 입니다. 예를 들어, 배열이 제공하는 <code>map()</code> 메서드를 다음과 같이 사용 할 수 있습니다.</p>
<div class="highlight"><pre><code class="language-javascript" data-lang="javascript">    <span class="kd">var</span> <span class="nx">fileUrls</span> <span class="o">=</span> <span class="p">[</span>
        <span class="s1">&#39;http://example.com/file1.txt&#39;</span><span class="p">,</span>
        <span class="s1">&#39;http://example.com/file2.txt&#39;</span>
    <span class="p">];</span>
    <span class="kd">var</span> <span class="nx">promisedTexts</span> <span class="o">=</span> <span class="nx">fileUrls</span><span class="p">.</span><span class="nx">map</span><span class="p">(</span><span class="nx">httpGet</span><span class="p">);</span>
</code></pre></div>
<p>아래 예제 에서 <code>promisedTexts</code>는 <strong>promises</strong> 배열 입니다. <code>Promise.all()</code>은 <strong>promises</strong> 배열을 받고(<em>thenables</em>과 다른 값은 <code>Promise.resolve()</code>에 의해 <strong>promise</strong>로 변화됩니다.) 모든 <strong>promises</strong>가 성공(fulfilled)하면, 그것들의 값의 배열로 결과가 전달됩니다.</p>
<div class="highlight"><pre><code class="language-javascript" data-lang="javascript">    <span class="nx">Promise</span><span class="p">.</span><span class="nx">all</span><span class="p">(</span><span class="nx">promisedTexts</span><span class="p">)</span>
    <span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="kd">function</span> <span class="p">(</span><span class="nx">texts</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">texts</span><span class="p">.</span><span class="nx">forEach</span><span class="p">(</span><span class="kd">function</span> <span class="p">(</span><span class="nx">text</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">text</span><span class="p">);</span>
        <span class="p">});</span>
    <span class="p">})</span>
    <span class="p">.</span><span class="k">catch</span><span class="p">(</span><span class="kd">function</span> <span class="p">(</span><span class="nx">reason</span><span class="p">)</span> <span class="p">{</span>
        <span class="c1">// Receives first rejection among the promises</span>
    <span class="p">});</span>
</code></pre></div>
<h2>7-2 <code>Promise.race()</code>를 통한 Timing out</h2>

<p><code>Promise.race()</code>는 <em>promises</em> 배열을 받으며, 새로운 <strong>promise P</strong>를 반환 합니다.(<em>thenables</em>와 다른 값은 <code>Promise.resolve()</code>를 통해 promises 로 변환 됩니다.)<br>
만약 첫번째 <strong>Promise</strong>가 성공 또는 거절로 확정되면 그 <em>Promise</em>가 전달되어집니다. </p>

<p>아래 <code>Promise.race()</code>로 구현한 <em>timeout</em> 예제를 봅시다.</p>
<div class="highlight"><pre><code class="language-javascript" data-lang="javascript">    <span class="nx">Promise</span><span class="p">.</span><span class="nx">race</span><span class="p">([</span>
        <span class="nx">httpGet</span><span class="p">(</span><span class="s1">&#39;http://example.com/file.txt&#39;</span><span class="p">),</span>
        <span class="nx">delay</span><span class="p">(</span><span class="mi">5000</span><span class="p">).</span><span class="nx">then</span><span class="p">(</span><span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
            <span class="k">throw</span> <span class="k">new</span> <span class="nb">Error</span><span class="p">(</span><span class="s1">&#39;Timed out&#39;</span><span class="p">)</span>
        <span class="p">});</span>
    <span class="p">])</span>
    <span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="kd">function</span> <span class="p">(</span><span class="nx">text</span><span class="p">)</span> <span class="p">{</span> <span class="p">...</span> <span class="p">})</span>
    <span class="p">.</span><span class="k">catch</span><span class="p">(</span><span class="kd">function</span> <span class="p">(</span><span class="nx">reason</span><span class="p">)</span> <span class="p">{</span> <span class="p">...</span> <span class="p">});</span>
</code></pre></div>
<h1>8. 항상 비동기인 Promises</h1>

<p><em>promise</em> 라이브러리는 동기(즉시실행) 또는 비동기(현재 상황 이후에 promises실행)적으로 결과를 전달 하는 것을 완벽하게 통제 할 수 있습니다.<br>
그러나 <strong>Promise/A+</strong>은 후자의 경우(현재 상황이후에 promises실행)를 사용하길 요구합니다.<br>
<code>then()</code> 메서드를 위해 <a href="https://promisesaplus.com/#point-34">requirement</a> 를 따르기를 권장 합니다. (It states so via the following requirement (2.2.4) for the then() method:)</p>

<blockquote>
<p>실행컨텍스트 스택은 플랫폼 코드를 포함되기 전까지 <code>onFulfilled</code> 또는 <code>onRejected</code> 를 호출 할 수 없습니다.</p>
</blockquote>

<p>이 의미는 여러분의 코드는 <a href="https://github.com/FEDevelopers/tech.description/wiki/%5BES6%5D-%EB%B9%84%EB%8F%99%EA%B8%B0-%ED%94%84%EB%A1%9C%EA%B7%B8%EB%9E%98%EB%B0%8D#2-3-run-to-completion-%EC%9D%98%EB%AF%B8%ED%95%B4%EC%84%9D%ED%95%98%EA%B8%B0-%EB%AA%A8%ED%98%B8%ED%95%9C-%EA%B3%A0%EC%9C%A0-%EC%9A%A9%EC%96%B4">run-to-completion</a> 에 의존 할 수 있다는 것입니다.<br>
그리고 <em>promises</em> 체이닝은 다른  <strong>tasks</strong>의 프로세스를 처리하지 않을 것입니다.</p>

<h1>9. Cheat sheet: the ECMAScript 6 promise API</h1>

<p>이번 섹션은 <a href="https://tc39.github.io/ecma262/#sec-promise-objects">명세</a>에 설명 된대로 <em>ECMAScript6 promise API</em> 에 대한 개요를 설명합니다.</p>

<h2>9.1 Glossary(어휘)</h2>

<p><strong>Promise API</strong>는 결과를 비동기적으로 제공하는 것에 관한 내용입니다. <em>promise</em> 객체는 그 객체를 통해 전달되는 결과를 전달하는 대리자입니다.</p>

<h4>상태:</h4>

<ul>
<li>promise는 항상 3개중에 1개의 상호배타적인 상태를 가집니다.

<ul>
<li>결과가 준비되기전에는 promise는 대기중(<em>pending</em>) 상태입니다.</li>
<li>만약 결과가 준비됬으면, promise는 완료(<em>fulfilled</em>) 상태입니다.</li>
<li>만약 에러가 발생하면, promise 는 거절(<em>rejected</em>) 상태입니다.</li>
</ul></li>
<li>어떤 행위가 끝났다는건 promise 상태가 확정 됬다는 것입니다.(<em>fulfilled</em> 또는 <em>rejected</em>던지간에..)</li>
<li>promise는 한번 확정되면, 더이상 변하지 않습니다.</li>
</ul>

<h4>상태 변화 반응(<em>Reacting</em>):</h4>

<ul>
<li><em>Promise</em> 반응(<em>reactions</em>)은 <em>promise</em> <code>then()</code>에 등록한 콜백이며, <em>fulfillment</em> 또는 <em>rejection</em>을 통지를 받습니다.</li>
<li><em>thenable</em>은 <strong>promise</strong> 스타일 <code>then()</code> 메서드를 가진 객체입니다. <strong>API</strong>는 promise가 설정됬다는 알림을 받는 것에 관심있을 뿐 아니라 <em>thenables</em>도 요구 합니다.</li>
</ul>

<h4>변경 상태:</h4>

<p><em>promise</em>는 상태를 변경하기 위해 2가지 방법이 있습니다. 당신이 한번 호출 한 후에 재 호출은 아무 효과가 없습니다.</p>

<ul>
<li>promise가 거부(<em>Rejecting</em>)됬다는 것은 promise가 거절(<em>rejected</em>)된다는 것을 의미합니다.</li>
<li>promise가 해결(<em>Resolving</em>)됬다는 것은 당신이 어떤 값을 가지고 있냐에 따라 다른 영향을 끼칩니다.

<ul>
<li>일반적인 값(<em>thenable</em>이 아닌)으로 해결(<em>Resolving</em>)하면 그 값으로 충족(<em>fulfills</em>)됩니다.</li>
<li><em>thenable</em> <strong>T</strong>를 가진 promise <strong>P</strong>를 해결(<em>Resovling</em>)하는 것은 더이상 promise <strong>P</strong>는 사용할수 없고, <em>fulfillment</em> 또는 <em>rejection</em> 값을 가진 <strong>T</strong>의 상태를 따르게 됩니다. 적절한 <strong>P</strong>의 반응(<em>reactions</em>)은 <strong>T</strong>가 해결되면 즉시 재호출 되는 것입니다.</li>
</ul></li>
</ul>

<h2>9.2 생성자</h2>

<p>promise 생성자는 다음과 같은 시그니쳐를 따릅니다.</p>
<div class="highlight"><pre><code class="language-javascript" data-lang="javascript">    <span class="kd">var</span> <span class="nx">p</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Promise</span><span class="p">(</span><span class="nx">executor</span><span class="p">(</span><span class="nx">resolve</span><span class="p">,</span> <span class="nx">reject</span><span class="p">));</span>
</code></pre></div>
<p>이는 콜백 실행자(executor)에 의해 행동이 결정되는 <strong>promise</strong> 를 생성합니다. 생성자 파라미터를 사용하여 <code>var p</code>를 해결(<em>resolve</em>)하거나 거절(<em>reject</em>)할 수 있습니다.:</p>

<ul>
<li><code>x</code>를 통해 <code>p</code>를 해결하는 <code>resolve(x)</code>:

<ul>
<li>만약 <code>x</code>가 <em>thenable</em>이라면, 그 확정(<em>settlement</em>)은 <code>p</code>로 전달 됩니다.(<code>then()</code>을 통해 등록된 트리거 반응을 포함하여)</li>
<li>그렇지 않으면, <code>p</code>는 <code>x</code>로 처리(<em>fulfilled</em>) 됩니다.</li>
</ul></li>
<li><code>reject(e)</code>의 변수<code>e</code>를 통해 <code>p</code>는 거절(<em>reject</em>)됩니다.(<code>Error</code> 대신에)</li>
</ul>

<h2>9.3 정적 메소드</h2>

<blockquote>
<p><strong>Promise</strong>의 모든 정적메소드는 <em>subclassing</em> 을 제공합니다.</p>
</blockquote>

<p><em>subclassing</em>은 <em>receiver</em>를 통해 새로운 인스턴스를 생성합니다.(<code>new this(..)</code>) 또한 <em>subclassing</em>을 통해 다른 정적메소드에 접근합니다.(<code>this.resolve(...) VS</code>Promise.resolve(...))</p>

<h3>Promises 생성</h3>

<p>아래 2개 메서드는 새로운 <em>receiver</em> 인스턴스를 생성합니다.(<em>subclassing</em>의 this)</p>

<ul>
<li>Promise.resolve(x):

<ul>
<li>만약 <code>x</code>가 <em>thenable</em> 이면, <em>promise</em>로 변환됩니다.(receiver의 인스턴스)</li>
<li>만약 <code>x</code>가 <em>promise</em> 이면, 변경되지 않은채로 반환됩니다.</li>
<li>그렇지않으면, <code>x</code>가 처리된 새로운 <em>receiver</em> 인스턴스를 반홥니다.</li>
</ul></li>
<li>Promise.reject(reason): 어떤 값-<em>reason</em> 을 통해 거절(<em>rejected</em>)된 새로운 <em>promise</em>를 생성합니다. </li>
</ul>

<h3>Promises 합성</h3>

<p>정적메소드인 <code>Promise.all()</code>과 <code>Promise.race()</code>는 단일 <em>promise</em>를 반복 가능한 <em>promise&#39;s</em>로 구성합니다.<br>
그것은 즉:</p>

<ul>
<li>그것들은 <strong>iterable</strong>를 줍니다. <strong>iterable</strong>의 요소들은 <code>this.resolve()</code>를 통해 <em>promises</em>로 변환됩니다.</li>
<li>그것들은 새로운 <em>promise</em>를 반환합니다. 그 <em>promise</em>는 <em>receiver</em>의 새로운 인스턴스입니다.</li>
</ul>

<p>Method 들 :</p>

<ul>
<li>Promise.all(iterable): <em>promise</em> 반환

<ul>
<li>만약 <em>iterable</em> 요소들이 모두 완료(<em>fulfilled</em>)되면, <em>promise.all</em>은 완료(<em>fulfilled</em>)됩니다. <strong>Fulfillment</strong> 값: 완료(<em>fulfillment</em>)값들의 배열</li>
<li>만약 <em>iterable</em> 요소중 어느 하나라도 거절(<em>rejected</em>)되면 <em>promise.all</em>은 거절(<em>rejected</em>)됩니다. <strong>Rejection</strong> 값 : 첫번째 거절(<em>rejection</em>)값</li>
</ul></li>
<li>Promise.race(iterable): 확정(<em>settled</em>)된 <em>iterable</em> 첫번째 요소는 다음 반환되어지는 <em>promise</em>를 해결하기 위해 사용됩니다. </li>
</ul>

<h2>9.4 인스턴스 프로토타입 메서드&#39;s</h2>

<h4><code>Promise.prototype.then(onFulfilled, onRejected)</code>:</h4>

<ul>
<li><em>onFulfilled</em> 와 <em>onRejected</em> 콜백을 반응(reactions)이라고 부릅니다.</li>
<li><em>onFulfilled</em>는 promise가 이미 처리(<em>fulfilled</em>) 되었을 경우 즉시 호출되고 또는 그것이 실현되자마자 즉시 호출됩니다. 마찬가지로 <em>onRejected</em>는 거절에 관한 정보를 제공 받습니다.</li>
<li><code>then()</code>은 새로운 <code>promise Q</code>를 반환합니다.(<em>receiver</em> 생성자를 통해 생성된..):

<ul>
<li>만약 반응(<em>reactions</em>)중 하나라도 값을 반환하면, <em>Q</em>는 해결(<em>resolved</em>)됩니다.</li>
<li>만약 반응(<em>reactions</em>)중 하나라도 예외가 발생하면, <em>Q</em>는 거절(<em>rejected</em>) 됩니다.</li>
</ul></li>
<li>생략에 의한 반응들(Omitted reactions):

<ul>
<li>만약 <em>onFulfilled</em>가 생략되었다면, <em>receiver</em>의 완료(<em>fulfillment</em>)가 <code>then()</code>의 결과로 전달됩니다.</li>
<li>만약 <em>onRejected</em>가 생략되었다면, <em>receiver</em>의 거절(rejection)이 <code>then()</code>의 결과로 전달됩니다.</li>
</ul></li>
</ul>

<p><em>생략된 것의 반응</em> 의 기본 값은 다음과 같이 구현됩니다.</p>
<div class="highlight"><pre><code class="language-javascript" data-lang="javascript">    <span class="kd">function</span> <span class="nx">defaultOnFulfilled</span><span class="p">(</span><span class="nx">x</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">return</span> <span class="nx">x</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="kd">function</span> <span class="nx">defaultOnRejected</span><span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">throw</span> <span class="nx">e</span><span class="p">;</span>
    <span class="p">}</span>
</code></pre></div>
<h4><code>Promise.prototype.catch(onRejected)</code>:</h4>

<ul>
<li><code>then(null, onRejected)</code>와 동일</li>
</ul>

<h1>10. promises의 장단점</h1>

<h2>10.1 장점</h2>

<h3>통합 비동기 API</h3>

<p><em>promise</em>는 중요한 장점이 한가지 있습니다. <em>promise</em>는 점점 비동기식 브라우저 API&#39;s에 사용될 것이고, 현재 다양하고 호환되지 않은 패턴과 규칙들을 통합 할 것입니다.<br>
아래 2가지 promise 기반 API&#39;s를 봅시다.  </p>

<p><em>fetch</em> API는 <em>XMLHttpRequest</em> 대신에 선택할 수 있는 promise 기반 API입니다. </p>
<div class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="nx">fetch</span><span class="p">(</span><span class="nx">url</span><span class="p">)</span>
<span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="nx">request</span><span class="o">=&gt;</span><span class="nx">request</span><span class="p">.</span><span class="nx">text</span><span class="p">())</span>
<span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="nx">str</span><span class="o">=&gt;</span><span class="p">...)</span>
</code></pre></div>
<p><code>fetch()</code>는 실제 요청(<em>request</em>)에 대한 <em>promise</em>를 반환하고, <code>text()</code>는 컨텐츠에 관한 <em>promise</em>를 문자열로 반환합니다.  </p>

<p>모듈 프로그래밍 방식인 <code>Sytem.import</code>는 <a href="http://www.2ality.com/2014/09/es6-modules-final.html#the_ecmascript_6_module_loader_api">ECMAScript 6 API</a>에 <em>promise</em> 기반입니다.</p>
<div class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="nx">Sytem</span><span class="p">.</span><span class="kr">import</span><span class="p">(</span><span class="s1">&#39;some_module.js&#39;</span><span class="p">)</span>
<span class="nx">then</span><span class="p">(</span><span class="nx">some_module</span><span class="o">=&gt;</span><span class="p">{</span>
   <span class="p">....</span>
<span class="p">})</span>
</code></pre></div>
<h3>Promises VS events</h3>

<p><em>events</em>에 비해, 일회성 결과를 다루기에는 <em>promise</em>가 더 낫습니다. <em>promise</em>가 연산되어지는 전이든 후든, 그 결과를 등록했는지 여부는 중요하지 않습니다. 언제 등록 했는지에 상관없이 당신은 결과를 얻을 수 있습니다. 이런 <em>promise</em>장점은 자연에 본질적입니다.<br>
반면에, 당신은 반복 이벤트를 다룰때는 사용할 수 없습니다. 체이닝은 <em>promise</em>의 또다른 장점이지만, 하나의 이벤트 처리기에 등록됩니다.</p>

<h3>Promise VS callbacks</h3>

<p><em>callbacks</em>와 비교하자면, <em>promise</em>는 보다 깨끗한 함수(또는 메서드) 시그니쳐를 가지고 있습니다.<br>
<em>callback</em>은 매개변수에 입력과 출력을 사용합니다. </p>
<div class="highlight"><pre><code class="language-javascript" data-lang="javascript">    <span class="nx">fs</span><span class="p">.</span><span class="nx">readFile</span><span class="p">(</span><span class="nx">name</span><span class="p">,</span> <span class="nx">opts</span><span class="o">?</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">err</span><span class="p">,</span> <span class="nx">data</span><span class="p">))</span>
</code></pre></div>
<p><em>promise</em>의 모든 매개변수는 입력으로써 사용됩니다.:</p>
<div class="highlight"><pre><code class="language-javascript" data-lang="javascript">    <span class="nx">readFilePromisified</span><span class="p">(</span><span class="nx">name</span><span class="p">,</span> <span class="nx">opts</span><span class="o">?</span><span class="p">)</span>
        <span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="nx">dataHandler</span><span class="p">,</span> <span class="nx">errorHandler</span><span class="p">)</span>
</code></pre></div>
<p>추가적인 <em>promise</em> 장점은 에러처리를 포함하고 있습니다.(예외를 통합) 그리고 쉽게 합성할수 있습니다.(왜냐면 <code>Array.prototype.map()</code>와 같은 비동기 툴을 재사용 할수 있기 때문입니다.)</p>

<h2>10.2 단점</h2>

<p><em>Promises</em>는 단일 비동기 처리에 유리합니다. 하지만 다음은 적합하지 않습니다.
- 반복적인 이벤트 : 만약 당신이 관심이 있다면, <em>reactive programming</em>를 보길 바랍니다.(일반적인 이벤트 처리 체이닝을 현명하게 추가하는 방법)
- 데이터 스트림 : 현재 데이터 스트림을 제공하기 위해 <a href="https://streams.spec.whatwg.org/">표준</a>을 개발중입니다.</p>

<p>ECMAScript6 <em>promise</em>는 때때로 유용할 수 있는 2가지 특성이 없습니다.</p>

<ul>
<li>당신은 <em>promise</em>를 취소 할 수 없습니다.</li>
<li>당신은 <em>promise</em>가 얼만큼 진행 됬는지 요청 할수 없습니다.(예를들어 클라이언트 UI 에서 progress bar를 표시해주는것)</li>
</ul>

<p><strong>Q promise</strong> 라이브러리는 위 사항의 2번째 것을 <a href="https://github.com/kriskowal/q#progress-notification">제공</a>하고, <strong>Promise/A+</strong>는 위 2가지 사항을 추가할 것을 <a href="https://github.com/promises-aplus">계획</a>하고 있습니다.</p>

<h1>11. Promises와 generators</h1>

<p><code>Q.spawn()</code>같은 유틸리티 함수의 도움으로, 당신은 <em>generators</em>통해 구현된 <em>shallow coroutine</em>내에서 promise기반 함수를 사용 할수 있습니다. 이는 코드가 동기적으로 보여지고, <code>try-catch</code>같은 동기적인 메카니즘을 수행 할 수 있는 중요한 장점을 가지고 있습니다.</p>
<div class="highlight"><pre><code class="language-javascript" data-lang="javascript">    <span class="nx">Q</span><span class="p">.</span><span class="nx">spawn</span><span class="p">(</span><span class="kd">function</span><span class="o">*</span> <span class="p">()</span> <span class="p">{</span>
        <span class="k">try</span> <span class="p">{</span>
            <span class="kd">let</span> <span class="p">[</span><span class="nx">foo</span><span class="p">,</span> <span class="nx">bar</span><span class="p">]</span> <span class="o">=</span> <span class="k">yield</span> <span class="nx">Promise</span><span class="p">.</span><span class="nx">all</span><span class="p">([</span> <span class="c1">// (A)</span>
                <span class="nx">httpGet</span><span class="p">(</span><span class="s1">&#39;foo.json&#39;</span><span class="p">),</span>
                <span class="nx">httpGet</span><span class="p">(</span><span class="s1">&#39;bar.json&#39;</span><span class="p">)</span>
            <span class="p">]);</span>
            <span class="nx">render</span><span class="p">(</span><span class="nx">foo</span><span class="p">);</span>
            <span class="nx">render</span><span class="p">(</span><span class="nx">bar</span><span class="p">);</span>
        <span class="p">}</span> <span class="k">catch</span> <span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;Read failed: &#39;</span> <span class="o">+</span> <span class="nx">e</span><span class="p">);</span>
        <span class="p">}</span>
    <span class="p">});</span>
</code></pre></div>
<p><code>Q.spawn()</code> 매개변수는 <em>generator</em> 함수입니다. 만약 <code>yield</code> 연산자가 사용되었으면, 다음과 같이 발생합니다.</p>

<ol>
<li>함수의 실행은 일시정지입니다.</li>
<li><code>yield</code> 연산자는 함수의 반환입니다. (그것은 정확히 반환은 아니고, 현재는 무시되는 상태입니다.)</li>
<li>이후, 이 함수는 값 또는 예외로 다시 시작합니다. 전자의 경우(값인 경우) 그것이 정지된 상태에서 이후로 다시 실행되고, <code>yield</code>는 값을 반환합니다. 후자의 경우(예외인 경우)<code>yield</code> 연산자 내부에 예외를 발생시킨 것처럼, 예외는 함수 내에 발생합니다. </li>
</ol>

<p>따라서 <code>Q.spawn()</code>은 무엇을 해야 하는 지 분명합니다. <em>generator</em> 함수 <em>yield</em> promise가 실행되면, <code>spaw</code>은 반응(<em>reactions</em>)을 등록하고, 처리 되기를 기다립니다. 만약 <em>promise</em>가 <em>fulfilled</em>라면, <em>generator</em>는 결과와 함께 다시 재개합니다. 그리고 만약 <em>promise</em>가 <em>rejected</em>라면, 예외를 <em>generator</em> 내에 던집니다.<br>
새로운 구문 생성자 <em>async function</em>으로, <code>spawn</code>기능을 제공하자는 <a href="https://github.com/tc39/ecmascript-asyncawait">제안</a>이 있습니다.<br>
<em>async</em> 함수로써 이전 예제는 다음과 같습니다. 내부적으로는, 큰 차이가 없습니다. - <em>async</em> 함수는 <em>generators</em> 기반입니다.</p>
<div class="highlight"><pre><code class="language-javascript" data-lang="javascript">    <span class="nx">async</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
        <span class="k">try</span> <span class="p">{</span>
            <span class="kd">let</span> <span class="p">[</span><span class="nx">foo</span><span class="p">,</span> <span class="nx">bar</span><span class="p">]</span> <span class="o">=</span> <span class="nx">await</span> <span class="nx">Promise</span><span class="p">.</span><span class="nx">all</span><span class="p">([</span>
                <span class="nx">httpGet</span><span class="p">(</span><span class="s1">&#39;foo.json&#39;</span><span class="p">),</span>
                <span class="nx">httpGet</span><span class="p">(</span><span class="s1">&#39;bar.json&#39;</span><span class="p">)</span>
            <span class="p">]);</span>
            <span class="nx">render</span><span class="p">(</span><span class="nx">foo</span><span class="p">);</span>
            <span class="nx">render</span><span class="p">(</span><span class="nx">bar</span><span class="p">);</span>
        <span class="p">}</span> <span class="k">catch</span> <span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;Read failed: &#39;</span> <span class="o">+</span> <span class="nx">e</span><span class="p">);</span>
        <span class="p">}</span>
    <span class="p">}</span>
</code></pre></div>
<blockquote>
<p><a href="http://webframeworks.kr/tutorials/translate/es6-promise-api-3">3번째 챕터</a>에서 이어집니다.</p>
</blockquote>

        </div>

        <div class="media_content media_item shadow_panel">
            <p>Tags : <a href="/tags/javascript">javascript</a>&nbsp;<a href="/tags/es6">es6</a>&nbsp;<a href="/tags/promise">promise</a>&nbsp;</p>
        </div>


        <div class="media_content media_item shadow_panel">
            <div id="disqus_thread"></div>
<script type="text/javascript">
    /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
    var disqus_shortname = 'html5krforkisa'; // required: replace example with your forum shortname

    /* * * DON'T EDIT BELOW THIS LINE * * */
    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
    
        </div>

    </div>

    <script>
        $('#main_content').toc();
    </script>
</div>
<footer>
<table width="100%" height="80" class="footer">
    <tr>
        <td align="center" class="footer_content">
            WebFrameworks.kr @since 2015
        </td>
    </tr>
</table>
</footer>
<script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
            m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-56520981-1', 'auto');
    ga('send', 'pageview');

</script>
</body>
</html>