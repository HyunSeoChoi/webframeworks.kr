<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
<style>
@import url(https://fonts.googleapis.com/earlyaccess/nanumgothic.css); /* 나눔고딕 : 'Nanum Gothic' */
</style>
<title>WebFrameworks.kr - 가상 돔과 돔의 차이점</title>
<link rel="stylesheet" href="/static/css/bootstrap.min.css">
<link rel="stylesheet" href="/static/css/main.css">
<link rel="stylesheet" href="/static/css/syntax.css">
<link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css">
<script src="/static/js/jquery.min.js"></script>
<script src="/static/js/bootstrap.min.js"></script>

    <link rel="stylesheet" href="/static/css/toc.css">
    <script type="text/javascript" src="/static/js/jquery.toc.js"></script>
</head>
<body>
<nav class="navbar navbar-default top_menu" role="navigation">
    <div class="container-fluid">
        <div class="navbar-header">
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#navbar-collapse-1">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="/">웹Frameworks</a>
        </div>

        <div class="collapse navbar-collapse" id="navbar-collapse-1">
            <ul class="nav navbar-nav navbar-left">
                <li><a href="/getstarted">Get Started</a></li>
            </ul>
            <ul class="nav navbar-nav navbar-left">
                <li><a href="/updates">Update</a></li>
            </ul>
            <ul class="nav navbar-nav navbar-left">
                <li><a href="/tutorials">Tutorials</a></li>
            </ul>
            <ul class="nav navbar-nav navbar-left">
                <li><a href="/quickstart">Quick Start</a></li>
            </ul>
            <ul class="nav navbar-nav navbar-left">
                <li><a href="/archives">Archives</a></li>
            </ul>
            <ul class="nav navbar-nav navbar-left">
                <li><a href="https://github.com/KoreaHTML5/webframeworks.kr/blob/master/CONTRIBUTE.md" target="_blank">참여하기</a></li>
            </ul>
            <ul class="nav navbar-nav navbar-left">
                <li><a href="http://goo.gl/forms/MB9ZxVvdrD" target="_blank">설문하기</a></li>
            </ul>
        </div>
    </div>
</nav>


<div class="content_bg"  style="background-color: #;color: #;" >
<div class="col-md-10 col-md-offset-1 title_header jumbotron"  style="background:url() no-repeat center"  >
<h1 class="title_header_title">가상 돔과 돔의 차이점</h1>
<p class="title_header_summary">이 문서는 http://reactkungfu.com/2015/10/the-difference-between-virtual-dom-and-dom/ 를 번역한 내용입니다.</p>
</div>
</div>

<div>

    <div class="col-sm-3 col-md-2 col-md-offset-2">
        <div class="panel panel-default">
            <div class="panel-heading">
                <h3 class="panel-title">작성자</h3>
            </div>
            <div class="panel-body">
                <div class="media">
                    <a class="pull-left" href="#">
                        <img class="media-object profile_img" src="https://avatars0.githubusercontent.com/u/11900262?v=3&s=460" alt="송헌용">
                    </a>
                    <div class="media-body">
                        <h4 class="media-heading">
                            송헌용

                        </h4>
                        apple77y<br>
                    </div>
                </div>
            </div>
        </div>

        <div id="toc_location"></div>

        <div class="panel panel-default">
    <div class="panel-heading">
        <h3 class="panel-title">Tags</h3>
    </div>
    <div class="panel-body">
        <a href='/tags/jquery/' style='color: rgba(0,0,0,0.054142)'>jquery</a>
<a href='/tags/javascript/' style='color: rgba(0,0,0,9.420710)'>javascript</a>
<a href='/tags/html/' style='color: rgba(0,0,0,0.054142)'>html</a>
<a href='/tags/grunt/' style='color: rgba(0,0,0,0.054142)'>grunt</a>
<a href='/tags/gulp/' style='color: rgba(0,0,0,0.054142)'>gulp</a>
<a href='/tags/build/' style='color: rgba(0,0,0,0.324852)'>build</a>
<a href='/tags/yeoman/' style='color: rgba(0,0,0,0.054142)'>yeoman</a>
<a href='/tags/foundation/' style='color: rgba(0,0,0,0.054142)'>foundation</a>
<a href='/tags/bower/' style='color: rgba(0,0,0,0.108284)'>bower</a>
<a href='/tags/twitter/' style='color: rgba(0,0,0,0.108284)'>twitter</a>
<a href='/tags/framework/' style='color: rgba(0,0,0,2.111538)'>framework</a>
<a href='/tags/angularjs/' style='color: rgba(0,0,0,0.920414)'>angularjs</a>
<a href='/tags/tutorials/' style='color: rgba(0,0,0,1.191124)'>tutorials</a>
<a href='/tags/backbone/' style='color: rgba(0,0,0,0.216568)'>backbone</a>
<a href='/tags/getstarted/' style='color: rgba(0,0,0,0.162426)'>getstarted</a>
<a href='/tags/underscore/' style='color: rgba(0,0,0,0.054142)'>underscore</a>
<a href='/tags/library/' style='color: rgba(0,0,0,0.378994)'>library</a>
<a href='/tags/Ext/' style='color: rgba(0,0,0,0.487278)'>Ext</a>
<a href='/tags/JS/' style='color: rgba(0,0,0,0.757988)'>JS</a>
<a href='/tags/tutorial/' style='color: rgba(0,0,0,0.703846)'>tutorial</a>
<a href='/tags/modernizr/' style='color: rgba(0,0,0,0.054142)'>modernizr</a>
<a href='/tags/bootstrap/' style='color: rgba(0,0,0,0.162426)'>bootstrap</a>
<a href='/tags/quickstart/' style='color: rgba(0,0,0,0.054142)'>quickstart</a>
<a href='/tags/angular-di/' style='color: rgba(0,0,0,0.054142)'>angular-di</a>
<a href='/tags/animation/' style='color: rgba(0,0,0,0.216568)'>animation</a>
<a href='/tags/router/' style='color: rgba(0,0,0,0.054142)'>router</a>
<a href='/tags/promise/' style='color: rgba(0,0,0,0.270710)'>promise</a>
<a href='/tags/responsive/' style='color: rgba(0,0,0,0.054142)'>responsive</a>
<a href='/tags/form/' style='color: rgba(0,0,0,0.108284)'>form</a>
<a href='/tags/validation/' style='color: rgba(0,0,0,0.108284)'>validation</a>
<a href='/tags/map/' style='color: rgba(0,0,0,0.054142)'>map</a>
<a href='/tags/direcitve/' style='color: rgba(0,0,0,0.054142)'>direcitve</a>
<a href='/tags/file/' style='color: rgba(0,0,0,0.108284)'>file</a>
<a href='/tags/test/' style='color: rgba(0,0,0,0.216568)'>test</a>
<a href='/tags/ui-bootstrap/' style='color: rgba(0,0,0,0.054142)'>ui-bootstrap</a>
<a href='/tags/twitter-bootstrap/' style='color: rgba(0,0,0,0.054142)'>twitter-bootstrap</a>
<a href='/tags/express/' style='color: rgba(0,0,0,0.108284)'>express</a>
<a href='/tags/express.js/' style='color: rgba(0,0,0,0.054142)'>express.js</a>
<a href='/tags/node.js/' style='color: rgba(0,0,0,0.216568)'>node.js</a>
<a href='/tags/backend/' style='color: rgba(0,0,0,0.162426)'>backend</a>
<a href='/tags/d3.js/' style='color: rgba(0,0,0,0.054142)'>d3.js</a>
<a href='/tags/visualization/' style='color: rgba(0,0,0,0.324852)'>visualization</a>
<a href='/tags/reactjs/' style='color: rgba(0,0,0,0.108284)'>reactjs</a>
<a href='/tags/expressjs/' style='color: rgba(0,0,0,0.378994)'>expressjs</a>
<a href='/tags/react/' style='color: rgba(0,0,0,1.461834)'>react</a>
<a href='/tags/session/' style='color: rgba(0,0,0,0.108284)'>session</a>
<a href='/tags/meteor/' style='color: rgba(0,0,0,0.757988)'>meteor</a>
<a href='/tags/SEO/' style='color: rgba(0,0,0,0.054142)'>SEO</a>
<a href='/tags/REST/' style='color: rgba(0,0,0,0.054142)'>REST</a>
<a href='/tags/API/' style='color: rgba(0,0,0,0.054142)'>API</a>
<a href='/tags/es2015/' style='color: rgba(0,0,0,0.108284)'>es2015</a>
<a href='/tags/es6/' style='color: rgba(0,0,0,0.595562)'>es6</a>
<a href='/tags/es7/' style='color: rgba(0,0,0,0.108284)'>es7</a>
<a href='/tags/DDP/' style='color: rgba(0,0,0,0.054142)'>DDP</a>
<a href='/tags/ngMessages/' style='color: rgba(0,0,0,0.108284)'>ngMessages</a>
<a href='/tags/jsx/' style='color: rgba(0,0,0,0.054142)'>jsx</a>
<a href='/tags/publish/' style='color: rgba(0,0,0,0.054142)'>publish</a>
<a href='/tags/subscribe/' style='color: rgba(0,0,0,0.054142)'>subscribe</a>
<a href='/tags/meteor.js/' style='color: rgba(0,0,0,0.054142)'>meteor.js</a>
<a href='/tags/reactive/' style='color: rgba(0,0,0,0.054142)'>reactive</a>
<a href='/tags/package/' style='color: rgba(0,0,0,0.054142)'>package</a>
<a href='/tags/static/' style='color: rgba(0,0,0,0.054142)'>static</a>
<a href='/tags/assets/' style='color: rgba(0,0,0,0.054142)'>assets</a>
<a href='/tags/public/' style='color: rgba(0,0,0,0.054142)'>public</a>
<a href='/tags/flux/' style='color: rgba(0,0,0,0.216568)'>flux</a>
<a href='/tags/redux/' style='color: rgba(0,0,0,0.378994)'>redux</a>
<a href='/tags/server/' style='color: rgba(0,0,0,0.054142)'>server</a>
<a href='/tags/distribution/' style='color: rgba(0,0,0,0.054142)'>distribution</a>
<a href='/tags/webpack/' style='color: rgba(0,0,0,0.162426)'>webpack</a>
<a href='/tags/development/' style='color: rgba(0,0,0,0.054142)'>development</a>
<a href='/tags/optimization/' style='color: rgba(0,0,0,0.054142)'>optimization</a>
<a href='/tags/immutable/' style='color: rgba(0,0,0,0.054142)'>immutable</a>
<a href='/tags/orm/' style='color: rgba(0,0,0,0.216568)'>orm</a>
<a href='/tags/database/' style='color: rgba(0,0,0,0.216568)'>database</a>
<a href='/tags/hapi.js/' style='color: rgba(0,0,0,0.054142)'>hapi.js</a>
<a href='/tags/hapi/' style='color: rgba(0,0,0,0.216568)'>hapi</a>
<a href='/tags/ionic/' style='color: rgba(0,0,0,0.108284)'>ionic</a>
<a href='/tags/hybrid-app/' style='color: rgba(0,0,0,0.054142)'>hybrid-app</a>
<a href='/tags/django/' style='color: rgba(0,0,0,0.054142)'>django</a>
<a href='/tags/fullstack/' style='color: rgba(0,0,0,0.054142)'>fullstack</a>
<a href='/tags/spa/' style='color: rgba(0,0,0,0.054142)'>spa</a>
<a href='/tags/ExpressJS/' style='color: rgba(0,0,0,0.270710)'>ExpressJS</a>
<a href='/tags/NodeJS/' style='color: rgba(0,0,0,0.270710)'>NodeJS</a>
<a href='/tags/Sequelize/' style='color: rgba(0,0,0,0.270710)'>Sequelize</a>
<a href='/tags/Mocha/' style='color: rgba(0,0,0,0.270710)'>Mocha</a>
<a href='/tags/Supertest/' style='color: rgba(0,0,0,0.270710)'>Supertest</a>
<a href='/tags/UnitTest/' style='color: rgba(0,0,0,0.270710)'>UnitTest</a>
<a href='/tags/this/' style='color: rgba(0,0,0,0.108284)'>this</a>
<a href='/tags/dom/' style='color: rgba(0,0,0,0.054142)'>dom</a>
<a href='/tags/es5/' style='color: rgba(0,0,0,0.108284)'>es5</a>
<a href='/tags/virtualdom/' style='color: rgba(0,0,0,0.108284)'>virtualdom</a>
<a href='/tags/modules/' style='color: rgba(0,0,0,0.054142)'>modules</a>
<a href='/tags/asynchronous/' style='color: rgba(0,0,0,0.054142)'>asynchronous</a>
<a href='/tags/semicolon/' style='color: rgba(0,0,0,0.054142)'>semicolon</a>
<a href='/tags/nodejs/' style='color: rgba(0,0,0,0.108284)'>nodejs</a>
<a href='/tags/ECMAScript2015/' style='color: rgba(0,0,0,0.108284)'>ECMAScript2015</a>
<a href='/tags/babel/' style='color: rgba(0,0,0,0.054142)'>babel</a>
<a href='/tags/angular,/' style='color: rgba(0,0,0,0.054142)'>angular,</a>
<a href='/tags/electron/' style='color: rgba(0,0,0,0.108284)'>electron</a>
<a href='/tags/docker/' style='color: rgba(0,0,0,0.270710)'>docker</a>
<a href='/tags/D3/' style='color: rgba(0,0,0,0.054142)'>D3</a>
<a href='/tags/node/' style='color: rgba(0,0,0,0.108284)'>node</a>
<a href='/tags/aws/' style='color: rgba(0,0,0,1.353550)'>aws</a>
<a href='/tags/dynamoDB/' style='color: rgba(0,0,0,0.054142)'>dynamoDB</a>
<a href='/tags/chrome/' style='color: rgba(0,0,0,0.054142)'>chrome</a>
<a href='/tags/native/' style='color: rgba(0,0,0,0.108284)'>native</a>
<a href='/tags/markdown/' style='color: rgba(0,0,0,0.054142)'>markdown</a>
<a href='/tags/vue/' style='color: rgba(0,0,0,2.003254)'>vue</a>
<a href='/tags/middleware/' style='color: rgba(0,0,0,0.054142)'>middleware</a>
<a href='/tags/IoT/' style='color: rgba(0,0,0,0.054142)'>IoT</a>
<a href='/tags/serverless/' style='color: rgba(0,0,0,0.487278)'>serverless</a>
<a href='/tags/python/' style='color: rgba(0,0,0,0.162426)'>python</a>
<a href='/tags/socket.io/' style='color: rgba(0,0,0,0.162426)'>socket.io</a>
<a href='/tags/typescript/' style='color: rgba(0,0,0,0.054142)'>typescript</a>
<a href='/tags/laravel/' style='color: rgba(0,0,0,1.353550)'>laravel</a>
<a href='/tags/github/' style='color: rgba(0,0,0,0.108284)'>github</a>
<a href='/tags/slack/' style='color: rgba(0,0,0,0.108284)'>slack</a>
<a href='/tags/data/' style='color: rgba(0,0,0,0.270710)'>data</a>
<a href='/tags/opensource/' style='color: rgba(0,0,0,0.054142)'>opensource</a>
<a href='/tags/pwa/' style='color: rgba(0,0,0,0.054142)'>pwa</a>
<a href='/tags/vuejs/' style='color: rgba(0,0,0,0.378994)'>vuejs</a>
<a href='/tags/nextjs/' style='color: rgba(0,0,0,0.270710)'>nextjs</a>

    </div>
</div>
    </div>

    <div class="col-sm-9 col-md-6">
        <div class="media_content media_item shadow_panel" id="main_content">
            <p>리액트는 가상 돔이라는 개념을 메인 페이지에 놓았다. 이 개념은 매우 중요하게 보인다.</p>

<p>근데 이 &quot;가상 돔&quot; 이라는 것이 정확히 어떤 의미일까?</p>

<h2>돔</h2>

<p>사전적인 의미로 돔은 Document Object Model을 의미하고, 이것은 구조화된 텍스트의 개념이다.</p>

<p>그러므로 HTML은 단순 텍스트일지라도 돔은 메모리에 값을 가지고 있는 표현 식이다.</p>
<div class="highlight"><pre><code class="language-text" data-lang="text">프로그램의 인스턴스와 비교해보자.
하나의 프로그램에는 다수의 프로세스가 있다. 하나의 HTML 안에 다수의 돔이 있는 것처럼 말이다.
(예를 들어 같은 페이지 안에 여러 개의 탭이 있는 경우)
</code></pre></div>
<p>HTML 돔은 노드를 탐색하거나 수정할 수 있는 API를 제공한다. 돔은 <code>getElementById</code> 혹은 <code>removeChild</code>와 같은 메소드를 포함한다. 우리는 돔과 관련된 작업을 하기 위해 보통 자바스크립트라는 언어를 사용한다.</p>

<p>왜 하필 자바스크립트인지는 아무도 모르지만.. :)</p>

<p>그러므로 웹 페이지의 컨텐츠를 동적으로 수정하고 싶으면 우리는 돔을 수정한다.</p>
<div class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="kd">var</span> <span class="nx">item</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s2">&quot;myLI&quot;</span><span class="p">);</span>
<span class="nx">item</span><span class="p">.</span><span class="nx">parentNode</span><span class="p">.</span><span class="nx">removeChild</span><span class="p">(</span><span class="nx">item</span><span class="p">);</span>
</code></pre></div>
<p><code>document</code>는 root node의 추상화된 개념이다. 반면에 <code>getElementById</code>, <code>parentNode</code>, <code>removeChild</code>와 같은 메소드는 HTML DOM API에서 비롯되었다.</p>

<h2>이슈</h2>

<p>HTML 돔은 HTML document의 구조와 같은 트리 구조로 이루어져 있다. 트리 구조는 탐색하기 쉬우므로 사용성이 좋다. 하지만, 쉽다고 했지 빠르다고 하지는 않았다.</p>

<p>오늘날의 돔 트리는 매우 거대하다. 왜냐하면, 우리는 더욱더 크고 다양한 웹 어플리케이션(<em>싱글 페이지 어플리케이션 - SPA</em>)을 개발하고 있다. 그러다 보니 우리는 돔 트리를 수정하는 일이 점점 잦아졌다. 이 작업은 개발하는 데 있어서 굉장히 골칫거리다.</p>

<p>만약 돔 안에 천 개 단위의 <code>div</code>이 있다고 가정하자. 우리는 모던 웹 개발자이기 때문에 이 앱은 SPA로 구성되어 있다. 거기에는 수많은 이벤트 핸들러 메소드가 있다. - clicks, submits, type-ins... 전형적인 <code>제이쿼리</code>와 같은 이벤트 핸들러는 이렇게 생겼다.</p>

<ul>
<li>이벤트를 다룰 노드를 찾고,</li>
<li>필요하면 업데이트한다.</li>
</ul>

<p>여기에는 두 가지의 문제점이 있다.</p>

<p>첫 번째로 다루기가 힘들다. 이벤트 핸들러를 다뤄야 하는 상황을 가정해보자. 만약 문맥을 제대로 찾지 못한다면, 코드가 어떻게 흘러가는지 깊숙하게 파고들어야 한다. 시간 소모가 크고 버그가 발생할 수도 있다.</p>

<p>두 번째로 불편하다. 탐색하는 걸 일일이 이런 식으로 해야 할까? 아마 우리가 더 똑똑해져서 어떤 노드가 업데이트 되어야 한다는 걸 구분할 수 있다면 어떨까?</p>

<p>다시 한 번 말하지만, 리액트는 이런 부분을 도와준다. 첫 번째 문제점을 해결해줄 방법은 &#39;정의&#39;이다. DOM 트리를 일일이 탐색하는 낮은 수준의 방법 대신에 컴포넌트가 어떻게 구성되어야 할지 간단하게 정의 해주기만 하면 된다. 낮은 수준의 작업은 리액트가 대신해줄 것이다. HTML 돔 API를 호출하는 작업에 대해서는 리액트가 해주기 때문에 걱정할 필요가 없다. 결국, 컴포넌트는 어떤 일을 해야 할지에 대해 정의를 해주면 된다.</p>

<p>하지만 이게 퍼포먼스 이슈를 해결해주지는 않는다. 바로 이 부분에서 가상 돔의 개념이 나올 차례다.</p>

<h2>가상 돔</h2>

<p>첫 번째로 가상 돔은 리액트에서 나온 개념이 아니다. 하지만 리액트는 무료로 이 개념을 사용하고 사용자들에게 제공한다.</p>

<p>가상 돔은 HTML 돔의 추상화 개념이다. 이것은 가볍고, 브라우저 스펙의 구현체와는 분리되어있다. 사실, 돔은 이미 추상화 개념이기 때문에 가상 돔은 추상화를 또 추상화한 개념이다.</p>

<p>사실 가상 돔은 리액트 일부의, HTML 돔의 간소화된 복사본이라고 생각하는 게 나을 것 같다. 가상 돔은 리액트가 가상 개념과 (보통 느리고 브라우저 스펙에 따르는) 진짜 돔 개념 간의 계산을 가능하게 해준다.</p>

<p>일반적인 돔과 가상 돔 간에 큰 차이점은 없다. 이 이유가 바로 리액트 내의 JSX 부분이 순수 HTML과 거의 같게 보이는 이유다.</p>
<div class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="kd">var</span> <span class="nx">CommentBox</span> <span class="o">=</span> <span class="nx">React</span><span class="p">.</span><span class="nx">createClass</span><span class="p">({</span>
  <span class="nx">render</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">return</span> <span class="p">(</span>
      <span class="o">&lt;</span><span class="nx">div</span> <span class="nx">className</span><span class="o">=</span><span class="s2">&quot;commentBox&quot;</span><span class="o">&gt;</span>
        <span class="nx">Hello</span><span class="p">,</span> <span class="nx">world</span><span class="o">!</span> <span class="nx">I</span> <span class="nx">am</span> <span class="nx">a</span> <span class="nx">CommentBox</span><span class="p">.</span>
      <span class="o">&lt;</span><span class="err">/div&gt;</span>
    <span class="p">);</span>
  <span class="p">}</span>
<span class="p">});</span>
</code></pre></div>
<p>대부분의 경우에서 HTML 코드가 있는데 이걸 정적인 리액트 컴포넌트로 만들고 싶을 때, 아래와 같이 하면 된다.</p>

<ol>
<li>render 부분에 HTML을 반환해준다.</li>
<li>class 속성을 className로 바꿔준다. 왜냐하면, class는 자바스크립트에 사용되는 예약어이기 때문이다.</li>
</ol>

<p>몇 가지 돔과의 자잘한 차이점이 더 있긴 하다.</p>

<ul>
<li>key, ref 그리고 dangerouslySetInnerHTML은 돔에 없는 속성이다. <a href="https://facebook.github.io/react/docs/special-non-dom-attributes.html">참고</a></li>
<li>리액트스러운 가상 돔은 <a href="https://facebook.github.io/react/docs/dom-differences.html">몇 가지 제약</a>을 더 소개해준다.</li>
</ul>

<h2>ReactElement vs ReactComponent</h2>

<p>가상 돔을 대할 때, 이 두 가지의 차이점에 대해 알아보는 것이 중요하다.</p>

<h3>ReactElement</h3>

<p>이건 리액트에서 표준 타입이다. <a href="https://facebook.github.io/react/docs/glossary.html#react-elements">리액트 설명</a>에는 이렇게 되어 있다.</p>

<p><code>ReactElement는 가볍고, 상태가 없고, 불변이며 돔 요소의 가상 표현식이다.</code></p>

<p><code>ReactElement</code>는 가상 돔 안에 포함되어 있다. 이 개념들이 노드를 생성한다. <code>ReactElement</code>의 불변성이 다루기 쉽고, 비교와 업데이트를 빠르게 만들어준다. 이러한 것들이 리액트의 퍼포먼스가 뛰어난 이유다.</p>

<p>어떤 것들이 <code>ReactElement</code>가 될 수 있을까? HTML 태그라면 어떤 것들이던 가능하다. - <code>div, table, strong</code>등등. <a href="https://facebook.github.io/react/docs/tags-and-attributes.html">이곳</a>에 전체 리스트가 있다.</p>

<p>앞에서 정의한 것처럼, <code>ReactElements</code>는 일반 돔으로 그려질 수 있다. 여기서부터는 리액트가 요소들을 관리하는 게 중단되는 부분이다. 이것들은 느린 돔 노드가 된다.</p>
<div class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="kd">var</span> <span class="nx">root</span> <span class="o">=</span> <span class="nx">React</span><span class="p">.</span><span class="nx">createElement</span><span class="p">(</span><span class="s1">&#39;div&#39;</span><span class="p">);</span>
<span class="nx">ReactDOM</span><span class="p">.</span><span class="nx">render</span><span class="p">(</span><span class="nx">root</span><span class="p">,</span> <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s1">&#39;example&#39;</span><span class="p">));</span>
<span class="c1">// If you are surprised by the fact that `render`</span>
<span class="c1">// comes from `ReactDOM` package, see the Post Scriptum.</span>
</code></pre></div>
<p>JSX는 HTML 태그를 ReactElements로 컴파일 한다. 아래와 같은 형식이다.</p>
<div class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="kd">var</span> <span class="nx">root</span> <span class="o">=</span> <span class="o">&lt;</span><span class="nx">div</span> <span class="o">/&gt;</span><span class="p">;</span>
<span class="nx">ReactDOM</span><span class="p">.</span><span class="nx">render</span><span class="p">(</span><span class="nx">root</span><span class="p">,</span> <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s1">&#39;example&#39;</span><span class="p">));</span>
</code></pre></div>
<p>다시 한 번 말하지만, ReactElements는 리액트 가상 돔의 기본적인 아이템들이다. 하지만, 거기에는 상태 값이 없으므로 개발자들이 봤을 때 크게 도움이 될 것 같이 생기지는 않았다. 차라리 우리는 변수와 상수를 이용한, 클래스처럼 생긴 HTML로 작업하는 편이 더 나을 것 같다. 그렇게 생각하지 않나? 그렇다면...</p>

<h3>ReactComponent</h3>

<p><code>ReactComponent</code>와 <code>ReactElement</code>의 차이점은 <code>ReactComponents</code>에는 상태 값이 있다는 것이다.
우리는 보통 어떤 것을 정의할 때 <code>React.createClass</code> 메소드를 사용한다.</p>
<div class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="kd">var</span> <span class="nx">CommentBox</span> <span class="o">=</span> <span class="nx">React</span><span class="p">.</span><span class="nx">createClass</span><span class="p">({</span>
  <span class="nx">render</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">return</span> <span class="p">(</span>
      <span class="o">&lt;</span><span class="nx">div</span> <span class="nx">className</span><span class="o">=</span><span class="s2">&quot;commentBox&quot;</span><span class="o">&gt;</span>
        <span class="nx">Hello</span><span class="p">,</span> <span class="nx">world</span><span class="o">!</span> <span class="nx">I</span> <span class="nx">am</span> <span class="nx">a</span> <span class="nx">CommentBox</span><span class="p">.</span>
      <span class="o">&lt;</span><span class="err">/div&gt;</span>
    <span class="p">);</span>
  <span class="p">}</span>
<span class="p">});</span>
</code></pre></div>
<p>HTML스러운 블럭은 상태 값을 가질 수 있는 render 메소드를 반환한다. 그리고 가장 좋은 건 (이미 알고 있겠지만, 리액트는 짱이다!) 상태 값이 바뀔 때마다 컴포넌트는 다시 그려진다.</p>
<div class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="kd">var</span> <span class="nx">Timer</span> <span class="o">=</span> <span class="nx">React</span><span class="p">.</span><span class="nx">createClass</span><span class="p">({</span>
  <span class="nx">getInitialState</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">return</span> <span class="p">{</span><span class="nx">secondsElapsed</span><span class="o">:</span> <span class="mi">0</span><span class="p">};</span>
  <span class="p">},</span>
  <span class="nx">tick</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">setState</span><span class="p">({</span><span class="nx">secondsElapsed</span><span class="o">:</span> <span class="k">this</span><span class="p">.</span><span class="nx">state</span><span class="p">.</span><span class="nx">secondsElapsed</span> <span class="o">+</span> <span class="mi">1</span><span class="p">});</span>
  <span class="p">},</span>
  <span class="nx">componentDidMount</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">interval</span> <span class="o">=</span> <span class="nx">setInterval</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">tick</span><span class="p">,</span> <span class="mi">1000</span><span class="p">);</span>
  <span class="p">},</span>
  <span class="nx">componentWillUnmount</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="nx">clearInterval</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">interval</span><span class="p">);</span>
  <span class="p">},</span>
  <span class="nx">render</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">return</span> <span class="p">(</span>
      <span class="o">&lt;</span><span class="nx">div</span><span class="o">&gt;</span><span class="nx">Seconds</span> <span class="nx">Elapsed</span><span class="o">:</span> <span class="p">{</span><span class="k">this</span><span class="p">.</span><span class="nx">state</span><span class="p">.</span><span class="nx">secondsElapsed</span><span class="p">}</span><span class="o">&lt;</span><span class="err">/div&gt;</span>
    <span class="p">);</span>
  <span class="p">}</span>
<span class="p">});</span>
</code></pre></div>
<p><code>ReactComponents</code>는 동적인 HTML을 디자인 할 수 있는 좋은 도구라고 알려졌다. <code>ReactComponents</code>이 가상 돔에 직접 접근할 수 있는 건 아니지만,  <code>ReactElements</code>으로 쉽게 컨버팅 된다.</p>
<div class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="kd">var</span> <span class="nx">element</span> <span class="o">=</span> <span class="nx">React</span><span class="p">.</span><span class="nx">createElement</span><span class="p">(</span><span class="nx">MyComponent</span><span class="p">);</span>
<span class="c1">// or equivalently, with JSX</span>
<span class="kd">var</span> <span class="nx">element</span> <span class="o">=</span> <span class="o">&lt;</span><span class="nx">MyComponent</span> <span class="o">/&gt;</span><span class="p">;</span>
</code></pre></div>
<h2>차이점</h2>

<p><code>ReactComponents</code>은 훌륭하다, 또한 다루기 쉬우므로 많이들 사용하고 있다.</p>

<p><code>ReactComponent</code>가 상태 값을 바꿀 때, 우리는 일반 돔이 가능하면 최대한 적게 변하길 원한다. 이게 바로 리액트가 하는 역할이다. <code>ReactComponent</code>는 <code>ReactElement</code>로 변환된다. 그러면 <code>ReactElement</code>은 빠르고 쉽게 비교, 업데이트 작업을 한 후 가상 돔에 삽입된다. 일반 돔을 다룰 때보다 훨씬 빠르고 정확하게 된다. (이건 리액트 안에 선언된 diff 알고리즘을 통해 계산된다.)</p>

<p>리액트가 수정 내역을 알게 되면, 이 부분은 low-level(HTML DOM)으로 바뀌고, 일반 돔 안으로 삽입된다. 그 코드는 브라우저에 의해 최적화 된다.</p>

<h2>요약</h2>

<p>가상 돔이 정말 메인 페이지를 강화할 수 있는 기능일까? 나는 그렇다고 생각한다. 예제를 통해서 리액트의 퍼포먼스는 굉장히 좋고, 가상 돔은 정말 큰 도움이 되었다.</p>

<p>추가. 지난주에 리액트 0.14 버전이 나왔는데 돔 처리와 관련된 부분은 <code>react-dom</code> 이름으로 <code>react</code> 패키지에서 따로 분리 되었다. 새롭게 바뀐 점은 <a href="https://facebook.github.io/react/blog/2015/10/07/react-v0.14.html#two-packages-react-and-react-dom">여기</a>에서 더 읽을 수 있다.</p>

        </div>

        <div class="media_content media_item shadow_panel">
            <p>Tags : <a href="/tags/javascript">javascript</a>&nbsp;<a href="/tags/react">react</a>&nbsp;<a href="/tags/virtualdom">virtualdom</a>&nbsp;</p>
        </div>


        <div class="media_content media_item shadow_panel">
            <div id="disqus_thread"></div>
<script type="text/javascript">
    /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
    var disqus_shortname = 'html5krforkisa'; // required: replace example with your forum shortname

    /* * * DON'T EDIT BELOW THIS LINE * * */
    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
    
        </div>

    </div>

    <script>
        $('#main_content').toc();
    </script>
</div>
<footer>
<table width="100%" height="80" class="footer">
    <tr>
        <td align="center" class="footer_content">
            WebFrameworks.kr @since 2015
        </td>
    </tr>
</table>
</footer>
<script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
            m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-56520981-1', 'auto');
    ga('send', 'pageview');

</script>
</body>
</html>