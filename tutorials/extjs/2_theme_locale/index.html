<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
<style>
@import url(https://fonts.googleapis.com/earlyaccess/nanumgothic.css); /* 나눔고딕 : 'Nanum Gothic' */
</style>
<title>WebFrameworks.kr - ExtJS 멀티 테마와 로케일 설정하기</title>
<link rel="stylesheet" href="/static/css/bootstrap.min.css">
<link rel="stylesheet" href="/static/css/main.css">
<link rel="stylesheet" href="/static/css/syntax.css">
<link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css">
<script src="/static/js/jquery.min.js"></script>
<script src="/static/js/bootstrap.min.js"></script>

    <link rel="stylesheet" href="/static/css/toc.css">
    <script type="text/javascript" src="/static/js/jquery.toc.js"></script>
</head>
<body>
<nav class="navbar navbar-default top_menu" role="navigation">
    <div class="container-fluid">
        <div class="navbar-header">
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#navbar-collapse-1">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="/">웹Frameworks</a>
        </div>

        <div class="collapse navbar-collapse" id="navbar-collapse-1">
            <ul class="nav navbar-nav navbar-left">
                <li><a href="/getstarted">Get Started</a></li>
            </ul>
            <ul class="nav navbar-nav navbar-left">
                <li><a href="/updates">Update</a></li>
            </ul>
            <ul class="nav navbar-nav navbar-left">
                <li><a href="/tutorials">Tutorials</a></li>
            </ul>
            <ul class="nav navbar-nav navbar-left">
                <li><a href="/quickstart">Quick Start</a></li>
            </ul>
            <ul class="nav navbar-nav navbar-left">
                <li><a href="/archives">Archives</a></li>
            </ul>
            <ul class="nav navbar-nav navbar-left">
                <li><a href="https://github.com/KoreaHTML5/webframeworks.kr/blob/master/CONTRIBUTE.md" target="_blank">참여하기</a></li>
            </ul>
            <ul class="nav navbar-nav navbar-left">
                <li><a href="http://goo.gl/forms/MB9ZxVvdrD" target="_blank">설문하기</a></li>
            </ul>
        </div>
    </div>
</nav>


<div class="content_bg"  style="background-color: #RGB(8, 78, 119);color: #;" >
<div class="col-md-10 col-md-offset-1 title_header jumbotron"  style="background:url() no-repeat center"  >
<h1 class="title_header_title">ExtJS 멀티 테마와 로케일 설정하기</h1>
<p class="title_header_summary">앱내부에서 여러 테마를 탑재하고 변경하는 방법과 다중언어 선택을 위한 로케일 설정에 대해 알아보자.</p>
</div>
</div>

<div>

    <div class="col-sm-3 col-md-2 col-md-offset-2">
        <div class="panel panel-default">
            <div class="panel-heading">
                <h3 class="panel-title">작성자</h3>
            </div>
            <div class="panel-body">
                <div class="media">
                    <a class="pull-left" href="#">
                        <img class="media-object profile_img" src="https://avatars0.githubusercontent.com/u/8764297?v=3&s=400" alt="곽옥석">
                    </a>
                    <div class="media-body">
                        <h4 class="media-heading">
                            곽옥석

                        </h4>
                        benneykwag<br>
                    </div>
                </div>
            </div>
        </div>

        <div id="toc_location"></div>

        <div class="panel panel-default">
    <div class="panel-heading">
        <h3 class="panel-title">Tags</h3>
    </div>
    <div class="panel-body">
        <a href='/tags/jquery/' style='color: rgba(0,0,0,0.059761)'>jquery</a>
<a href='/tags/javascript/' style='color: rgba(0,0,0,10.996016)'>javascript</a>
<a href='/tags/html/' style='color: rgba(0,0,0,0.059761)'>html</a>
<a href='/tags/grunt/' style='color: rgba(0,0,0,0.059761)'>grunt</a>
<a href='/tags/gulp/' style='color: rgba(0,0,0,0.059761)'>gulp</a>
<a href='/tags/build/' style='color: rgba(0,0,0,0.418327)'>build</a>
<a href='/tags/yeoman/' style='color: rgba(0,0,0,0.059761)'>yeoman</a>
<a href='/tags/foundation/' style='color: rgba(0,0,0,0.059761)'>foundation</a>
<a href='/tags/bower/' style='color: rgba(0,0,0,0.119522)'>bower</a>
<a href='/tags/twitter/' style='color: rgba(0,0,0,0.119522)'>twitter</a>
<a href='/tags/framework/' style='color: rgba(0,0,0,2.450199)'>framework</a>
<a href='/tags/angularjs/' style='color: rgba(0,0,0,1.015936)'>angularjs</a>
<a href='/tags/tutorials/' style='color: rgba(0,0,0,1.314741)'>tutorials</a>
<a href='/tags/backbone/' style='color: rgba(0,0,0,0.239044)'>backbone</a>
<a href='/tags/getstarted/' style='color: rgba(0,0,0,0.179283)'>getstarted</a>
<a href='/tags/underscore/' style='color: rgba(0,0,0,0.059761)'>underscore</a>
<a href='/tags/library/' style='color: rgba(0,0,0,0.418327)'>library</a>
<a href='/tags/Ext/' style='color: rgba(0,0,0,0.537849)'>Ext</a>
<a href='/tags/JS/' style='color: rgba(0,0,0,0.836653)'>JS</a>
<a href='/tags/tutorial/' style='color: rgba(0,0,0,0.776892)'>tutorial</a>
<a href='/tags/modernizr/' style='color: rgba(0,0,0,0.059761)'>modernizr</a>
<a href='/tags/bootstrap/' style='color: rgba(0,0,0,0.179283)'>bootstrap</a>
<a href='/tags/quickstart/' style='color: rgba(0,0,0,0.059761)'>quickstart</a>
<a href='/tags/angular-di/' style='color: rgba(0,0,0,0.059761)'>angular-di</a>
<a href='/tags/animation/' style='color: rgba(0,0,0,0.239044)'>animation</a>
<a href='/tags/router/' style='color: rgba(0,0,0,0.059761)'>router</a>
<a href='/tags/promise/' style='color: rgba(0,0,0,0.298805)'>promise</a>
<a href='/tags/responsive/' style='color: rgba(0,0,0,0.059761)'>responsive</a>
<a href='/tags/form/' style='color: rgba(0,0,0,0.119522)'>form</a>
<a href='/tags/validation/' style='color: rgba(0,0,0,0.119522)'>validation</a>
<a href='/tags/map/' style='color: rgba(0,0,0,0.059761)'>map</a>
<a href='/tags/direcitve/' style='color: rgba(0,0,0,0.059761)'>direcitve</a>
<a href='/tags/file/' style='color: rgba(0,0,0,0.119522)'>file</a>
<a href='/tags/test/' style='color: rgba(0,0,0,0.239044)'>test</a>
<a href='/tags/ui-bootstrap/' style='color: rgba(0,0,0,0.059761)'>ui-bootstrap</a>
<a href='/tags/twitter-bootstrap/' style='color: rgba(0,0,0,0.059761)'>twitter-bootstrap</a>
<a href='/tags/d3.js/' style='color: rgba(0,0,0,0.059761)'>d3.js</a>
<a href='/tags/visualization/' style='color: rgba(0,0,0,0.358566)'>visualization</a>
<a href='/tags/expressjs/' style='color: rgba(0,0,0,0.418327)'>expressjs</a>
<a href='/tags/react/' style='color: rgba(0,0,0,1.792829)'>react</a>
<a href='/tags/session/' style='color: rgba(0,0,0,0.179283)'>session</a>
<a href='/tags/meteor/' style='color: rgba(0,0,0,0.836653)'>meteor</a>
<a href='/tags/SEO/' style='color: rgba(0,0,0,0.059761)'>SEO</a>
<a href='/tags/REST/' style='color: rgba(0,0,0,0.059761)'>REST</a>
<a href='/tags/API/' style='color: rgba(0,0,0,0.059761)'>API</a>
<a href='/tags/es2015/' style='color: rgba(0,0,0,0.119522)'>es2015</a>
<a href='/tags/es6/' style='color: rgba(0,0,0,0.657371)'>es6</a>
<a href='/tags/es7/' style='color: rgba(0,0,0,0.119522)'>es7</a>
<a href='/tags/DDP/' style='color: rgba(0,0,0,0.059761)'>DDP</a>
<a href='/tags/ngMessages/' style='color: rgba(0,0,0,0.119522)'>ngMessages</a>
<a href='/tags/jsx/' style='color: rgba(0,0,0,0.059761)'>jsx</a>
<a href='/tags/publish/' style='color: rgba(0,0,0,0.059761)'>publish</a>
<a href='/tags/subscribe/' style='color: rgba(0,0,0,0.059761)'>subscribe</a>
<a href='/tags/meteor.js/' style='color: rgba(0,0,0,0.059761)'>meteor.js</a>
<a href='/tags/node.js/' style='color: rgba(0,0,0,0.239044)'>node.js</a>
<a href='/tags/backend/' style='color: rgba(0,0,0,0.179283)'>backend</a>
<a href='/tags/reactive/' style='color: rgba(0,0,0,0.059761)'>reactive</a>
<a href='/tags/package/' style='color: rgba(0,0,0,0.059761)'>package</a>
<a href='/tags/static/' style='color: rgba(0,0,0,0.059761)'>static</a>
<a href='/tags/assets/' style='color: rgba(0,0,0,0.059761)'>assets</a>
<a href='/tags/public/' style='color: rgba(0,0,0,0.059761)'>public</a>
<a href='/tags/flux/' style='color: rgba(0,0,0,0.239044)'>flux</a>
<a href='/tags/redux/' style='color: rgba(0,0,0,0.418327)'>redux</a>
<a href='/tags/server/' style='color: rgba(0,0,0,0.059761)'>server</a>
<a href='/tags/distribution/' style='color: rgba(0,0,0,0.059761)'>distribution</a>
<a href='/tags/webpack/' style='color: rgba(0,0,0,0.239044)'>webpack</a>
<a href='/tags/development/' style='color: rgba(0,0,0,0.059761)'>development</a>
<a href='/tags/optimization/' style='color: rgba(0,0,0,0.059761)'>optimization</a>
<a href='/tags/immutable/' style='color: rgba(0,0,0,0.059761)'>immutable</a>
<a href='/tags/orm/' style='color: rgba(0,0,0,0.239044)'>orm</a>
<a href='/tags/database/' style='color: rgba(0,0,0,0.239044)'>database</a>
<a href='/tags/hapi.js/' style='color: rgba(0,0,0,0.059761)'>hapi.js</a>
<a href='/tags/hapi/' style='color: rgba(0,0,0,0.239044)'>hapi</a>
<a href='/tags/ionic/' style='color: rgba(0,0,0,0.119522)'>ionic</a>
<a href='/tags/hybrid-app/' style='color: rgba(0,0,0,0.059761)'>hybrid-app</a>
<a href='/tags/django/' style='color: rgba(0,0,0,0.059761)'>django</a>
<a href='/tags/fullstack/' style='color: rgba(0,0,0,0.059761)'>fullstack</a>
<a href='/tags/spa/' style='color: rgba(0,0,0,0.059761)'>spa</a>
<a href='/tags/ExpressJS/' style='color: rgba(0,0,0,0.298805)'>ExpressJS</a>
<a href='/tags/NodeJS/' style='color: rgba(0,0,0,0.298805)'>NodeJS</a>
<a href='/tags/Sequelize/' style='color: rgba(0,0,0,0.298805)'>Sequelize</a>
<a href='/tags/Mocha/' style='color: rgba(0,0,0,0.298805)'>Mocha</a>
<a href='/tags/Supertest/' style='color: rgba(0,0,0,0.298805)'>Supertest</a>
<a href='/tags/UnitTest/' style='color: rgba(0,0,0,0.298805)'>UnitTest</a>
<a href='/tags/reactjs/' style='color: rgba(0,0,0,0.179283)'>reactjs</a>
<a href='/tags/this/' style='color: rgba(0,0,0,0.119522)'>this</a>
<a href='/tags/dom/' style='color: rgba(0,0,0,0.059761)'>dom</a>
<a href='/tags/es5/' style='color: rgba(0,0,0,0.119522)'>es5</a>
<a href='/tags/virtualdom/' style='color: rgba(0,0,0,0.119522)'>virtualdom</a>
<a href='/tags/modules/' style='color: rgba(0,0,0,0.059761)'>modules</a>
<a href='/tags/asynchronous/' style='color: rgba(0,0,0,0.059761)'>asynchronous</a>
<a href='/tags/semicolon/' style='color: rgba(0,0,0,0.059761)'>semicolon</a>
<a href='/tags/nodejs/' style='color: rgba(0,0,0,0.119522)'>nodejs</a>
<a href='/tags/ECMAScript2015/' style='color: rgba(0,0,0,0.119522)'>ECMAScript2015</a>
<a href='/tags/babel/' style='color: rgba(0,0,0,0.059761)'>babel</a>
<a href='/tags/angular,/' style='color: rgba(0,0,0,0.059761)'>angular,</a>
<a href='/tags/electron/' style='color: rgba(0,0,0,0.119522)'>electron</a>
<a href='/tags/docker/' style='color: rgba(0,0,0,0.478088)'>docker</a>
<a href='/tags/D3/' style='color: rgba(0,0,0,0.059761)'>D3</a>
<a href='/tags/node/' style='color: rgba(0,0,0,0.119522)'>node</a>
<a href='/tags/express/' style='color: rgba(0,0,0,0.119522)'>express</a>
<a href='/tags/aws/' style='color: rgba(0,0,0,1.613546)'>aws</a>
<a href='/tags/dynamoDB/' style='color: rgba(0,0,0,0.059761)'>dynamoDB</a>
<a href='/tags/chrome/' style='color: rgba(0,0,0,0.059761)'>chrome</a>
<a href='/tags/native/' style='color: rgba(0,0,0,0.119522)'>native</a>
<a href='/tags/markdown/' style='color: rgba(0,0,0,0.059761)'>markdown</a>
<a href='/tags/vue/' style='color: rgba(0,0,0,2.211155)'>vue</a>
<a href='/tags/middleware/' style='color: rgba(0,0,0,0.119522)'>middleware</a>
<a href='/tags/IoT/' style='color: rgba(0,0,0,0.059761)'>IoT</a>
<a href='/tags/serverless/' style='color: rgba(0,0,0,0.537849)'>serverless</a>
<a href='/tags/python/' style='color: rgba(0,0,0,0.179283)'>python</a>
<a href='/tags/socket.io/' style='color: rgba(0,0,0,0.179283)'>socket.io</a>
<a href='/tags/typescript/' style='color: rgba(0,0,0,0.059761)'>typescript</a>
<a href='/tags/laravel/' style='color: rgba(0,0,0,1.553785)'>laravel</a>
<a href='/tags/express.js/' style='color: rgba(0,0,0,0.059761)'>express.js</a>
<a href='/tags/next/' style='color: rgba(0,0,0,0.059761)'>next</a>
<a href='/tags/nuxt/' style='color: rgba(0,0,0,0.059761)'>nuxt</a>
<a href='/tags/java/' style='color: rgba(0,0,0,0.059761)'>java</a>
<a href='/tags/spring/' style='color: rgba(0,0,0,0.059761)'>spring</a>
<a href='/tags/github/' style='color: rgba(0,0,0,0.119522)'>github</a>
<a href='/tags/slack/' style='color: rgba(0,0,0,0.119522)'>slack</a>
<a href='/tags/react-native/' style='color: rgba(0,0,0,0.059761)'>react-native</a>
<a href='/tags/data/' style='color: rgba(0,0,0,0.298805)'>data</a>
<a href='/tags/opensource/' style='color: rgba(0,0,0,0.059761)'>opensource</a>
<a href='/tags/pwa/' style='color: rgba(0,0,0,0.059761)'>pwa</a>
<a href='/tags/php/' style='color: rgba(0,0,0,0.059761)'>php</a>
<a href='/tags/vuejs/' style='color: rgba(0,0,0,0.597610)'>vuejs</a>
<a href='/tags/nextjs/' style='color: rgba(0,0,0,0.478088)'>nextjs</a>
<a href='/tags/react_admin/' style='color: rgba(0,0,0,0.179283)'>react_admin</a>
<a href='/tags/webrtc/' style='color: rgba(0,0,0,0.239044)'>webrtc</a>
<a href='/tags/cd/' style='color: rgba(0,0,0,0.059761)'>cd</a>
<a href='/tags/pm2/' style='color: rgba(0,0,0,0.059761)'>pm2</a>
<a href='/tags/docker_registry/' style='color: rgba(0,0,0,0.059761)'>docker_registry</a>
<a href='/tags/ecr/' style='color: rgba(0,0,0,0.059761)'>ecr</a>
<a href='/tags/twilio/' style='color: rgba(0,0,0,0.059761)'>twilio</a>
<a href='/tags/json_schema/' style='color: rgba(0,0,0,0.059761)'>json_schema</a>
<a href='/tags/sql/' style='color: rgba(0,0,0,0.059761)'>sql</a>
<a href='/tags/json/' style='color: rgba(0,0,0,0.059761)'>json</a>
<a href='/tags/web/' style='color: rgba(0,0,0,0.059761)'>web</a>
<a href='/tags/sdk/' style='color: rgba(0,0,0,0.059761)'>sdk</a>
<a href='/tags/ssl/' style='color: rgba(0,0,0,0.059761)'>ssl</a>
<a href='/tags/portainer/' style='color: rgba(0,0,0,0.059761)'>portainer</a>
<a href='/tags/jwt/' style='color: rgba(0,0,0,0.059761)'>jwt</a>
<a href='/tags/mailu/' style='color: rgba(0,0,0,0.059761)'>mailu</a>
<a href='/tags/sam/' style='color: rgba(0,0,0,0.059761)'>sam</a>
<a href='/tags/lambda/' style='color: rgba(0,0,0,0.059761)'>lambda</a>
<a href='/tags/thumbnail/' style='color: rgba(0,0,0,0.059761)'>thumbnail</a>
<a href='/tags/redis/' style='color: rgba(0,0,0,0.059761)'>redis</a>
<a href='/tags/hyperledger/' style='color: rgba(0,0,0,0.418327)'>hyperledger</a>
<a href='/tags/fabric/' style='color: rgba(0,0,0,0.418327)'>fabric</a>

    </div>
</div>
    </div>

    <div class="col-sm-9 col-md-6">
        <div class="media_content media_item shadow_panel" id="main_content">
            <h1>ExtJS 4 멀티테마와 로케일 설정</h1>

<p>이번 강의는 애플리케이션에 내에서 테마를 변경하는 방법과 다국어를 설정하는 방법에 대해 알아볼 것이다. ExtJS5는 총4개의 테마와 모바일용 touch용 까지 세분화해 총6개의 테마를 지원한다. 일반적으로 한개의 테마만 사용하여 시스템을 구축할 것이다. 그러나 때에 따라 테마를 변경하거나 모바일에서 접근할 경우를 대비 neptune-touch, crisp-touch테마로 전환할 필요가 있다.
또한 한국어를 포함한 영어, 일어 등 애플리케이션 내부에서 언어를 선택할 수 있도록  다국어 지원 방법을 알아보도록 하자.</p>

<p><img src="imgs/img01.png" alt=""><br>
<strong>그림 1 다중테마와 다국어를 지원하는 앱</strong></p>

<p>이 강좌는 KitchenSink앱을 분석하고 분석 내용을 공유한다. 더 자세한 내용을 알고 싶다면 KitchenSink앱을 자세히 분석해 보길 바란다.</p>

<p>이번 강좌는 아래 환경에 맞춰 진행한다.</p>

<ul>
<li>Sencha CMD : 5.0.1.231</li>
<li>ExtJS : 5.0.1</li>
</ul>

<h2>테스트용 App생성</h2>

<p>테스트용 앱을 생성할 것이다. 이를 위해 Sencha CMD가 필요하다. 버전5에 이르러 Sencha CMD는 시작과 끝을 이어주는 필수적인 도구로 사용된다.</p>

<p>필자는 앱이 생성될 루트에 workspace를 생성하고 진행하였다. 이렇게 하면 모든 앱마다 존재하는 ext폴더는 workspace루트에 하나만 존재하고 이하 모든 앱이 이를 공유하는 형태로 개발되게 된다. 빌드의 결과물 또한 workspace/build 폴더에 저장된다.
 sencha app watch 를 사용할 경우 이 workspace가 웹루트로 작동 할 것이다.</p>
<div class="highlight"><pre><code class="language-text" data-lang="text">workspace를 생성하자.
sencha generate workspace ./workspace

생성된 workspace폴더로 이동하고 App을 생성하자.
sencha generate app -ext KitchenSink ./kitchensink
</code></pre></div>
<p><img src="imgs/img02.png" alt=""><br>
<strong>그림 2 워크스페이스 생성후 kitchenSink앱을 생성한다.</strong></p>

<h2>Manifest 지정하기</h2>

<p>아래 코드는 앱루트의 index.html 파일이다. 굵은 &lt;script.. var Ext = Ext||로 시작하는 부분이 새로 추가한 부분이다.
Ext.beforeLoad 함수를 구현하고 있다. 이 함수는  bootstrap.js파일 내부에서 호출되며 Microloader클래스 내부에서 앱실행에 필요한 로드과정 전에 Ext.beforeLoad함수가 존재하면 실행되도록 했다.</p>

<div class="highlight"><pre><code class="language-html" data-lang="html"><span class="cp">&lt;!DOCTYPE HTML&gt;</span>
<span class="nt">&lt;html</span> <span class="na">manifest=</span><span class="s">&quot;&quot;</span><span class="nt">&gt;</span>
<span class="nt">&lt;head&gt;</span>
    <span class="nt">&lt;meta</span> <span class="na">http-equiv=</span><span class="s">&quot;X-UA-Compatible&quot;</span> <span class="na">content=</span><span class="s">&quot;IE=edge&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;meta</span> <span class="na">charset=</span><span class="s">&quot;UTF-8&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;title&gt;</span>KitchenSink<span class="nt">&lt;/title&gt;</span>
    <span class="c">&lt;!-- The line below must be kept intact for Sencha Cmd to build your application --&gt;</span>
    <span class="nt">&lt;script </span><span class="na">type=</span><span class="s">&quot;text/javascript&quot;</span><span class="nt">&gt;</span>
        <span class="kd">var</span> <span class="nx">Ext</span> <span class="o">=</span> <span class="nx">Ext</span> <span class="o">||</span> <span class="p">{};</span>
        <span class="nx">Ext</span><span class="p">.</span><span class="nx">repoDevMode</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
        <span class="nx">Ext</span><span class="p">.</span><span class="nx">beforeLoad</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">tags</span><span class="p">){</span>
            <span class="kd">var</span> <span class="nx">theme</span> <span class="o">=</span> <span class="nx">location</span><span class="p">.</span><span class="nx">href</span><span class="p">.</span><span class="nx">match</span><span class="p">(</span><span class="sr">/theme=([\w-]+)/</span><span class="p">),</span>
                    <span class="nx">locale</span> <span class="o">=</span> <span class="nx">location</span><span class="p">.</span><span class="nx">href</span><span class="p">.</span><span class="nx">match</span><span class="p">(</span><span class="sr">/locale=([\w-]+)/</span><span class="p">);</span>
            <span class="nx">theme</span>  <span class="o">=</span> <span class="p">(</span><span class="nx">theme</span> <span class="o">&amp;&amp;</span> <span class="nx">theme</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span> <span class="o">||</span> <span class="p">(</span><span class="nx">tags</span><span class="p">.</span><span class="nx">desktop</span> <span class="o">?</span> <span class="s1">&#39;crisp&#39;</span> <span class="o">:</span> <span class="s1">&#39;crisp-touch&#39;</span><span class="p">);</span>
            <span class="nx">locale</span> <span class="o">=</span> <span class="p">(</span><span class="nx">locale</span> <span class="o">&amp;&amp;</span> <span class="nx">locale</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span> <span class="o">||</span> <span class="s1">&#39;en&#39;</span><span class="p">;</span>
            <span class="nx">Ext</span><span class="p">.</span><span class="nx">manifest</span> <span class="o">=</span> <span class="nx">theme</span> <span class="o">+</span> <span class="s2">&quot;-&quot;</span> <span class="o">+</span> <span class="nx">locale</span><span class="p">;</span>
            <span class="nx">Ext</span><span class="p">.</span><span class="nx">microloaderTags</span> <span class="o">=</span> <span class="nx">tags</span><span class="p">;</span>
        <span class="p">};</span>
    <span class="nt">&lt;/script&gt;</span>
    <span class="nt">&lt;script </span><span class="na">id=</span><span class="s">&quot;microloader&quot;</span> <span class="na">type=</span><span class="s">&quot;text/javascript&quot;</span> <span class="na">src=</span><span class="s">&quot;bootstrap.js&quot;</span><span class="nt">&gt;&lt;/script&gt;</span>
<span class="nt">&lt;/head&gt;</span>
<span class="nt">&lt;body&gt;&lt;/body&gt;</span>
<span class="nt">&lt;/html&gt;</span></code></pre></div>

<p>Ext.beforeLoad함수 내부에서 우리는 theme와 locale을 정하고 이를 Ext.manifest에 설정하고 있다. 앱에 대한 세부사항을 설정하는 app.json 파일은 Sencha CMD에 의해 런타임시 Ext.manifest에 전달하게 된다. 앱은 런타임시 이 manifest의 내용을 분석하여 앱실행에 관련된 모든 컨텐츠를 로딩하게 되는 것이다.</p>

<h2>app.json파일 수정</h2>

<p>이 파일은 앱에 대한 세부사항을 지정하는 파일이다. 이 파일은 Sencha CMD에 의해 생성되고 소비된다. 이 파일의 내용에 의해 Sencha CMD는 런타임에 사용할 Microloader내부의 Manifest에 전달한다.</p>

<h2>override설정</h2>

<p>app.json파일 내부의 override설정은 기본값이 ${app.dir}/override이다. override는 app폴더내부 클래스를 재정의하여 클래스를 변경하고 적용할 수 있다. 다국어를 지원하기 위한 locale설정 또한 기존 클래스 변수의 내용을 재정의하는 것으로 가능한 것이다.</p>

<p>override설정을 아래와 같이 변경하자.</p>
<div class="highlight"><pre><code class="language-text" data-lang="text">  &quot;overrides&quot;: &quot;${app.dir}/overrides,${app.dir}/locale/${app.locale}&quot;,
</code></pre></div>
<p>아래 그림은 실제 적용 시 폴더구조의 모습이다.</p>

<p><img src="imgs/img03.png" alt=""><br>
<strong>그림 3 override설정을 완료한 후 폴더구조</strong></p>

<h2>requires설정</h2>

<p>app.json내부 requires설정은 추가 패키지를 설정하고 다운로드 한다. 차트나 로케일 설정은 기본 패키지에 제외되어 있으므로 설정에 포함해야 한다.</p>
<div class="highlight"><pre><code class="language-text" data-lang="text">&quot;requires&quot;: [
    &quot;ext-locale&quot;
],
</code></pre></div>
<h2>css설정</h2>

<p>기본 값은 &quot;path&quot;:&quot;bootstrap.css&quot;일 것이다. 이 파일은 개발모드에서 테마파일의 위치를 알려주는 파일이다.</p>

<p>앱 생성 후 최초의 모습은 아래와 같다.</p>
<div class="highlight"><pre><code class="language-text" data-lang="text">@import &#39;../ext/packages/ext-theme-neptune/build/resources/ext-theme-neptune-all.css&#39;;
</code></pre></div>
<p>패스를 잘 확인해 보자. workspace 아래 ext(sdk)폴더를 가리키고 있다. 이 파일은 sencha app watch명령이나 sencha app build명령에 의해 아래처럼 바뀔 수 있다.</p>

<p>sencha app watch</p>
<div class="highlight"><pre><code class="language-text" data-lang="text">@import &#39;../build/development/KitchenSink/resources/KitchenSink-all.css&#39;;
</code></pre></div>
<p>watch 모드가 작동하면 bootstrap.css파일 내부는 위와 같이 변경된다. watch명령은 개발을 위한 pre build와 jetty서버를 지원한다. build 폴더의 위치는 workspace\build이고 개발 모드를 위한 development폴더 아래 해당 앱이름으로 폴더가 생성되게 된다.</p>

<p>sencha app build 명령 이후 bootstrap.css 파일은 아래처럼 변경된다.</p>
<div class="highlight"><pre><code class="language-text" data-lang="text">@import &#39;../build/production/KitchenSink/resources/KitchenSink-all.css&#39;;
</code></pre></div>
<p>workspace/build폴더 아래 배포를 위한 production 폴더가 생성되고 해당 앱이름으로 압축과 최적화를 마친 파일들이 위치하게 된다.</p>

<p>다국어 지원을 위해 우리는 app.json내부 css설정을 변경해야 할 것이다. 일반적인 경우 이 설정을 변경할 필요가 없을 것이다. 그러나 다국어를 가능하게 할 경우 해당 언어별로 빌드가 여러 번 이루어져 실행되는 환경이기 때문이다.</p>
<div class="highlight"><pre><code class="language-text" data-lang="text">&quot;css&quot;: [
    {
        &quot;path&quot;: &quot;${build.out.css.dir}/KitchenSink-all.css&quot;,
        &quot;bootstrap&quot;: true
    }
],
</code></pre></div>
<p>테마파일의 위치를 동적으로 변경하기 위해 변수처리했다. build.out.css.dir변수는 해당 앱이 빌드 된 후 테마파일이 위치할 resources폴더를 의미한다.</p>

<h2>bootstrap설정</h2>

<p>bootstrap설정은 삭제하자. 이 설정은 bootstrap.json, boostrap.css파일 등을 생성하게 되는데 우리는 이 설정을 대체하는 설정을 추가할 것이다.</p>
<div class="highlight"><pre><code class="language-text" data-lang="text">// 아래 주석처리할 것.
/*&quot;bootstrap&quot;: {
    &quot;base&quot;: &quot;${app.dir}&quot;,
    &quot;manifest&quot;: &quot;bootstrap.json&quot;,
    &quot;microloader&quot;: &quot;bootstrap.js&quot;,
    &quot;css&quot;: &quot;bootstrap.css&quot;
},*/

&quot;manifest&quot;: {
    &quot;name&quot;: &quot;${build.id}.json&quot;,
    &quot;bootstrap&quot;: &quot;${build.id}.json&quot;
},
</code></pre></div>
<p>manifest설정은 각 테마와 로케일 별로 조합하여 생성하게 된다. 아직 구체적인 모습이 연상되지 않을 것이므로 $build.id변수에 의해 json파일이 여러 개 생성된다는 것만 알아 두자.</p>

<h2>output설정</h2>

<p>이 설정은 Sencha CMD의 3가지 output에 대한 위치를 지정한다. output은 production, development, testing으로 각각 배포, 개발, 테스팅의 용도로 파일이 생성된다. 기본 설정은 아래와 같다.</p>
<div class="highlight"><pre><code class="language-text" data-lang="text">&quot;output&quot;: {
    &quot;base&quot;: &quot;${workspace.build.dir}/${build.environment}/${app.name}&quot;
},
</code></pre></div>
<p>${workspace.build.dir}은 workspace/build이거나 workspace를 생성하지 않았다면 해당 앱 이하 build폴더를 의미한다.
${build.enviroment}는 위에서 설명한 3가지 빌드 모드를 의미하며 실행명령에 따라 다음과 같이 달라질 것이다.</p>
<div class="highlight"><pre><code class="language-text" data-lang="text">sencha app watch     : workspace/build/development
sencha app build        : workspace/build/production
sencha app build -c testing : workspace/build/testing
</code></pre></div>
<p>우리 의도에 맞도록 변경해야 한다. 핵심은 ${build.id}이다.</p>
<div class="highlight"><pre><code class="language-text" data-lang="text">&quot;output&quot;: {
    &quot;base&quot;: &quot;${workspace.build.dir}/${build.environment}/${app.name}/${build.id}&quot;,
    &quot;page&quot;: &quot;../index.html&quot;,
    &quot;manifest&quot;: &quot;../${build.id}.json&quot;,
    &quot;deltas&quot;: {
        &quot;enable&quot;: false
    },
    &quot;cache&quot;: {
        &quot;enable&quot;: false
    }
},
</code></pre></div>
<h2>locale설정</h2>

<p>필요한 언어를 설정하자. 우리는 한국어와 영어를 지원하도록 설정하자.
<code>
&quot;locales&quot;: [
    &quot;en&quot;,
    &quot;ko&quot;
],
</code></p>

<h2>builds 설정</h2>

<p>앱 여러 종류의 테마를 적용할 수 있다. 이 설정 내부의 테마는 locales설정과 함께 곱하기 하여 빌드된다. 꼭 필요하지 않다면 아래 처럼 모두를 포함시키지는 말자.
빌드 시간이 엄청나게 늘어날 수 있다.</p>
<div class="highlight"><pre><code class="language-text" data-lang="text"> &quot;builds&quot;: {
    &quot;classic&quot;: {
        &quot;theme&quot;: &quot;ext-theme-classic&quot;
    },
    &quot;gray&quot;: {
        &quot;theme&quot;: &quot;ext-theme-gray&quot;
    }
    &quot;crisp&quot;: {
        &quot;theme&quot;: &quot;ext-theme-crisp&quot;
    },
    &quot;crisp-touch&quot;: {
        &quot;theme&quot;: &quot;ext-theme-crisp-touch&quot;
    },
    &quot;neptune&quot;: {
        &quot;theme&quot;: &quot;ext-theme-neptune&quot;
    },
    &quot;neptune-touch&quot;: {
        &quot;theme&quot;: &quot;ext-theme-neptune-touch&quot;
    }
},
</code></pre></div>
<p>build.id는 위의 테마와 로케일을 모두 생성해 낸다. 아래 예를 참고하자.</p>
<div class="highlight"><pre><code class="language-text" data-lang="text"> 1. classic-en
 2. classic-ko
 3. gray-en
 4. gray-ko
 5. crisp-en
 6. crisp-ko
 7. crisp-touch-en
 8. crisp-touch-ko
 9. neptune-en
 10.  neptune-ko
 11. neptune-touch-en
 12.  neptune-touch-ko
</code></pre></div>
<p>테마와 언어별로 각각 빌드를 생성한다면 2개의 언어 * 6개의 테마를 곱하여 총 12개의 빌드가 각기 생성될 것이다.</p>

<h2>소스코드</h2>

<p>설정을 마쳤으니 테마변경과 로케일 설정을 확인하기 위한 소스코드를 생성하자.
이 클래스는 Main.js내부에 추가되고 테마와 언어를 변경할 수 있게 한다.</p>

<div class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="nx">Ext</span><span class="p">.</span><span class="nx">define</span><span class="p">(</span><span class="s1">&#39;KitchenSink.view.Header&#39;</span><span class="p">,</span> <span class="p">{</span>
    <span class="nx">extend</span><span class="o">:</span> <span class="s1">&#39;Ext.Container&#39;</span><span class="p">,</span>
    <span class="nx">xtype</span><span class="o">:</span> <span class="s1">&#39;appHeader&#39;</span><span class="p">,</span>
    <span class="nx">id</span><span class="o">:</span> <span class="s1">&#39;app-header&#39;</span><span class="p">,</span>
    <span class="nx">title</span><span class="o">:</span> <span class="s1">&#39;Ext JS Kitchen Sink&#39;</span><span class="p">,</span>
    <span class="nx">height</span><span class="o">:</span> <span class="mi">52</span><span class="p">,</span>
    <span class="nx">layout</span><span class="o">:</span> <span class="p">{</span>
        <span class="nx">type</span><span class="o">:</span> <span class="s1">&#39;hbox&#39;</span><span class="p">,</span>
        <span class="nx">align</span><span class="o">:</span> <span class="s1">&#39;middle&#39;</span>
    <span class="p">},</span>

    <span class="nx">initComponent</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
        <span class="nb">document</span><span class="p">.</span><span class="nx">title</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">title</span><span class="p">;</span>

        <span class="k">this</span><span class="p">.</span><span class="nx">items</span> <span class="o">=</span> <span class="p">[{</span>
            <span class="nx">xtype</span><span class="o">:</span> <span class="s1">&#39;component&#39;</span><span class="p">,</span>
            <span class="nx">id</span><span class="o">:</span> <span class="s1">&#39;app-header-logo&#39;</span>
        <span class="p">},{</span>
            <span class="nx">xtype</span><span class="o">:</span> <span class="s1">&#39;component&#39;</span><span class="p">,</span>
            <span class="nx">id</span><span class="o">:</span> <span class="s1">&#39;app-header-title&#39;</span><span class="p">,</span>
            <span class="nx">html</span><span class="o">:</span> <span class="k">this</span><span class="p">.</span><span class="nx">title</span><span class="p">,</span>
            <span class="nx">flex</span><span class="o">:</span> <span class="mi">1</span>
        <span class="p">}];</span>

        <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">Ext</span><span class="p">.</span><span class="nx">getCmp</span><span class="p">(</span><span class="s1">&#39;options-toolbar&#39;</span><span class="p">))</span> <span class="p">{</span>
            <span class="k">this</span><span class="p">.</span><span class="nx">items</span><span class="p">.</span><span class="nx">push</span><span class="p">({</span>
                <span class="nx">xtype</span><span class="o">:</span> <span class="s1">&#39;themeSwitcher&#39;</span>
            <span class="p">});</span>
        <span class="p">}</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">callParent</span><span class="p">();</span>
    <span class="p">}</span>
<span class="p">});</span></code></pre></div>

<p>Header클래스 내부에서 테마와 로케일을 설정하는 ThemeSwitcher클래스를 생성하자.</p>

<div class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="nx">Ext</span><span class="p">.</span><span class="nx">define</span><span class="p">(</span><span class="s1">&#39;KitchenSink.view.ThemeSwitcher&#39;</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">theme</span> <span class="o">=</span> <span class="nx">location</span><span class="p">.</span><span class="nx">href</span><span class="p">.</span><span class="nx">match</span><span class="p">(</span><span class="sr">/theme=([\w-]+)/</span><span class="p">),</span>
        <span class="nx">locale</span> <span class="o">=</span> <span class="nx">location</span><span class="p">.</span><span class="nx">href</span><span class="p">.</span><span class="nx">match</span><span class="p">(</span><span class="sr">/locale=([\w-]+)/</span><span class="p">);</span>


    <span class="nx">theme</span> <span class="o">=</span> <span class="p">(</span><span class="nx">theme</span> <span class="o">&amp;&amp;</span> <span class="nx">theme</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span> <span class="o">||</span> <span class="p">(</span><span class="nx">Ext</span><span class="p">.</span><span class="nx">microloaderTags</span><span class="p">.</span><span class="nx">desktop</span> <span class="o">?</span> <span class="s1">&#39;crisp&#39;</span> <span class="o">:</span> <span class="s1">&#39;crisp-touch&#39;</span><span class="p">);</span>
    <span class="nx">locale</span> <span class="o">=</span> <span class="nx">locale</span> <span class="o">&amp;&amp;</span> <span class="nx">locale</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">||</span> <span class="s1">&#39;en&#39;</span><span class="p">;</span>


    <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">Ext</span><span class="p">.</span><span class="nx">themeName</span> <span class="o">&amp;&amp;</span> <span class="o">!!</span><span class="nx">theme</span><span class="p">)</span> <span class="p">{</span>
        <span class="kd">var</span> <span class="nx">m</span> <span class="o">=</span> <span class="nx">theme</span><span class="p">.</span><span class="nx">match</span><span class="p">(</span><span class="sr">/^([\w-]+)-(?:he)$/</span><span class="p">);</span>
        <span class="nx">Ext</span><span class="p">.</span><span class="nx">themeName</span> <span class="o">=</span> <span class="nx">m</span> <span class="o">?</span> <span class="nx">m</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">:</span> <span class="nx">theme</span><span class="p">;</span>
    <span class="p">}</span>


    <span class="k">return</span> <span class="p">{</span>
        <span class="nx">extend</span><span class="o">:</span> <span class="s1">&#39;Ext.Container&#39;</span><span class="p">,</span>
        <span class="nx">xtype</span><span class="o">:</span> <span class="s1">&#39;themeSwitcher&#39;</span><span class="p">,</span>
        <span class="nx">id</span><span class="o">:</span> <span class="s1">&#39;theme-switcher-btn&#39;</span><span class="p">,</span>
        <span class="nx">margin</span><span class="o">:</span> <span class="s1">&#39;0 10 0 0&#39;</span><span class="p">,</span>
        <span class="nx">layout</span><span class="o">:</span> <span class="s1">&#39;hbox&#39;</span><span class="p">,</span>


        <span class="nx">initComponent</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
            <span class="kd">function</span> <span class="nx">setQueryParam</span><span class="p">(</span><span class="nx">name</span><span class="p">,</span> <span class="nx">value</span><span class="p">)</span> <span class="p">{</span>
                <span class="kd">var</span> <span class="nx">query</span> <span class="o">=</span> <span class="nx">Ext</span><span class="p">.</span><span class="nb">Object</span><span class="p">.</span><span class="nx">fromQueryString</span><span class="p">(</span><span class="nx">location</span><span class="p">.</span><span class="nx">search</span><span class="p">);</span>
                <span class="nx">query</span><span class="p">[</span><span class="nx">name</span><span class="p">]</span> <span class="o">=</span> <span class="nx">value</span><span class="p">;</span>
                <span class="nx">location</span><span class="p">.</span><span class="nx">search</span> <span class="o">=</span> <span class="nx">Ext</span><span class="p">.</span><span class="nb">Object</span><span class="p">.</span><span class="nx">toQueryString</span><span class="p">(</span><span class="nx">query</span><span class="p">);</span>
            <span class="p">}</span>


            <span class="kd">function</span> <span class="nx">makeItem</span><span class="p">(</span><span class="nx">value</span><span class="p">,</span> <span class="nx">text</span><span class="p">,</span> <span class="nx">paramName</span><span class="p">)</span> <span class="p">{</span>
                <span class="nx">paramName</span> <span class="o">=</span> <span class="nx">paramName</span> <span class="o">||</span> <span class="s2">&quot;theme&quot;</span><span class="p">;</span>


                <span class="kd">var</span> <span class="nx">checked</span> <span class="o">=</span> <span class="nx">value</span> <span class="o">===</span> <span class="p">(</span><span class="nx">paramName</span> <span class="o">==</span> <span class="s2">&quot;theme&quot;</span> <span class="o">?</span> <span class="nx">theme</span> <span class="o">:</span> <span class="nx">locale</span><span class="p">);</span>


                <span class="k">return</span> <span class="p">{</span>
                    <span class="nx">text</span><span class="o">:</span> <span class="nx">text</span><span class="p">,</span>
                    <span class="nx">group</span><span class="o">:</span> <span class="p">(</span><span class="nx">paramName</span> <span class="o">==</span> <span class="s1">&#39;theme&#39;</span> <span class="o">?</span> <span class="s1">&#39;themegroup&#39;</span> <span class="o">:</span> <span class="s1">&#39;localegroup&#39;</span><span class="p">),</span>
                    <span class="nx">checked</span><span class="o">:</span> <span class="nx">checked</span><span class="p">,</span>
                    <span class="nx">handler</span><span class="o">:</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
                        <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">checked</span><span class="p">)</span> <span class="p">{</span>
                            <span class="k">if</span><span class="p">(</span><span class="nx">paramName</span> <span class="o">==</span> <span class="s1">&#39;theme&#39;</span><span class="p">)</span> <span class="p">{</span>
                                <span class="nx">setQueryParam</span><span class="p">(</span><span class="s1">&#39;theme&#39;</span><span class="p">,</span> <span class="nx">value</span><span class="p">);</span>
                            <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
                                <span class="nx">setQueryParam</span><span class="p">(</span><span class="s1">&#39;locale&#39;</span><span class="p">,</span> <span class="nx">value</span><span class="p">);</span>
                            <span class="p">}</span>
                        <span class="p">}</span>
                    <span class="p">}</span>
                <span class="p">};</span>
            <span class="p">}</span>


            <span class="kd">var</span> <span class="nx">menu</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Ext</span><span class="p">.</span><span class="nx">menu</span><span class="p">.</span><span class="nx">Menu</span><span class="p">({</span>
                    <span class="nx">items</span><span class="o">:</span> <span class="p">[</span>
                        <span class="nx">makeItem</span><span class="p">(</span><span class="s1">&#39;neptune&#39;</span><span class="p">,</span>       <span class="s1">&#39;Neptune&#39;</span><span class="p">),</span>
                        <span class="nx">makeItem</span><span class="p">(</span><span class="s1">&#39;neptune-touch&#39;</span><span class="p">,</span> <span class="s1">&#39;Neptune Touch&#39;</span><span class="p">),</span>
                        <span class="nx">makeItem</span><span class="p">(</span><span class="s1">&#39;crisp&#39;</span><span class="p">,</span>         <span class="s1">&#39;Crisp&#39;</span><span class="p">),</span>
                        <span class="nx">makeItem</span><span class="p">(</span><span class="s1">&#39;crisp-touch&#39;</span><span class="p">,</span>   <span class="s1">&#39;Crisp Touch&#39;</span><span class="p">),</span>
                        <span class="nx">makeItem</span><span class="p">(</span><span class="s1">&#39;classic&#39;</span><span class="p">,</span>       <span class="s1">&#39;Classic&#39;</span><span class="p">),</span>
                        <span class="nx">makeItem</span><span class="p">(</span><span class="s1">&#39;gray&#39;</span><span class="p">,</span>          <span class="s1">&#39;Gray&#39;</span><span class="p">),</span>
                        <span class="s1">&#39;-&#39;</span><span class="p">,</span>
                        <span class="nx">makeItem</span><span class="p">(</span><span class="s1">&#39;en&#39;</span><span class="p">,</span>            <span class="s1">&#39;English&#39;</span><span class="p">,</span>    <span class="s1">&#39;locale&#39;</span><span class="p">),</span>
                        <span class="nx">makeItem</span><span class="p">(</span><span class="s1">&#39;ko&#39;</span><span class="p">,</span>            <span class="s1">&#39;한국어&#39;</span><span class="p">,</span>     <span class="s1">&#39;locale&#39;</span><span class="p">)</span>
                    <span class="p">]</span>
                <span class="p">});</span>


            <span class="k">this</span><span class="p">.</span><span class="nx">items</span> <span class="o">=</span> <span class="p">[{</span>
                    <span class="nx">xtype</span><span class="o">:</span> <span class="s1">&#39;component&#39;</span><span class="p">,</span>
                    <span class="nx">id</span><span class="o">:</span> <span class="s1">&#39;theme-switcher&#39;</span><span class="p">,</span>
                    <span class="nx">cls</span><span class="o">:</span> <span class="s1">&#39;ks-theme-switcher&#39;</span><span class="p">,</span>
                    <span class="nx">margin</span><span class="o">:</span> <span class="s1">&#39;0 5 0 0&#39;</span><span class="p">,</span>
                    <span class="nx">listeners</span><span class="o">:</span> <span class="p">{</span>
                        <span class="nx">scope</span><span class="o">:</span> <span class="k">this</span><span class="p">,</span>
                        <span class="nx">click</span><span class="o">:</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
                            <span class="nx">menu</span><span class="p">.</span><span class="nx">showBy</span><span class="p">(</span><span class="k">this</span><span class="p">);</span>
                        <span class="p">},</span>
                        <span class="nx">element</span><span class="o">:</span> <span class="s1">&#39;el&#39;</span>
                    <span class="p">}</span>
                <span class="p">}];</span>


            <span class="k">this</span><span class="p">.</span><span class="nx">callParent</span><span class="p">();</span>
        <span class="p">}</span>
    <span class="p">};</span>
<span class="p">});</span></code></pre></div>

<p>Main 클래스 내부에서 Header클래스를 호출하도록 수정한다.</p>

<div class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="nx">Ext</span><span class="p">.</span><span class="nx">define</span><span class="p">(</span><span class="s1">&#39;KitchenSink.view.main.Main&#39;</span><span class="p">,</span> <span class="p">{</span>
    <span class="nx">extend</span><span class="o">:</span> <span class="s1">&#39;Ext.panel.Panel&#39;</span><span class="p">,</span>
    <span class="nx">xtype</span><span class="o">:</span> <span class="s1">&#39;app-main&#39;</span><span class="p">,</span>
    <span class="nx">requires</span><span class="o">:</span> <span class="p">[</span><span class="s1">&#39;KitchenSink.view.Header&#39;</span><span class="p">],</span>
    <span class="nx">controller</span><span class="o">:</span> <span class="s1">&#39;main&#39;</span><span class="p">,</span>
    <span class="nx">viewModel</span><span class="o">:</span> <span class="p">{</span>
        <span class="nx">type</span><span class="o">:</span> <span class="s1">&#39;main&#39;</span>
    <span class="p">},</span>
    <span class="nx">layout</span><span class="o">:</span> <span class="p">{</span>
        <span class="nx">type</span><span class="o">:</span> <span class="s1">&#39;border&#39;</span>
    <span class="p">},</span>
    <span class="nx">items</span><span class="o">:</span> <span class="p">[{</span>
        <span class="nx">xtype</span><span class="o">:</span> <span class="s1">&#39;appHeader&#39;</span><span class="p">,</span>
        <span class="nx">region</span> <span class="o">:</span> <span class="s1">&#39;north&#39;</span>
    <span class="p">},{</span>
        <span class="nx">region</span><span class="o">:</span> <span class="s1">&#39;center&#39;</span><span class="p">,</span>
        <span class="nx">xtype</span><span class="o">:</span> <span class="s1">&#39;tabpanel&#39;</span><span class="p">,</span>
        <span class="nx">items</span><span class="o">:</span><span class="p">[{</span>
            <span class="nx">title</span><span class="o">:</span> <span class="s1">&#39;Tab 1&#39;</span><span class="p">,</span>
            <span class="nx">html</span><span class="o">:</span> <span class="s1">&#39;&lt;h2&gt;Content appropriate for the current navigation.&lt;/h2&gt;&#39;</span>
        <span class="p">}]</span>
    <span class="p">}]</span>
<span class="p">});</span></code></pre></div>

<p>index.html 내부에서 기본 테마와 로케일 설정은 crisp-en일 것이다. 물론 desktop일 경우를 예로 한다. 이후 ThemeSwitcher에 의해 언어를 영어에서 한글로 변경하면 한글로 전환 되는 것을 확인하기 위해 앱루트에 locale폴더를 생성하고 Header클래스를 아래와 같이 생성할 것이다. 이 클래스는 한글을 포함하고 있다.
한글 지원 Header클래스의 위치는 /locale/ko/view/Header.js이다.</p>

<div class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="nx">Ext</span><span class="p">.</span><span class="nx">define</span><span class="p">(</span><span class="s1">&#39;KitchenSink.locale.view.Header&#39;</span><span class="p">,</span> <span class="p">{</span>
    <span class="nx">override</span><span class="o">:</span> <span class="s1">&#39;KitchenSink.view.Header&#39;</span><span class="p">,</span>
    <span class="nx">title</span><span class="o">:</span> <span class="s1">&#39;안녕하세요 ^^&#39;</span>
<span class="p">});</span></code></pre></div>

<p>한가지 더 테스트 하자. 위의 Header클래스는 한글을 지원하기 위해 기존 app폴더의 Header클래스를 override하고 있다. 이것은 일반적인 override와 동일하므로 일반적인 override도 같이 테스트 하자.</p>

<p>app.json설정을 통해 앱루트 아래 override폴더에 해당 클래스를 위치 시켜보자.</p>

<div class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="nx">Ext</span><span class="p">.</span><span class="nx">define</span><span class="p">(</span><span class="s1">&#39;KitchenSink.override.view.main.Main&#39;</span><span class="p">,</span> <span class="p">{</span>
     <span class="nx">override</span><span class="o">:</span> <span class="s1">&#39;KitchenSink.view.main.Main&#39;</span><span class="p">,</span>
     <span class="nx">title</span><span class="o">:</span> <span class="s1">&#39;오버라이드 테스트 KitchenSink.override.view.main.Main&#39;</span>
<span class="p">});</span></code></pre></div>

<p>이 클래스는 로케일 설정과 별개로 기존 Main클래스의 title설정을 대체 할 것이다.</p>

<p>이제 Header클래스가 실행될 경우 필요한 css를 준비하자. ExtJS는 시스템에 css를 적용하기 위해 sass를 이용한다. 앱루트의 sass폴더에 각 클래스에 적용할 css를 sass형태로 코딩하여 추가하면 빌드시 테마에 적용될 것이다.</p>

<p>/sass/src/view/Header.scss파일을 추가하자. 이 파일은 테마별로 다른 css스타일을 적용하는 코드다.</p>

<div class="highlight"><pre><code class="language-css" data-lang="css"><span class="o">$</span><span class="nt">kitchensink-header-background-color</span><span class="o">:</span> <span class="nf">#333</span><span class="o">;</span>
<span class="o">$</span><span class="nt">kitchensink-header-text-color</span><span class="o">:</span> <span class="nf">#fff</span><span class="o">;</span>
<span class="o">$</span><span class="nt">kitchensink-header-text-shadow-color</span><span class="o">:</span> <span class="nt">null</span><span class="o">;</span>
<span class="o">$</span><span class="nt">kitchensink-header-use-gradient</span><span class="o">:</span> <span class="nt">true</span><span class="o">;</span>


<span class="k">@if</span> <span class="o">$</span><span class="nt">theme-name</span> <span class="o">==</span> <span class="s1">&#39;ext-theme-neptune&#39;</span> <span class="nt">or</span> <span class="o">$</span><span class="nt">theme-name</span> <span class="o">==</span> <span class="s1">&#39;ext-theme-neptune-touch&#39;</span> <span class="p">{</span>
    <span class="o">$</span><span class="nt">kitchensink-header-background-color</span><span class="o">:</span> <span class="nf">#81af34</span><span class="o">;</span>
    <span class="o">$</span><span class="nt">kitchensink-header-text-shadow-color</span><span class="o">:</span> <span class="nf">#4e691f</span><span class="o">;</span>
<span class="p">}</span>


<span class="k">@if</span> <span class="o">$</span><span class="nt">theme-name</span> <span class="o">==</span> <span class="s1">&#39;ext-theme-classic&#39;</span> <span class="nt">or</span> <span class="o">$</span><span class="nt">theme-name</span> <span class="o">==</span> <span class="s1">&#39;ext-theme-gray&#39;</span> <span class="p">{</span>
    <span class="o">$</span><span class="nt">kitchensink-header-background-color</span><span class="o">:</span> <span class="nt">darken</span><span class="o">($</span><span class="nt">base-color</span><span class="o">,</span> <span class="nt">55</span><span class="o">%);</span>
<span class="p">}</span>


<span class="k">@if</span> <span class="o">$</span><span class="nt">theme-name</span> <span class="o">==</span> <span class="s1">&#39;ext-theme-crisp&#39;</span> <span class="nt">or</span> <span class="o">$</span><span class="nt">theme-name</span> <span class="o">==</span> <span class="s1">&#39;ext-theme-crisp-touch&#39;</span> <span class="p">{</span>
    <span class="o">$</span><span class="nt">kitchensink-header-background-color</span><span class="o">:</span> <span class="nf">#2a3f5d</span><span class="o">;</span>
    <span class="o">$</span><span class="nt">kitchensink-header-use-gradient</span><span class="o">:</span> <span class="nt">false</span><span class="o">;</span>
<span class="p">}</span>


<span class="nf">#app-header</span> <span class="p">{</span>
    <span class="k">background-color</span><span class="o">:</span> <span class="err">$</span><span class="n">kitchensink</span><span class="o">-</span><span class="n">header</span><span class="o">-</span><span class="k">background-color</span><span class="p">;</span>
    <span class="o">@</span><span class="n">if</span> <span class="err">$</span><span class="n">kitchensink</span><span class="o">-</span><span class="n">header</span><span class="o">-</span><span class="n">use</span><span class="o">-</span><span class="n">gradient</span> <span class="err">{</span>
        <span class="o">@</span><span class="n">include</span> <span class="k">background-image</span><span class="p">(</span><span class="n">linear</span><span class="o">-</span><span class="n">gradient</span><span class="p">(</span><span class="k">top</span><span class="o">,</span> <span class="n">lighten</span><span class="p">(</span><span class="err">$</span><span class="n">kitchensink</span><span class="o">-</span><span class="n">header</span><span class="o">-</span><span class="k">background-color</span><span class="o">,</span> <span class="m">5</span><span class="p">)</span><span class="o">,</span> <span class="n">darken</span><span class="p">(</span><span class="err">$</span><span class="n">kitchensink</span><span class="o">-</span><span class="n">header</span><span class="o">-</span><span class="k">background-color</span><span class="o">,</span> <span class="m">5</span><span class="p">)));</span>
    <span class="p">}</span>
<span class="nt">border-bottom</span><span class="o">:</span> <span class="nt">1px</span> <span class="nt">solid</span> <span class="nt">darken</span><span class="o">($</span><span class="nt">kitchensink-header-background-color</span><span class="o">,</span> <span class="nt">15</span><span class="o">);</span>


    <span class="k">@if</span> <span class="o">$</span><span class="nt">theme-name</span> <span class="o">==</span> <span class="s1">&#39;ext-theme-neptune&#39;</span> <span class="p">{</span>
        <span class="o">.</span><span class="err">#</span><span class="p">{</span><span class="err">$</span><span class="n">prefix</span><span class="p">}</span><span class="nt">nlg</span> <span class="o">&amp;</span> <span class="p">{</span>
            <span class="k">background-image</span><span class="o">:</span> <span class="sx">url(images/header-bg.png)</span><span class="p">;</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="err">}</span>


<span class="nf">#app-header-title</span> <span class="p">{</span>
    <span class="k">padding</span><span class="o">:</span> <span class="m">15px</span> <span class="m">0</span> <span class="m">10px</span> <span class="m">0</span><span class="p">;</span>


    <span class="k">color</span><span class="o">:</span> <span class="m">#fff</span><span class="p">;</span>
    <span class="k">font-size</span><span class="o">:</span> <span class="m">18px</span><span class="p">;</span>
    <span class="k">font-weight</span><span class="o">:</span> <span class="k">bold</span><span class="p">;</span>
    <span class="o">@</span><span class="n">if</span> <span class="err">$</span><span class="n">kitchensink</span><span class="o">-</span><span class="n">header</span><span class="o">-</span><span class="k">text-shadow</span><span class="o">-</span><span class="k">color</span> <span class="o">!=</span> <span class="n">null</span> <span class="err">{</span>
        <span class="k">text-shadow</span><span class="o">:</span> <span class="m">0</span> <span class="m">1px</span> <span class="m">0</span> <span class="err">$</span><span class="n">kitchensink</span><span class="o">-</span><span class="n">header</span><span class="o">-</span><span class="k">text-shadow</span><span class="o">-</span><span class="k">color</span><span class="p">;</span>
    <span class="p">}</span>
<span class="err">}</span>


<span class="nf">#app-header-logo</span> <span class="p">{</span>
    <span class="k">width</span><span class="o">:</span> <span class="m">40px</span><span class="p">;</span>
    <span class="k">height</span><span class="o">:</span> <span class="m">25px</span><span class="p">;</span>


    <span class="k">background</span><span class="o">:</span> <span class="sx">url(images/logo.png)</span> <span class="k">no-repeat</span> <span class="k">center</span> <span class="m">4px</span><span class="p">;</span>
<span class="p">}</span>


<span class="nf">#theme-switcher-combo-labelEl</span> <span class="p">{</span>
    <span class="k">color</span><span class="o">:</span> <span class="err">$</span><span class="n">kitchensink</span><span class="o">-</span><span class="n">header</span><span class="o">-</span><span class="k">text</span><span class="o">-</span><span class="k">color</span><span class="p">;</span>
    <span class="k">font-weight</span><span class="o">:</span> <span class="k">bold</span><span class="p">;</span>
<span class="p">}</span>


<span class="nc">.ks-theme-switcher</span> <span class="p">{</span>
    <span class="k">background-image</span><span class="o">:</span> <span class="sx">url(images/options.png)</span><span class="p">;</span>
    <span class="k">width</span><span class="o">:</span> <span class="m">22px</span><span class="p">;</span>
    <span class="k">height</span><span class="o">:</span> <span class="m">22px</span><span class="p">;</span>
<span class="p">}</span></code></pre></div>

<p>위의 파일에서 로딩하는 각종 이미지 파일은 kitchenSink예제의 resources/images폴더를 복사하도록 하자.</p>

<p>최종 폴더 구조는 그림과 같다.</p>

<p><img src="imgs/img04.png" alt=""><br>
*<em>그림 4 최종 폴더구조.</em></p>

<h2>최종 빌드</h2>

<p>이제 마지막 빌드과정이 남았다. 해당 앱루트로 접근하고 sencha app build 명령을 수행하자. 위에서 언급했듯이 총6개의 테마와 2개의 언어가 모두 빌드되려면 총 12번의 빌드과정을 거치게 되어 상당한 시간이 소요될 것이다.</p>

<p><img src="imgs/img05.png" alt=""><br>
*<em>그림 5 최종 폴더구조.</em></p>

<p>빌드가 완료되면 workspace/kitchensink폴더 내부를 확인하자. 그림처럼 총 12개의 json파일이 테마와 로케일 설정별로 생성된 것이 보일 것이다. 이 총12개의 파일이 app.json의 설정에 의해 생성된 manifest이고 이 파일별로 테마와 언어가 다르게 실행되는 것이다.</p>

<p><img src="imgs/img06.png" alt=""><br>
*<em>그림 6 빌드 완료후 앱 내부의 테마와 로케일 설정파일 *</em></p>

<p>그렇다면 최종 빌드파일은 어떤 모습인지 확인해야 할 것이다. sencha app build명령은 production 빌드이므로 workspace/build/production/kitchensink폴더에 빌드파일을 저장했을 것이다.</p>

<p><img src="imgs/img07.png" alt=""><br>
*<em>그림 7 빌드완료 후 build/production/kitchensink폴더의 모습 *</em></p>

<p>상당히 많은 량의 파일이 생성되었음을 볼 수 있다. 각 테마와 로케일 별로 총12개의 개별 빌드 폴더가 생성되어 독립적으로 실행가능 될 수 있다.</p>

<p>완료된 결과를 브라우저를 통해 확인하자.
workspace루트로 이동하여 sencha web start 명령을 실행하자.</p>

<p><img src="imgs/img08.png" alt=""><br>
*<em>그림 8 sencha web start명령의 실행 *</em></p>

<p>오른쪽 아이콘을 클릭해 언어를 한국어로 변경하면 기존 영문이 한글로 표시될 것이다.</p>

<p><img src="imgs/img09.png" alt=""><br>
*<em>그림 9 최종 실행결과  *</em></p>

        </div>

        <div class="media_content media_item shadow_panel">
            <p>Tags : <a href="/tags/javascript">javascript</a>&nbsp;<a href="/tags/framework">framework</a>&nbsp;<a href="/tags/Ext">Ext</a>&nbsp;<a href="/tags/JS">JS</a>&nbsp;<a href="/tags/tutorial">tutorial</a>&nbsp;</p>
        </div>


        <div class="media_content media_item shadow_panel">
            <div id="disqus_thread"></div>
<script type="text/javascript">
    /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
    var disqus_shortname = 'html5krforkisa'; // required: replace example with your forum shortname

    /* * * DON'T EDIT BELOW THIS LINE * * */
    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
    
        </div>

    </div>

    <script>
        $('#main_content').toc();
    </script>
</div>
<footer>
<table width="100%" height="80" class="footer">
    <tr>
        <td align="center" class="footer_content">
            WebFrameworks.kr @since 2015
        </td>
    </tr>
</table>
</footer>
<script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
            m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-56520981-1', 'auto');
    ga('send', 'pageview');

</script>
</body>
</html>