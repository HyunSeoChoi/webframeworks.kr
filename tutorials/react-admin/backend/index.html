<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
<style>
@import url(https://fonts.googleapis.com/earlyaccess/nanumgothic.css); /* 나눔고딕 : 'Nanum Gothic' */
</style>
<title>WebFrameworks.kr - React-Admin - backend와 연동</title>
<link rel="stylesheet" href="/static/css/bootstrap.min.css">
<link rel="stylesheet" href="/static/css/main.css">
<link rel="stylesheet" href="/static/css/syntax.css">
<link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css">
<script src="/static/js/jquery.min.js"></script>
<script src="/static/js/bootstrap.min.js"></script>

    <link rel="stylesheet" href="/static/css/toc.css">
    <script type="text/javascript" src="/static/js/jquery.toc.js"></script>
</head>
<body>
<nav class="navbar navbar-default top_menu" role="navigation">
    <div class="container-fluid">
        <div class="navbar-header">
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#navbar-collapse-1">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="/">웹Frameworks</a>
        </div>

        <div class="collapse navbar-collapse" id="navbar-collapse-1">
            <ul class="nav navbar-nav navbar-left">
                <li><a href="/getstarted">Get Started</a></li>
            </ul>
            <ul class="nav navbar-nav navbar-left">
                <li><a href="/updates">Update</a></li>
            </ul>
            <ul class="nav navbar-nav navbar-left">
                <li><a href="/tutorials">Tutorials</a></li>
            </ul>
            <ul class="nav navbar-nav navbar-left">
                <li><a href="/quickstart">Quick Start</a></li>
            </ul>
            <ul class="nav navbar-nav navbar-left">
                <li><a href="/archives">Archives</a></li>
            </ul>
            <ul class="nav navbar-nav navbar-left">
                <li><a href="https://github.com/KoreaHTML5/webframeworks.kr/blob/master/CONTRIBUTE.md" target="_blank">참여하기</a></li>
            </ul>
            <ul class="nav navbar-nav navbar-left">
                <li><a href="http://goo.gl/forms/MB9ZxVvdrD" target="_blank">설문하기</a></li>
            </ul>
        </div>
    </div>
</nav>


<div class="content_bg"  style="background-color: #;color: #;" >
<div class="col-md-10 col-md-offset-1 title_header jumbotron"  style="background:url() no-repeat center"  >
<h1 class="title_header_title">React-Admin - backend와 연동</h1>
<p class="title_header_summary">React-Admin과 backend를 연동해봅시다.</p>
</div>
</div>

<div>

    <div class="col-sm-3 col-md-2 col-md-offset-2">
        <div class="panel panel-default">
            <div class="panel-heading">
                <h3 class="panel-title">작성자</h3>
            </div>
            <div class="panel-body">
                <div class="media">
                    <a class="pull-left" href="#">
                        <img class="media-object profile_img" src="https://avatars1.githubusercontent.com/u/2949778?s=400&v=4" alt="홍세민">
                    </a>
                    <div class="media-body">
                        <h4 class="media-heading">
                            홍세민

                        </h4>
                        MarcusHong<br>
                    </div>
                </div>
            </div>
        </div>

        <div id="toc_location"></div>

        <div class="panel panel-default">
    <div class="panel-heading">
        <h3 class="panel-title">Tags</h3>
    </div>
    <div class="panel-body">
        <a href='/tags/jquery/' style='color: rgba(0,0,0,0.059259)'>jquery</a>
<a href='/tags/javascript/' style='color: rgba(0,0,0,10.725926)'>javascript</a>
<a href='/tags/html/' style='color: rgba(0,0,0,0.059259)'>html</a>
<a href='/tags/grunt/' style='color: rgba(0,0,0,0.059259)'>grunt</a>
<a href='/tags/gulp/' style='color: rgba(0,0,0,0.059259)'>gulp</a>
<a href='/tags/build/' style='color: rgba(0,0,0,0.355556)'>build</a>
<a href='/tags/yeoman/' style='color: rgba(0,0,0,0.059259)'>yeoman</a>
<a href='/tags/foundation/' style='color: rgba(0,0,0,0.059259)'>foundation</a>
<a href='/tags/bower/' style='color: rgba(0,0,0,0.118519)'>bower</a>
<a href='/tags/twitter/' style='color: rgba(0,0,0,0.118519)'>twitter</a>
<a href='/tags/framework/' style='color: rgba(0,0,0,2.429630)'>framework</a>
<a href='/tags/angularjs/' style='color: rgba(0,0,0,1.007407)'>angularjs</a>
<a href='/tags/tutorials/' style='color: rgba(0,0,0,1.303704)'>tutorials</a>
<a href='/tags/backbone/' style='color: rgba(0,0,0,0.237037)'>backbone</a>
<a href='/tags/getstarted/' style='color: rgba(0,0,0,0.177778)'>getstarted</a>
<a href='/tags/underscore/' style='color: rgba(0,0,0,0.059259)'>underscore</a>
<a href='/tags/library/' style='color: rgba(0,0,0,0.414815)'>library</a>
<a href='/tags/Ext/' style='color: rgba(0,0,0,0.533333)'>Ext</a>
<a href='/tags/JS/' style='color: rgba(0,0,0,0.829630)'>JS</a>
<a href='/tags/tutorial/' style='color: rgba(0,0,0,0.770370)'>tutorial</a>
<a href='/tags/modernizr/' style='color: rgba(0,0,0,0.059259)'>modernizr</a>
<a href='/tags/bootstrap/' style='color: rgba(0,0,0,0.177778)'>bootstrap</a>
<a href='/tags/quickstart/' style='color: rgba(0,0,0,0.059259)'>quickstart</a>
<a href='/tags/angular-di/' style='color: rgba(0,0,0,0.059259)'>angular-di</a>
<a href='/tags/animation/' style='color: rgba(0,0,0,0.237037)'>animation</a>
<a href='/tags/router/' style='color: rgba(0,0,0,0.059259)'>router</a>
<a href='/tags/promise/' style='color: rgba(0,0,0,0.296296)'>promise</a>
<a href='/tags/responsive/' style='color: rgba(0,0,0,0.059259)'>responsive</a>
<a href='/tags/form/' style='color: rgba(0,0,0,0.118519)'>form</a>
<a href='/tags/validation/' style='color: rgba(0,0,0,0.118519)'>validation</a>
<a href='/tags/map/' style='color: rgba(0,0,0,0.059259)'>map</a>
<a href='/tags/direcitve/' style='color: rgba(0,0,0,0.059259)'>direcitve</a>
<a href='/tags/file/' style='color: rgba(0,0,0,0.118519)'>file</a>
<a href='/tags/test/' style='color: rgba(0,0,0,0.237037)'>test</a>
<a href='/tags/ui-bootstrap/' style='color: rgba(0,0,0,0.059259)'>ui-bootstrap</a>
<a href='/tags/twitter-bootstrap/' style='color: rgba(0,0,0,0.059259)'>twitter-bootstrap</a>
<a href='/tags/d3.js/' style='color: rgba(0,0,0,0.059259)'>d3.js</a>
<a href='/tags/visualization/' style='color: rgba(0,0,0,0.355556)'>visualization</a>
<a href='/tags/expressjs/' style='color: rgba(0,0,0,0.414815)'>expressjs</a>
<a href='/tags/react/' style='color: rgba(0,0,0,1.777778)'>react</a>
<a href='/tags/session/' style='color: rgba(0,0,0,0.177778)'>session</a>
<a href='/tags/meteor/' style='color: rgba(0,0,0,0.829630)'>meteor</a>
<a href='/tags/SEO/' style='color: rgba(0,0,0,0.059259)'>SEO</a>
<a href='/tags/REST/' style='color: rgba(0,0,0,0.059259)'>REST</a>
<a href='/tags/API/' style='color: rgba(0,0,0,0.059259)'>API</a>
<a href='/tags/es2015/' style='color: rgba(0,0,0,0.118519)'>es2015</a>
<a href='/tags/es6/' style='color: rgba(0,0,0,0.651852)'>es6</a>
<a href='/tags/es7/' style='color: rgba(0,0,0,0.118519)'>es7</a>
<a href='/tags/DDP/' style='color: rgba(0,0,0,0.059259)'>DDP</a>
<a href='/tags/ngMessages/' style='color: rgba(0,0,0,0.118519)'>ngMessages</a>
<a href='/tags/jsx/' style='color: rgba(0,0,0,0.059259)'>jsx</a>
<a href='/tags/publish/' style='color: rgba(0,0,0,0.059259)'>publish</a>
<a href='/tags/subscribe/' style='color: rgba(0,0,0,0.059259)'>subscribe</a>
<a href='/tags/meteor.js/' style='color: rgba(0,0,0,0.059259)'>meteor.js</a>
<a href='/tags/node.js/' style='color: rgba(0,0,0,0.237037)'>node.js</a>
<a href='/tags/backend/' style='color: rgba(0,0,0,0.177778)'>backend</a>
<a href='/tags/reactive/' style='color: rgba(0,0,0,0.059259)'>reactive</a>
<a href='/tags/package/' style='color: rgba(0,0,0,0.059259)'>package</a>
<a href='/tags/static/' style='color: rgba(0,0,0,0.059259)'>static</a>
<a href='/tags/assets/' style='color: rgba(0,0,0,0.059259)'>assets</a>
<a href='/tags/public/' style='color: rgba(0,0,0,0.059259)'>public</a>
<a href='/tags/flux/' style='color: rgba(0,0,0,0.237037)'>flux</a>
<a href='/tags/redux/' style='color: rgba(0,0,0,0.414815)'>redux</a>
<a href='/tags/server/' style='color: rgba(0,0,0,0.059259)'>server</a>
<a href='/tags/distribution/' style='color: rgba(0,0,0,0.059259)'>distribution</a>
<a href='/tags/webpack/' style='color: rgba(0,0,0,0.177778)'>webpack</a>
<a href='/tags/development/' style='color: rgba(0,0,0,0.059259)'>development</a>
<a href='/tags/optimization/' style='color: rgba(0,0,0,0.059259)'>optimization</a>
<a href='/tags/immutable/' style='color: rgba(0,0,0,0.059259)'>immutable</a>
<a href='/tags/orm/' style='color: rgba(0,0,0,0.237037)'>orm</a>
<a href='/tags/database/' style='color: rgba(0,0,0,0.237037)'>database</a>
<a href='/tags/hapi.js/' style='color: rgba(0,0,0,0.059259)'>hapi.js</a>
<a href='/tags/hapi/' style='color: rgba(0,0,0,0.237037)'>hapi</a>
<a href='/tags/ionic/' style='color: rgba(0,0,0,0.118519)'>ionic</a>
<a href='/tags/hybrid-app/' style='color: rgba(0,0,0,0.059259)'>hybrid-app</a>
<a href='/tags/django/' style='color: rgba(0,0,0,0.059259)'>django</a>
<a href='/tags/fullstack/' style='color: rgba(0,0,0,0.059259)'>fullstack</a>
<a href='/tags/spa/' style='color: rgba(0,0,0,0.059259)'>spa</a>
<a href='/tags/ExpressJS/' style='color: rgba(0,0,0,0.296296)'>ExpressJS</a>
<a href='/tags/NodeJS/' style='color: rgba(0,0,0,0.296296)'>NodeJS</a>
<a href='/tags/Sequelize/' style='color: rgba(0,0,0,0.296296)'>Sequelize</a>
<a href='/tags/Mocha/' style='color: rgba(0,0,0,0.296296)'>Mocha</a>
<a href='/tags/Supertest/' style='color: rgba(0,0,0,0.296296)'>Supertest</a>
<a href='/tags/UnitTest/' style='color: rgba(0,0,0,0.296296)'>UnitTest</a>
<a href='/tags/reactjs/' style='color: rgba(0,0,0,0.118519)'>reactjs</a>
<a href='/tags/this/' style='color: rgba(0,0,0,0.118519)'>this</a>
<a href='/tags/dom/' style='color: rgba(0,0,0,0.059259)'>dom</a>
<a href='/tags/es5/' style='color: rgba(0,0,0,0.118519)'>es5</a>
<a href='/tags/virtualdom/' style='color: rgba(0,0,0,0.118519)'>virtualdom</a>
<a href='/tags/modules/' style='color: rgba(0,0,0,0.059259)'>modules</a>
<a href='/tags/asynchronous/' style='color: rgba(0,0,0,0.059259)'>asynchronous</a>
<a href='/tags/semicolon/' style='color: rgba(0,0,0,0.059259)'>semicolon</a>
<a href='/tags/nodejs/' style='color: rgba(0,0,0,0.118519)'>nodejs</a>
<a href='/tags/ECMAScript2015/' style='color: rgba(0,0,0,0.118519)'>ECMAScript2015</a>
<a href='/tags/babel/' style='color: rgba(0,0,0,0.059259)'>babel</a>
<a href='/tags/angular,/' style='color: rgba(0,0,0,0.059259)'>angular,</a>
<a href='/tags/electron/' style='color: rgba(0,0,0,0.118519)'>electron</a>
<a href='/tags/docker/' style='color: rgba(0,0,0,0.474074)'>docker</a>
<a href='/tags/D3/' style='color: rgba(0,0,0,0.059259)'>D3</a>
<a href='/tags/node/' style='color: rgba(0,0,0,0.118519)'>node</a>
<a href='/tags/express/' style='color: rgba(0,0,0,0.118519)'>express</a>
<a href='/tags/aws/' style='color: rgba(0,0,0,1.600000)'>aws</a>
<a href='/tags/dynamoDB/' style='color: rgba(0,0,0,0.059259)'>dynamoDB</a>
<a href='/tags/chrome/' style='color: rgba(0,0,0,0.059259)'>chrome</a>
<a href='/tags/native/' style='color: rgba(0,0,0,0.118519)'>native</a>
<a href='/tags/markdown/' style='color: rgba(0,0,0,0.059259)'>markdown</a>
<a href='/tags/vue/' style='color: rgba(0,0,0,2.192593)'>vue</a>
<a href='/tags/middleware/' style='color: rgba(0,0,0,0.118519)'>middleware</a>
<a href='/tags/IoT/' style='color: rgba(0,0,0,0.059259)'>IoT</a>
<a href='/tags/serverless/' style='color: rgba(0,0,0,0.533333)'>serverless</a>
<a href='/tags/python/' style='color: rgba(0,0,0,0.177778)'>python</a>
<a href='/tags/socket.io/' style='color: rgba(0,0,0,0.177778)'>socket.io</a>
<a href='/tags/typescript/' style='color: rgba(0,0,0,0.059259)'>typescript</a>
<a href='/tags/laravel/' style='color: rgba(0,0,0,1.540741)'>laravel</a>
<a href='/tags/express.js/' style='color: rgba(0,0,0,0.059259)'>express.js</a>
<a href='/tags/github/' style='color: rgba(0,0,0,0.118519)'>github</a>
<a href='/tags/slack/' style='color: rgba(0,0,0,0.118519)'>slack</a>
<a href='/tags/react-native/' style='color: rgba(0,0,0,0.059259)'>react-native</a>
<a href='/tags/data/' style='color: rgba(0,0,0,0.296296)'>data</a>
<a href='/tags/opensource/' style='color: rgba(0,0,0,0.059259)'>opensource</a>
<a href='/tags/pwa/' style='color: rgba(0,0,0,0.059259)'>pwa</a>
<a href='/tags/php/' style='color: rgba(0,0,0,0.059259)'>php</a>
<a href='/tags/vuejs/' style='color: rgba(0,0,0,0.592593)'>vuejs</a>
<a href='/tags/nextjs/' style='color: rgba(0,0,0,0.474074)'>nextjs</a>
<a href='/tags/react_admin/' style='color: rgba(0,0,0,0.177778)'>react_admin</a>
<a href='/tags/cd/' style='color: rgba(0,0,0,0.059259)'>cd</a>
<a href='/tags/webrtc/' style='color: rgba(0,0,0,0.237037)'>webrtc</a>
<a href='/tags/pm2/' style='color: rgba(0,0,0,0.059259)'>pm2</a>
<a href='/tags/docker_registry/' style='color: rgba(0,0,0,0.059259)'>docker_registry</a>
<a href='/tags/ecr/' style='color: rgba(0,0,0,0.059259)'>ecr</a>
<a href='/tags/twilio/' style='color: rgba(0,0,0,0.059259)'>twilio</a>
<a href='/tags/json_schema/' style='color: rgba(0,0,0,0.059259)'>json_schema</a>
<a href='/tags/sql/' style='color: rgba(0,0,0,0.059259)'>sql</a>
<a href='/tags/json/' style='color: rgba(0,0,0,0.059259)'>json</a>
<a href='/tags/web/' style='color: rgba(0,0,0,0.059259)'>web</a>
<a href='/tags/sdk/' style='color: rgba(0,0,0,0.059259)'>sdk</a>
<a href='/tags/ssl/' style='color: rgba(0,0,0,0.059259)'>ssl</a>
<a href='/tags/portainer/' style='color: rgba(0,0,0,0.059259)'>portainer</a>
<a href='/tags/jwt/' style='color: rgba(0,0,0,0.059259)'>jwt</a>
<a href='/tags/mailu/' style='color: rgba(0,0,0,0.059259)'>mailu</a>
<a href='/tags/sam/' style='color: rgba(0,0,0,0.059259)'>sam</a>
<a href='/tags/lambda/' style='color: rgba(0,0,0,0.059259)'>lambda</a>
<a href='/tags/thumbnail/' style='color: rgba(0,0,0,0.059259)'>thumbnail</a>
<a href='/tags/redis/' style='color: rgba(0,0,0,0.059259)'>redis</a>

    </div>
</div>
    </div>

    <div class="col-sm-9 col-md-6">
        <div class="media_content media_item shadow_panel" id="main_content">
            <h3>Real server</h3>

<p>Tutorial에서는 fake Server를 dataProvider로 사용했다.
이번에는 backend와 연동하는 것을 목표로 한다.</p>

<h3>dataProvier</h3>

<p>App.js에서 custom한 dataProvider를 선언해서 사용한다.</p>
<div class="highlight"><pre><code class="language-js" data-lang="js"><span class="c1">// App.js</span>
<span class="kr">import</span> <span class="nx">_dataProvider</span> <span class="nx">from</span> <span class="s1">&#39;./providers/data&#39;</span>
<span class="kr">import</span> <span class="nx">projects</span> <span class="nx">from</span> <span class="s1">&#39;./components/projects&#39;</span>

<span class="kr">const</span> <span class="nx">dataProvider</span> <span class="o">=</span> <span class="nx">_dataProvider</span><span class="p">(</span><span class="s1">&#39;/api&#39;</span><span class="p">)</span>

<span class="kr">const</span> <span class="nx">App</span> <span class="o">=</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="o">&lt;</span><span class="nx">Admin</span>
  <span class="nx">dataProvider</span><span class="o">=</span><span class="p">{</span><span class="nx">dataProvider</span><span class="p">}</span><span class="o">&gt;</span>
  <span class="o">&lt;</span><span class="nx">Resource</span> <span class="nx">name</span><span class="o">=</span><span class="s1">&#39;projects&#39;</span> <span class="p">{...</span><span class="nx">projects</span><span class="p">}</span> <span class="o">/&gt;</span>
<span class="o">&lt;</span><span class="err">/Admin&gt;</span>
</code></pre></div>
<h3>fetchUtils</h3>

<p>react-admin에는 ajax라이브러리인 fetchUtils가 있다.
이것을 활용해서 costom dataProvider를 만든다.
여기서는 jwt 토큰을 사용한 인증기능을 추가한다.</p>
<div class="highlight"><pre><code class="language-js" data-lang="js"><span class="c1">// providers/data/index.js</span>
<span class="kr">import</span> <span class="p">{</span><span class="nx">fetchUtils</span><span class="p">}</span> <span class="nx">from</span> <span class="s1">&#39;react-admin&#39;</span>

<span class="kr">const</span> <span class="nx">models</span> <span class="o">=</span> <span class="p">{</span>
  <span class="nx">projects</span><span class="o">:</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;./projects&#39;</span><span class="p">),</span>
<span class="p">}</span>

<span class="kr">export</span> <span class="k">default</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">apiUrl</span><span class="p">)</span> <span class="p">{</span>
  <span class="kr">const</span> <span class="nx">httpClient</span> <span class="o">=</span> <span class="p">(</span><span class="nx">url</span><span class="p">,</span> <span class="nx">options</span> <span class="o">=</span> <span class="p">{})</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">options</span><span class="p">.</span><span class="nx">headers</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">options</span><span class="p">.</span><span class="nx">headers</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Headers</span><span class="p">({</span><span class="nx">Accept</span><span class="o">:</span> <span class="s1">&#39;application/json&#39;</span><span class="p">})</span>
    <span class="p">}</span>
    <span class="kr">const</span> <span class="nx">token</span> <span class="o">=</span> <span class="nx">localStorage</span><span class="p">.</span><span class="nx">getItem</span><span class="p">(</span><span class="s1">&#39;token&#39;</span><span class="p">)</span>
    <span class="nx">options</span><span class="p">.</span><span class="nx">headers</span><span class="p">.</span><span class="nx">set</span><span class="p">(</span><span class="s1">&#39;Authorization&#39;</span><span class="p">,</span> <span class="err">`</span><span class="nx">Bearer</span> <span class="nx">$</span><span class="p">{</span><span class="nx">token</span><span class="p">}</span><span class="err">`</span><span class="p">)</span>
    <span class="k">return</span> <span class="nx">fetchUtils</span><span class="p">.</span><span class="nx">fetchJson</span><span class="p">(</span><span class="nx">url</span><span class="p">,</span> <span class="nx">options</span><span class="p">)</span>
  <span class="p">}</span>

  <span class="k">return</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">type</span><span class="p">,</span> <span class="nx">resource</span><span class="p">,</span> <span class="nx">params</span><span class="p">)</span> <span class="p">{</span>
    <span class="kr">const</span> <span class="nx">resourceModel</span> <span class="o">=</span> <span class="nx">models</span><span class="p">[</span><span class="nx">resource</span><span class="p">]</span>
    <span class="kr">const</span> <span class="p">{</span><span class="nx">url</span><span class="p">,</span> <span class="nx">options</span><span class="p">}</span> <span class="o">=</span> <span class="nx">resourceModel</span><span class="p">.</span><span class="nx">request</span><span class="p">(</span><span class="nx">apiUrl</span><span class="p">,</span> <span class="nx">type</span><span class="p">,</span> <span class="nx">params</span><span class="p">)</span>
    <span class="k">return</span> <span class="nx">httpClient</span><span class="p">(</span><span class="nx">url</span><span class="p">,</span> <span class="nx">options</span><span class="p">).</span><span class="nx">then</span><span class="p">(</span><span class="nx">response</span> <span class="o">=&gt;</span> <span class="nx">resourceModel</span><span class="p">.</span><span class="nx">response</span><span class="p">(</span><span class="nx">response</span><span class="p">,</span> <span class="nx">type</span><span class="p">,</span> <span class="nx">params</span><span class="p">))</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<h3>API 연동</h3>

<p>react-admin에서 create, get, delete등 api 메서드와 페이지를 연계시켜 주지만 매번 이렇게 하기는 쉽지 않다.
각각에 메세드마다의 request와 response를 매핑한다.
주의할 점은 조회 페이지에서 id는 필수 값이다. 또한 조회 리스트에서 total 역시 필수 값이다.</p>
<div class="highlight"><pre><code class="language-js" data-lang="js"><span class="c1">// providers/data/projects.js</span>
<span class="kr">import</span> <span class="p">{</span>
  <span class="nx">CREATE</span><span class="p">,</span>
  <span class="nx">GET_LIST</span><span class="p">,</span>
  <span class="nx">GET_ONE</span><span class="p">,</span>
  <span class="nx">UPDATE</span><span class="p">,</span>
<span class="p">}</span> <span class="nx">from</span> <span class="s1">&#39;react-admin&#39;</span>

<span class="kr">export</span> <span class="kd">function</span> <span class="nx">request</span><span class="p">(</span><span class="nx">apiUrl</span><span class="p">,</span> <span class="nx">type</span><span class="p">,</span> <span class="nx">params</span><span class="p">)</span> <span class="p">{</span>
  <span class="kd">let</span> <span class="nx">url</span> <span class="o">=</span> <span class="nx">apiUrl</span> <span class="o">+</span> <span class="s1">&#39;/projects&#39;</span>
  <span class="kd">let</span> <span class="nx">options</span> <span class="o">=</span> <span class="p">{}</span>

  <span class="k">switch</span> <span class="p">(</span><span class="nx">type</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">case</span> <span class="nx">CREATE</span><span class="o">:</span>
      <span class="nx">options</span><span class="p">.</span><span class="nx">method</span> <span class="o">=</span> <span class="s1">&#39;POST&#39;</span>
      <span class="nx">options</span><span class="p">.</span><span class="nx">body</span> <span class="o">=</span> <span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">params</span><span class="p">.</span><span class="nx">data</span><span class="p">)</span>
      <span class="k">break</span>
    <span class="k">case</span> <span class="nx">UPDATE</span><span class="o">:</span>
      <span class="nx">url</span> <span class="o">+=</span> <span class="err">`</span><span class="o">/</span><span class="nx">$</span><span class="p">{</span><span class="nx">params</span><span class="p">.</span><span class="nx">id</span><span class="p">}</span><span class="err">`</span>
      <span class="nx">options</span><span class="p">.</span><span class="nx">method</span> <span class="o">=</span> <span class="s1">&#39;PUT&#39;</span>
      <span class="nx">options</span><span class="p">.</span><span class="nx">body</span> <span class="o">=</span> <span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">params</span><span class="p">.</span><span class="nx">data</span><span class="p">)</span>
      <span class="k">break</span>
    <span class="k">case</span> <span class="nx">GET_ONE</span><span class="o">:</span>
      <span class="nx">url</span> <span class="o">+=</span> <span class="err">`</span><span class="o">/</span><span class="nx">$</span><span class="p">{</span><span class="nx">params</span><span class="p">.</span><span class="nx">id</span><span class="p">}</span><span class="err">`</span>
      <span class="k">break</span>
    <span class="k">default</span><span class="o">:</span>
      <span class="k">break</span>
  <span class="p">}</span>
  <span class="k">return</span> <span class="p">{</span>
    <span class="nx">url</span><span class="o">:</span> <span class="nx">url</span><span class="p">,</span>
    <span class="nx">options</span>
  <span class="p">}</span>
<span class="p">}</span>

<span class="kr">export</span> <span class="kd">function</span> <span class="nx">response</span><span class="p">(</span><span class="nx">res</span><span class="p">,</span> <span class="nx">type</span><span class="p">,</span> <span class="nx">params</span><span class="p">)</span> <span class="p">{</span>
  <span class="kd">let</span> <span class="nx">ret</span> <span class="o">=</span> <span class="p">{}</span>
  <span class="kr">const</span> <span class="p">{</span><span class="nx">headers</span><span class="p">,</span> <span class="nx">json</span><span class="p">}</span> <span class="o">=</span> <span class="nx">res</span>

  <span class="k">switch</span> <span class="p">(</span><span class="nx">type</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">case</span> <span class="nx">CREATE</span><span class="o">:</span>
    <span class="k">case</span> <span class="nx">GET_ONE</span><span class="o">:</span>
      <span class="nx">json</span><span class="p">.</span><span class="nx">id</span> <span class="o">=</span> <span class="nx">json</span><span class="p">.</span><span class="nx">sid</span>
      <span class="nx">ret</span> <span class="o">=</span> <span class="p">{</span><span class="nx">data</span><span class="o">:</span> <span class="nx">json</span><span class="p">}</span>
      <span class="k">break</span>
    <span class="k">case</span> <span class="nx">UPDATE</span><span class="o">:</span>
      <span class="nx">ret</span> <span class="o">=</span> <span class="nx">params</span>
      <span class="k">break</span>
    <span class="k">case</span> <span class="nx">GET_LIST</span><span class="o">:</span>
      <span class="nx">json</span><span class="p">.</span><span class="nx">forEach</span><span class="p">(</span><span class="nx">row</span> <span class="o">=&gt;</span> <span class="p">{</span>
        <span class="nx">row</span><span class="p">.</span><span class="nx">id</span> <span class="o">=</span> <span class="nx">row</span><span class="p">.</span><span class="nx">sid</span>
      <span class="p">})</span>
      <span class="nx">ret</span> <span class="o">=</span> <span class="p">{</span><span class="nx">data</span><span class="o">:</span> <span class="nx">json</span><span class="p">,</span> <span class="nx">total</span><span class="o">:</span> <span class="nx">json</span><span class="p">.</span><span class="nx">length</span><span class="p">}</span>
      <span class="k">break</span>
    <span class="k">default</span><span class="o">:</span>
      <span class="k">if</span> <span class="p">(</span><span class="nx">json</span><span class="p">)</span> <span class="nx">ret</span> <span class="o">=</span> <span class="p">{</span><span class="nx">data</span><span class="o">:</span> <span class="nx">json</span><span class="p">}</span>
      <span class="k">break</span>
  <span class="p">}</span>
  <span class="k">return</span> <span class="nx">ret</span>
<span class="p">}</span>
</code></pre></div>
<h3>정리</h3>

<p>rest api 서버를 커스터마이즈 하면서 ajax request 취소 기능을 추가하고 싶다면 axios로도 dataProvider를 만들 수 있다.
id와 total을 자유도가 높기 때문에 취향대로 선택하면 된다.</p>

        </div>

        <div class="media_content media_item shadow_panel">
            <p>Tags : <a href="/tags/react_admin">react_admin</a>&nbsp;</p>
        </div>


        <div class="media_content media_item shadow_panel">
            <div id="disqus_thread"></div>
<script type="text/javascript">
    /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
    var disqus_shortname = 'html5krforkisa'; // required: replace example with your forum shortname

    /* * * DON'T EDIT BELOW THIS LINE * * */
    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
    
        </div>

    </div>

    <script>
        $('#main_content').toc();
    </script>
</div>
<footer>
<table width="100%" height="80" class="footer">
    <tr>
        <td align="center" class="footer_content">
            WebFrameworks.kr @since 2015
        </td>
    </tr>
</table>
</footer>
<script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
            m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-56520981-1', 'auto');
    ga('send', 'pageview');

</script>
</body>
</html>