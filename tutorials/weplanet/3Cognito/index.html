<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
<style>
@import url(https://fonts.googleapis.com/earlyaccess/nanumgothic.css); /* 나눔고딕 : 'Nanum Gothic' */
</style>
<title>WebFrameworks.kr - AWS Severless IoT 3 – Cognito User Pool</title>
<link rel="stylesheet" href="/static/css/bootstrap.min.css">
<link rel="stylesheet" href="/static/css/main.css">
<link rel="stylesheet" href="/static/css/syntax.css">
<link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css">
<script src="/static/js/jquery.min.js"></script>
<script src="/static/js/bootstrap.min.js"></script>

    <link rel="stylesheet" href="/static/css/toc.css">
    <script type="text/javascript" src="/static/js/jquery.toc.js"></script>
</head>
<body>
<nav class="navbar navbar-default top_menu" role="navigation">
    <div class="container-fluid">
        <div class="navbar-header">
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#navbar-collapse-1">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="/">웹Frameworks</a>
        </div>

        <div class="collapse navbar-collapse" id="navbar-collapse-1">
            <ul class="nav navbar-nav navbar-left">
                <li><a href="/getstarted">Get Started</a></li>
            </ul>
            <ul class="nav navbar-nav navbar-left">
                <li><a href="/updates">Update</a></li>
            </ul>
            <ul class="nav navbar-nav navbar-left">
                <li><a href="/tutorials">Tutorials</a></li>
            </ul>
            <ul class="nav navbar-nav navbar-left">
                <li><a href="/quickstart">Quick Start</a></li>
            </ul>
            <ul class="nav navbar-nav navbar-left">
                <li><a href="/archives">Archives</a></li>
            </ul>
            <ul class="nav navbar-nav navbar-left">
                <li><a href="https://github.com/KoreaHTML5/webframeworks.kr/blob/master/CONTRIBUTE.md" target="_blank">참여하기</a></li>
            </ul>
            <ul class="nav navbar-nav navbar-left">
                <li><a href="http://goo.gl/forms/MB9ZxVvdrD" target="_blank">설문하기</a></li>
            </ul>
        </div>
    </div>
</nav>


<div class="content_bg"  style="background-color: #;color: #;" >
<div class="col-md-10 col-md-offset-1 title_header jumbotron"  style="background:url() no-repeat center"  >
<h1 class="title_header_title">AWS Severless IoT 3 – Cognito User Pool</h1>
<p class="title_header_summary">AWS Severless IoT에 대해 알아봅니다.</p>
</div>
</div>

<div>

    <div class="col-sm-3 col-md-2 col-md-offset-2">
        <div class="panel panel-default">
            <div class="panel-heading">
                <h3 class="panel-title">작성자</h3>
            </div>
            <div class="panel-body">
                <div class="media">
                    <a class="pull-left" href="#">
                        <img class="media-object profile_img" src="https://avatars1.githubusercontent.com/u/2949778?s=400&v=4" alt="홍세민">
                    </a>
                    <div class="media-body">
                        <h4 class="media-heading">
                            홍세민

                        </h4>
                        MarcusHong<br>
                    </div>
                </div>
            </div>
        </div>

        <div id="toc_location"></div>

        <div class="panel panel-default">
    <div class="panel-heading">
        <h3 class="panel-title">Tags</h3>
    </div>
    <div class="panel-body">
        <a href='/tags/jquery/' style='color: rgba(0,0,0,0.058549)'>jquery</a>
<a href='/tags/javascript/' style='color: rgba(0,0,0,8.840933)'>javascript</a>
<a href='/tags/html/' style='color: rgba(0,0,0,0.058549)'>html</a>
<a href='/tags/grunt/' style='color: rgba(0,0,0,0.058549)'>grunt</a>
<a href='/tags/gulp/' style='color: rgba(0,0,0,0.058549)'>gulp</a>
<a href='/tags/build/' style='color: rgba(0,0,0,0.351295)'>build</a>
<a href='/tags/yeoman/' style='color: rgba(0,0,0,0.058549)'>yeoman</a>
<a href='/tags/foundation/' style='color: rgba(0,0,0,0.058549)'>foundation</a>
<a href='/tags/bower/' style='color: rgba(0,0,0,0.117098)'>bower</a>
<a href='/tags/twitter/' style='color: rgba(0,0,0,0.117098)'>twitter</a>
<a href='/tags/framework/' style='color: rgba(0,0,0,2.224870)'>framework</a>
<a href='/tags/angularjs/' style='color: rgba(0,0,0,0.995337)'>angularjs</a>
<a href='/tags/tutorials/' style='color: rgba(0,0,0,1.288083)'>tutorials</a>
<a href='/tags/backbone/' style='color: rgba(0,0,0,0.234197)'>backbone</a>
<a href='/tags/getstarted/' style='color: rgba(0,0,0,0.175648)'>getstarted</a>
<a href='/tags/underscore/' style='color: rgba(0,0,0,0.058549)'>underscore</a>
<a href='/tags/library/' style='color: rgba(0,0,0,0.409845)'>library</a>
<a href='/tags/Ext/' style='color: rgba(0,0,0,0.526943)'>Ext</a>
<a href='/tags/JS/' style='color: rgba(0,0,0,0.819689)'>JS</a>
<a href='/tags/tutorial/' style='color: rgba(0,0,0,0.761140)'>tutorial</a>
<a href='/tags/modernizr/' style='color: rgba(0,0,0,0.058549)'>modernizr</a>
<a href='/tags/bootstrap/' style='color: rgba(0,0,0,0.175648)'>bootstrap</a>
<a href='/tags/quickstart/' style='color: rgba(0,0,0,0.058549)'>quickstart</a>
<a href='/tags/angular-di/' style='color: rgba(0,0,0,0.058549)'>angular-di</a>
<a href='/tags/animation/' style='color: rgba(0,0,0,0.234197)'>animation</a>
<a href='/tags/router/' style='color: rgba(0,0,0,0.058549)'>router</a>
<a href='/tags/promise/' style='color: rgba(0,0,0,0.292746)'>promise</a>
<a href='/tags/responsive/' style='color: rgba(0,0,0,0.058549)'>responsive</a>
<a href='/tags/form/' style='color: rgba(0,0,0,0.117098)'>form</a>
<a href='/tags/validation/' style='color: rgba(0,0,0,0.117098)'>validation</a>
<a href='/tags/map/' style='color: rgba(0,0,0,0.058549)'>map</a>
<a href='/tags/direcitve/' style='color: rgba(0,0,0,0.058549)'>direcitve</a>
<a href='/tags/file/' style='color: rgba(0,0,0,0.117098)'>file</a>
<a href='/tags/test/' style='color: rgba(0,0,0,0.234197)'>test</a>
<a href='/tags/ui-bootstrap/' style='color: rgba(0,0,0,0.058549)'>ui-bootstrap</a>
<a href='/tags/twitter-bootstrap/' style='color: rgba(0,0,0,0.058549)'>twitter-bootstrap</a>
<a href='/tags/express/' style='color: rgba(0,0,0,0.117098)'>express</a>
<a href='/tags/express.js/' style='color: rgba(0,0,0,0.058549)'>express.js</a>
<a href='/tags/node.js/' style='color: rgba(0,0,0,0.234197)'>node.js</a>
<a href='/tags/backend/' style='color: rgba(0,0,0,0.175648)'>backend</a>
<a href='/tags/d3.js/' style='color: rgba(0,0,0,0.058549)'>d3.js</a>
<a href='/tags/visualization/' style='color: rgba(0,0,0,0.058549)'>visualization</a>
<a href='/tags/reactjs/' style='color: rgba(0,0,0,0.117098)'>reactjs</a>
<a href='/tags/expressjs/' style='color: rgba(0,0,0,0.409845)'>expressjs</a>
<a href='/tags/react/' style='color: rgba(0,0,0,1.288083)'>react</a>
<a href='/tags/session/' style='color: rgba(0,0,0,0.117098)'>session</a>
<a href='/tags/meteor/' style='color: rgba(0,0,0,0.819689)'>meteor</a>
<a href='/tags/SEO/' style='color: rgba(0,0,0,0.058549)'>SEO</a>
<a href='/tags/REST/' style='color: rgba(0,0,0,0.058549)'>REST</a>
<a href='/tags/API/' style='color: rgba(0,0,0,0.058549)'>API</a>
<a href='/tags/es2015/' style='color: rgba(0,0,0,0.117098)'>es2015</a>
<a href='/tags/es6/' style='color: rgba(0,0,0,0.644041)'>es6</a>
<a href='/tags/es7/' style='color: rgba(0,0,0,0.117098)'>es7</a>
<a href='/tags/DDP/' style='color: rgba(0,0,0,0.058549)'>DDP</a>
<a href='/tags/ngMessages/' style='color: rgba(0,0,0,0.117098)'>ngMessages</a>
<a href='/tags/jsx/' style='color: rgba(0,0,0,0.058549)'>jsx</a>
<a href='/tags/publish/' style='color: rgba(0,0,0,0.058549)'>publish</a>
<a href='/tags/subscribe/' style='color: rgba(0,0,0,0.058549)'>subscribe</a>
<a href='/tags/meteor.js/' style='color: rgba(0,0,0,0.058549)'>meteor.js</a>
<a href='/tags/reactive/' style='color: rgba(0,0,0,0.058549)'>reactive</a>
<a href='/tags/package/' style='color: rgba(0,0,0,0.058549)'>package</a>
<a href='/tags/static/' style='color: rgba(0,0,0,0.058549)'>static</a>
<a href='/tags/assets/' style='color: rgba(0,0,0,0.058549)'>assets</a>
<a href='/tags/public/' style='color: rgba(0,0,0,0.058549)'>public</a>
<a href='/tags/flux/' style='color: rgba(0,0,0,0.234197)'>flux</a>
<a href='/tags/redux/' style='color: rgba(0,0,0,0.409845)'>redux</a>
<a href='/tags/server/' style='color: rgba(0,0,0,0.058549)'>server</a>
<a href='/tags/distribution/' style='color: rgba(0,0,0,0.058549)'>distribution</a>
<a href='/tags/webpack/' style='color: rgba(0,0,0,0.175648)'>webpack</a>
<a href='/tags/development/' style='color: rgba(0,0,0,0.058549)'>development</a>
<a href='/tags/optimization/' style='color: rgba(0,0,0,0.058549)'>optimization</a>
<a href='/tags/immutable/' style='color: rgba(0,0,0,0.058549)'>immutable</a>
<a href='/tags/orm/' style='color: rgba(0,0,0,0.234197)'>orm</a>
<a href='/tags/database/' style='color: rgba(0,0,0,0.234197)'>database</a>
<a href='/tags/hapi.js/' style='color: rgba(0,0,0,0.058549)'>hapi.js</a>
<a href='/tags/hapi/' style='color: rgba(0,0,0,0.234197)'>hapi</a>
<a href='/tags/ionic/' style='color: rgba(0,0,0,0.117098)'>ionic</a>
<a href='/tags/hybrid-app/' style='color: rgba(0,0,0,0.058549)'>hybrid-app</a>
<a href='/tags/django/' style='color: rgba(0,0,0,0.058549)'>django</a>
<a href='/tags/fullstack/' style='color: rgba(0,0,0,0.058549)'>fullstack</a>
<a href='/tags/spa/' style='color: rgba(0,0,0,0.058549)'>spa</a>
<a href='/tags/ExpressJS/' style='color: rgba(0,0,0,0.292746)'>ExpressJS</a>
<a href='/tags/NodeJS/' style='color: rgba(0,0,0,0.292746)'>NodeJS</a>
<a href='/tags/Sequelize/' style='color: rgba(0,0,0,0.292746)'>Sequelize</a>
<a href='/tags/Mocha/' style='color: rgba(0,0,0,0.292746)'>Mocha</a>
<a href='/tags/Supertest/' style='color: rgba(0,0,0,0.292746)'>Supertest</a>
<a href='/tags/UnitTest/' style='color: rgba(0,0,0,0.292746)'>UnitTest</a>
<a href='/tags/this/' style='color: rgba(0,0,0,0.117098)'>this</a>
<a href='/tags/dom/' style='color: rgba(0,0,0,0.058549)'>dom</a>
<a href='/tags/es5/' style='color: rgba(0,0,0,0.117098)'>es5</a>
<a href='/tags/virtualdom/' style='color: rgba(0,0,0,0.117098)'>virtualdom</a>
<a href='/tags/modules/' style='color: rgba(0,0,0,0.058549)'>modules</a>
<a href='/tags/asynchronous/' style='color: rgba(0,0,0,0.058549)'>asynchronous</a>
<a href='/tags/semicolon/' style='color: rgba(0,0,0,0.058549)'>semicolon</a>
<a href='/tags/nodejs/' style='color: rgba(0,0,0,0.058549)'>nodejs</a>
<a href='/tags/ECMAScript2015/' style='color: rgba(0,0,0,0.117098)'>ECMAScript2015</a>
<a href='/tags/babel/' style='color: rgba(0,0,0,0.058549)'>babel</a>
<a href='/tags/angular,/' style='color: rgba(0,0,0,0.058549)'>angular,</a>
<a href='/tags/electron/' style='color: rgba(0,0,0,0.058549)'>electron</a>
<a href='/tags/docker/' style='color: rgba(0,0,0,0.234197)'>docker</a>
<a href='/tags/D3/' style='color: rgba(0,0,0,0.058549)'>D3</a>
<a href='/tags/node/' style='color: rgba(0,0,0,0.117098)'>node</a>
<a href='/tags/aws/' style='color: rgba(0,0,0,1.346632)'>aws</a>
<a href='/tags/dynamoDB/' style='color: rgba(0,0,0,0.058549)'>dynamoDB</a>
<a href='/tags/chrome/' style='color: rgba(0,0,0,0.058549)'>chrome</a>
<a href='/tags/native/' style='color: rgba(0,0,0,0.117098)'>native</a>
<a href='/tags/markdown/' style='color: rgba(0,0,0,0.058549)'>markdown</a>
<a href='/tags/vue/' style='color: rgba(0,0,0,2.107772)'>vue</a>
<a href='/tags/middleware/' style='color: rgba(0,0,0,0.058549)'>middleware</a>
<a href='/tags/IoT/' style='color: rgba(0,0,0,0.058549)'>IoT</a>
<a href='/tags/serverless/' style='color: rgba(0,0,0,0.058549)'>serverless</a>
<a href='/tags/python/' style='color: rgba(0,0,0,0.175648)'>python</a>
<a href='/tags/socket.io/' style='color: rgba(0,0,0,0.175648)'>socket.io</a>

    </div>
</div>
    </div>

    <div class="col-sm-9 col-md-6">
        <div class="media_content media_item shadow_panel" id="main_content">
            <h3>Cognito User Pool</h3>

<p>서비스를 개발하려면 먼저 사용자 인증이 필요하다. 
Cognito를 사용하면 사용자 인증 작업이 생략됨과 동시에 aws의 보안시스템을 사용하게 되므로 개발초기의 작업량이 상당히 줄어든다.
또한 API Gateway와 Iot를 쓴다면 Cognito로 인증을 하겠다는 옵션을 설정하게 되면 Cognito에서 Lambda로 실행하기 전에 인증을 처리하므로 편리하다.
가입 및 로그인 역시 모바일에서 처리할 수 있으므로, 쓰게 되면 많은 이점이 있다.<br><br></p>

<h3>Cloudformation</h3>
<div class="highlight"><pre><code class="language-yaml" data-lang="yaml"><span class="l-Scalar-Plain">AWSTemplateFormatVersion</span><span class="p-Indicator">:</span> <span class="s">&#39;2010-09-09&#39;</span>
<span class="l-Scalar-Plain">Description</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">Dev Master Stack</span>

<span class="l-Scalar-Plain">Parameters</span><span class="p-Indicator">:</span>
  <span class="l-Scalar-Plain">Environment</span><span class="p-Indicator">:</span>
    <span class="l-Scalar-Plain">Default</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">Dev</span>
    <span class="l-Scalar-Plain">Type</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">String</span>

<span class="l-Scalar-Plain">Resources</span><span class="p-Indicator">:</span>
  <span class="l-Scalar-Plain">CognitoAuthorizedRole</span><span class="p-Indicator">:</span>
    <span class="l-Scalar-Plain">Properties</span><span class="p-Indicator">:</span>
      <span class="l-Scalar-Plain">AssumeRolePolicyDocument</span><span class="p-Indicator">:</span>
        <span class="l-Scalar-Plain">Statement</span><span class="p-Indicator">:</span>
        <span class="p-Indicator">-</span> <span class="l-Scalar-Plain">Action</span><span class="p-Indicator">:</span>
          <span class="p-Indicator">-</span> <span class="l-Scalar-Plain">sts:AssumeRoleWithWebIdentity</span>
          <span class="l-Scalar-Plain">Condition</span><span class="p-Indicator">:</span>
            <span class="l-Scalar-Plain">ForAnyValue:StringLike</span><span class="p-Indicator">:</span>
              <span class="l-Scalar-Plain">cognito-identity.amazonaws.com:amr</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">authenticated</span>
            <span class="l-Scalar-Plain">StringEquals</span><span class="p-Indicator">:</span>
              <span class="l-Scalar-Plain">cognito-identity.amazonaws.com:aud</span><span class="p-Indicator">:</span>
                <span class="l-Scalar-Plain">Ref</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">CognitoIdentityPool</span>
          <span class="l-Scalar-Plain">Effect</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">Allow</span>
          <span class="l-Scalar-Plain">Principal</span><span class="p-Indicator">:</span>
            <span class="l-Scalar-Plain">Federated</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">cognito-identity.amazonaws.com</span>
        <span class="l-Scalar-Plain">Version</span><span class="p-Indicator">:</span> <span class="s">&#39;2012-10-17&#39;</span>
      <span class="l-Scalar-Plain">Policies</span><span class="p-Indicator">:</span>
      <span class="p-Indicator">-</span> <span class="l-Scalar-Plain">PolicyDocument</span><span class="p-Indicator">:</span>
          <span class="l-Scalar-Plain">Statement</span><span class="p-Indicator">:</span>
          <span class="p-Indicator">-</span> <span class="l-Scalar-Plain">Action</span><span class="p-Indicator">:</span>
            <span class="p-Indicator">-</span> <span class="l-Scalar-Plain">mobileanalytics:PutEvents</span>
            <span class="p-Indicator">-</span> <span class="l-Scalar-Plain">cognito-sync:*</span>
            <span class="p-Indicator">-</span> <span class="l-Scalar-Plain">cognito-identity:*</span>
            <span class="p-Indicator">-</span> <span class="l-Scalar-Plain">iot:*</span>
            <span class="l-Scalar-Plain">Effect</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">Allow</span>
            <span class="l-Scalar-Plain">Resource</span><span class="p-Indicator">:</span> <span class="s">&#39;*&#39;</span>
          <span class="l-Scalar-Plain">Version</span><span class="p-Indicator">:</span> <span class="s">&#39;2012-10-17&#39;</span>
        <span class="l-Scalar-Plain">PolicyName</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">CognitoAuthorizedPolicy</span>
    <span class="l-Scalar-Plain">Type</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">AWS::IAM::Role</span>

  <span class="l-Scalar-Plain">CognitoExecutionRole</span><span class="p-Indicator">:</span>
    <span class="l-Scalar-Plain">Properties</span><span class="p-Indicator">:</span>
      <span class="l-Scalar-Plain">AssumeRolePolicyDocument</span><span class="p-Indicator">:</span>
        <span class="l-Scalar-Plain">Statement</span><span class="p-Indicator">:</span>
        <span class="p-Indicator">-</span> <span class="l-Scalar-Plain">Action</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">sts:AssumeRole</span>
          <span class="l-Scalar-Plain">Effect</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">Allow</span>
          <span class="l-Scalar-Plain">Principal</span><span class="p-Indicator">:</span>
            <span class="l-Scalar-Plain">Service</span><span class="p-Indicator">:</span>
            <span class="p-Indicator">-</span> <span class="l-Scalar-Plain">lambda.amazonaws.com</span>
            <span class="p-Indicator">-</span> <span class="l-Scalar-Plain">apigateway.amazonaws.com</span>
        <span class="l-Scalar-Plain">Version</span><span class="p-Indicator">:</span> <span class="s">&#39;2012-10-17&#39;</span>
      <span class="l-Scalar-Plain">ManagedPolicyArns</span><span class="p-Indicator">:</span>
      <span class="p-Indicator">-</span> <span class="l-Scalar-Plain">arn:aws:iam::aws:policy/service-role/AWSLambdaVPCAccessExecutionRole</span>
      <span class="l-Scalar-Plain">Policies</span><span class="p-Indicator">:</span>
      <span class="p-Indicator">-</span> <span class="l-Scalar-Plain">PolicyDocument</span><span class="p-Indicator">:</span>
          <span class="l-Scalar-Plain">Statement</span><span class="p-Indicator">:</span>
          <span class="p-Indicator">-</span> <span class="l-Scalar-Plain">Action</span><span class="p-Indicator">:</span>
            <span class="p-Indicator">-</span> <span class="l-Scalar-Plain">cognito-idp:*</span>
            <span class="p-Indicator">-</span> <span class="l-Scalar-Plain">dynamodb:*</span>
            <span class="p-Indicator">-</span> <span class="l-Scalar-Plain">lambda:InvokeFunction</span>
            <span class="l-Scalar-Plain">Effect</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">Allow</span>
            <span class="l-Scalar-Plain">Resource</span><span class="p-Indicator">:</span> <span class="s">&#39;*&#39;</span>
          <span class="l-Scalar-Plain">Version</span><span class="p-Indicator">:</span> <span class="s">&#39;2012-10-17&#39;</span>
        <span class="l-Scalar-Plain">PolicyName</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">LambdaCognitoPolicy</span>
    <span class="l-Scalar-Plain">Type</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">AWS::IAM::Role</span>

  <span class="l-Scalar-Plain">CognitoIdentityPool</span><span class="p-Indicator">:</span>
    <span class="l-Scalar-Plain">Properties</span><span class="p-Indicator">:</span>
      <span class="l-Scalar-Plain">AllowUnauthenticatedIdentities</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">false</span>
      <span class="l-Scalar-Plain">CognitoIdentityProviders</span><span class="p-Indicator">:</span>
      <span class="p-Indicator">-</span> <span class="l-Scalar-Plain">ClientId</span><span class="p-Indicator">:</span>
          <span class="l-Scalar-Plain">Ref</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">CognitoUserPoolAppClient</span>
        <span class="l-Scalar-Plain">ProviderName</span><span class="p-Indicator">:</span>
          <span class="l-Scalar-Plain">Fn::GetAtt</span><span class="p-Indicator">:</span>
          <span class="p-Indicator">-</span> <span class="l-Scalar-Plain">CognitoUserPool</span>
          <span class="p-Indicator">-</span> <span class="l-Scalar-Plain">ProviderName</span>
      <span class="p-Indicator">-</span> <span class="l-Scalar-Plain">ClientId</span><span class="p-Indicator">:</span>
          <span class="l-Scalar-Plain">Ref</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">CognitoUserPoolWebClient</span>
        <span class="l-Scalar-Plain">ProviderName</span><span class="p-Indicator">:</span>
          <span class="l-Scalar-Plain">Fn::GetAtt</span><span class="p-Indicator">:</span>
          <span class="p-Indicator">-</span> <span class="l-Scalar-Plain">CognitoUserPool</span>
          <span class="p-Indicator">-</span> <span class="l-Scalar-Plain">ProviderName</span>
      <span class="l-Scalar-Plain">IdentityPoolName</span><span class="p-Indicator">:</span>
        <span class="l-Scalar-Plain">Fn::Sub</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">${Environment}IdentityPool</span>
    <span class="l-Scalar-Plain">Type</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">AWS::Cognito::IdentityPool</span>



  <span class="l-Scalar-Plain">CognitoUnAuthorizedRole</span><span class="p-Indicator">:</span>
    <span class="l-Scalar-Plain">Properties</span><span class="p-Indicator">:</span>
      <span class="l-Scalar-Plain">AssumeRolePolicyDocument</span><span class="p-Indicator">:</span>
        <span class="l-Scalar-Plain">Statement</span><span class="p-Indicator">:</span>
        <span class="p-Indicator">-</span> <span class="l-Scalar-Plain">Action</span><span class="p-Indicator">:</span>
          <span class="p-Indicator">-</span> <span class="l-Scalar-Plain">sts:AssumeRoleWithWebIdentity</span>
          <span class="l-Scalar-Plain">Condition</span><span class="p-Indicator">:</span>
            <span class="l-Scalar-Plain">ForAnyValue:StringLike</span><span class="p-Indicator">:</span>
              <span class="l-Scalar-Plain">cognito-identity.amazonaws.com:amr</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">unauthenticated</span>
            <span class="l-Scalar-Plain">StringEquals</span><span class="p-Indicator">:</span>
              <span class="l-Scalar-Plain">cognito-identity.amazonaws.com:aud</span><span class="p-Indicator">:</span>
                <span class="l-Scalar-Plain">Ref</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">CognitoIdentityPool</span>
          <span class="l-Scalar-Plain">Effect</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">Allow</span>
          <span class="l-Scalar-Plain">Principal</span><span class="p-Indicator">:</span>
            <span class="l-Scalar-Plain">Federated</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">cognito-identity.amazonaws.com</span>
        <span class="l-Scalar-Plain">Version</span><span class="p-Indicator">:</span> <span class="s">&#39;2012-10-17&#39;</span>
      <span class="l-Scalar-Plain">Policies</span><span class="p-Indicator">:</span>
      <span class="p-Indicator">-</span> <span class="l-Scalar-Plain">PolicyDocument</span><span class="p-Indicator">:</span>
          <span class="l-Scalar-Plain">Statement</span><span class="p-Indicator">:</span>
          <span class="p-Indicator">-</span> <span class="l-Scalar-Plain">Action</span><span class="p-Indicator">:</span>
            <span class="p-Indicator">-</span> <span class="l-Scalar-Plain">mobileanalytics:PutEvents</span>
            <span class="l-Scalar-Plain">Effect</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">Allow</span>
            <span class="l-Scalar-Plain">Resource</span><span class="p-Indicator">:</span> <span class="s">&#39;*&#39;</span>
          <span class="l-Scalar-Plain">Version</span><span class="p-Indicator">:</span> <span class="s">&#39;2012-10-17&#39;</span>
        <span class="l-Scalar-Plain">PolicyName</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">CognitoUnauthorizedPolicy</span>
    <span class="l-Scalar-Plain">Type</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">AWS::IAM::Role</span>

  <span class="l-Scalar-Plain">CognitoUserPool</span><span class="p-Indicator">:</span>
    <span class="l-Scalar-Plain">Properties</span><span class="p-Indicator">:</span>
      <span class="l-Scalar-Plain">AdminCreateUserConfig</span><span class="p-Indicator">:</span>
        <span class="l-Scalar-Plain">AllowAdminCreateUserOnly</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">false</span>
      <span class="l-Scalar-Plain">AutoVerifiedAttributes</span><span class="p-Indicator">:</span>
      <span class="p-Indicator">-</span> <span class="l-Scalar-Plain">email</span>
      <span class="l-Scalar-Plain">DeviceConfiguration</span><span class="p-Indicator">:</span>
        <span class="l-Scalar-Plain">ChallengeRequiredOnNewDevice</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">true</span>
      <span class="l-Scalar-Plain">LambdaConfig</span><span class="p-Indicator">:</span>
        <span class="l-Scalar-Plain">PreSignUp</span><span class="p-Indicator">:</span>
          <span class="l-Scalar-Plain">Fn::GetAtt</span><span class="p-Indicator">:</span>
          <span class="p-Indicator">-</span> <span class="l-Scalar-Plain">CognitoPreSignUp</span>
          <span class="p-Indicator">-</span> <span class="l-Scalar-Plain">Arn</span>
      <span class="l-Scalar-Plain">Policies</span><span class="p-Indicator">:</span>
        <span class="l-Scalar-Plain">PasswordPolicy</span><span class="p-Indicator">:</span>
          <span class="l-Scalar-Plain">MinimumLength</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">6</span>
          <span class="l-Scalar-Plain">RequireLowercase</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">false</span>
          <span class="l-Scalar-Plain">RequireNumbers</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">false</span>
          <span class="l-Scalar-Plain">RequireSymbols</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">false</span>
          <span class="l-Scalar-Plain">RequireUppercase</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">false</span>
      <span class="l-Scalar-Plain">Schema</span><span class="p-Indicator">:</span>
      <span class="p-Indicator">-</span> <span class="l-Scalar-Plain">AttributeDataType</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">String</span>
        <span class="l-Scalar-Plain">DeveloperOnlyAttribute</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">false</span>
        <span class="l-Scalar-Plain">Mutable</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">false</span>
        <span class="l-Scalar-Plain">Name</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">email</span>
        <span class="l-Scalar-Plain">Required</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">true</span>
        <span class="l-Scalar-Plain">StringAttributeConstraints</span><span class="p-Indicator">:</span>
          <span class="l-Scalar-Plain">MaxLength</span><span class="p-Indicator">:</span> <span class="s">&#39;255&#39;</span>
          <span class="l-Scalar-Plain">MinLength</span><span class="p-Indicator">:</span> <span class="s">&#39;5&#39;</span>
      <span class="l-Scalar-Plain">UserPoolName</span><span class="p-Indicator">:</span>
        <span class="l-Scalar-Plain">Fn::Sub</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">${Environment}UserPool</span>
    <span class="l-Scalar-Plain">Type</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">AWS::Cognito::UserPool</span>

  <span class="l-Scalar-Plain">CognitoUserPoolAppClient</span><span class="p-Indicator">:</span>
    <span class="l-Scalar-Plain">Properties</span><span class="p-Indicator">:</span>
      <span class="l-Scalar-Plain">ClientName</span><span class="p-Indicator">:</span>
        <span class="l-Scalar-Plain">Fn::Sub</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">${Environment}App</span>
      <span class="l-Scalar-Plain">GenerateSecret</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">true</span>
      <span class="l-Scalar-Plain">RefreshTokenValidity</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">365</span>
      <span class="l-Scalar-Plain">UserPoolId</span><span class="p-Indicator">:</span>
        <span class="l-Scalar-Plain">Ref</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">CognitoUserPool</span>
    <span class="l-Scalar-Plain">Type</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">AWS::Cognito::UserPoolClient</span>

  <span class="l-Scalar-Plain">CognitoUserPoolWebClient</span><span class="p-Indicator">:</span>
    <span class="l-Scalar-Plain">Properties</span><span class="p-Indicator">:</span>
      <span class="l-Scalar-Plain">ClientName</span><span class="p-Indicator">:</span>
        <span class="l-Scalar-Plain">Fn::Sub</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">${Environment}Web</span>
      <span class="l-Scalar-Plain">GenerateSecret</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">false</span>
      <span class="l-Scalar-Plain">RefreshTokenValidity</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">365</span>
      <span class="l-Scalar-Plain">UserPoolId</span><span class="p-Indicator">:</span>
        <span class="l-Scalar-Plain">Ref</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">CognitoUserPool</span>
    <span class="l-Scalar-Plain">Type</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">AWS::Cognito::UserPoolClient</span>

<span class="l-Scalar-Plain">Outputs</span><span class="p-Indicator">:</span>
  <span class="l-Scalar-Plain">UserPoolAppClient</span><span class="p-Indicator">:</span>
    <span class="l-Scalar-Plain">Value</span><span class="p-Indicator">:</span>
      <span class="l-Scalar-Plain">Ref</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">CognitoUserPoolAppClient</span>
  <span class="l-Scalar-Plain">UserPoolId</span><span class="p-Indicator">:</span>
    <span class="l-Scalar-Plain">Value</span><span class="p-Indicator">:</span>
      <span class="l-Scalar-Plain">Ref</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">CognitoUserPool</span>
  <span class="l-Scalar-Plain">UserPoolWebClient</span><span class="p-Indicator">:</span>
    <span class="l-Scalar-Plain">Value</span><span class="p-Indicator">:</span>
      <span class="l-Scalar-Plain">Ref</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">CognitoUserPoolWebClient</span>
</code></pre></div>
<h3>환경변수</h3>

<p>Environment를 선언해서 스택을 생성할 때 리소스의 이름을 다르게 만들어 개발/운영 서버를 구분할 수 있게 함. 
구분할 필요가 없다면 고정값으로 바꾸어도 무방하다.</p>

<h3>refresh token</h3>

<p>Cognito는 jwt로 토큰을 생성하며, access token, refresh token을 사용하는 Oauth 방식이다.
RefreshTokenValidity 에서 refresh token의 유효기간을 정할 수 있다.</p>

<h3>인증</h3>

<p>CognitoUserPool에서 유저 패스워드 정책, 이메일이나 전화번호 인증을 필수로 선택하게 할 수도 있다.</p>

<h3>Client 설정</h3>

<p>CognitoUserPoolAppClient, CognitoUserPoolWebClient 을 선언해서 앱과, 백엔드에서 Cognito를 사용할 수 있게 한다.
이 때, javascript는 secret을 만들 수가 없어, GenerateSecret: true 로 하게 되면 오류가 발생한다.</p>

        </div>

        <div class="media_content media_item shadow_panel">
            <p>Tags : <a href="/tags/aws">aws</a>&nbsp;</p>
        </div>


        <div class="media_content media_item shadow_panel">
            <div id="disqus_thread"></div>
<script type="text/javascript">
    /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
    var disqus_shortname = 'html5krforkisa'; // required: replace example with your forum shortname

    /* * * DON'T EDIT BELOW THIS LINE * * */
    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
    
        </div>

    </div>

    <script>
        $('#main_content').toc();
    </script>
</div>
<footer>
<table width="100%" height="80" class="footer">
    <tr>
        <td align="center" class="footer_content">
            WebFrameworks.kr @since 2015
        </td>
    </tr>
</table>
</footer>
<script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
            m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-56520981-1', 'auto');
    ga('send', 'pageview');

</script>
</body>
</html>